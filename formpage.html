<!-- New Data Entry Form -->
<!DOCTYPE html>
<html>
 <head>
    <!-- Load jQuery, Bootstrap, Firebase -->
  <!-- jQuery -->
  <script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
  crossorigin="anonymous"></script>
  <!-- Add html2canvas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<!-- Add jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-analytics.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";
    import { getStorage,uploadString, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-storage.js";
    import {uploadBytesResumable } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-storage.js";
import { ref } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-storage.js";
import {Timestamp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";

    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyAIDs-jSvlJmf7ga5RCvzvo4RmGQ1kzBDs",
        authDomain: "dataentryportal-17441.firebaseapp.com",
        projectId: "dataentryportal-17441",
        storageBucket: "dataentryportal-17441.firebasestorage.app",
        messagingSenderId: "380052849415",
        appId: "1:380052849415:web:6563eb7973362dab15fba2",
        measurementId: "G-6WQHNQMX2D"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth();
    var currentuser = {};
    const db = getFirestore(app);
    const storage = getStorage(app);

    // On your other webpage, add this code
document.addEventListener('DOMContentLoaded', function() {
    // Check if user is logged in
    onAuthStateChanged(auth, (user) => {
        if (user) {
            // User is signed in, get their data from Firestore
            const docRef = doc(db, "users", user.uid);
            
            getDoc(docRef)
                .then((docSnap) => {
                    if (docSnap.exists()) {
                        // Access the user data
                        const userData = docSnap.data();
                        
                        // Display the designation in the residentName input field
                        document.getElementById("residentName").value = userData.designation;
                        
                        // Also get and display the kmcId if you have an input field for it
                        // Assuming you have an input field with id "kmcIdField"
                        if (document.getElementById("residentkmcId")) {
                            document.getElementById("residentkmcId").value = userData.kmcId;
                        }
                        
                        console.log("User data loaded:", userData.designation, userData.kmcId);
                    } else {
                        console.log("No such document!");
                    }
                })
                .catch((error) => {
                    console.error("Error getting document:", error);
                });
        } else {
            // User is signed out, handle accordingly
            console.log("No user is signed in.");
            // Perhaps redirect to login page
        }
    });
});
    async function uploadToCloudinary(file) {
    const CLOUDINARY_URL = "https://api.cloudinary.com/v1_1/dreh6wst7/upload";
    const UPLOAD_PRESET = "zmt0pvqy";

    let formData = new FormData();
    formData.append("file", file);
    formData.append("upload_preset", UPLOAD_PRESET);

    // Detect file type and set resource type dynamically
    let resourceType = file.type.startsWith("video") ? "video" : "image";
    formData.append("resource_type", resourceType);

    try {
        let response = await fetch(CLOUDINARY_URL, {
            method: "POST",
            body: formData
        });
        let data = await response.json();
        
        if (data.secure_url) {
            console.log(`✅ ${resourceType} uploaded successfully:`, data.secure_url);
            return data.secure_url; // Cloudinary URL for the uploaded file
        } else {
            throw new Error("Upload failed: No secure URL returned.");
        }
    } catch (error) {
        console.error(`❌ Cloudinary ${resourceType} Upload Failed:`, error);
        return null;
    }
}

async function prefillForm() {
    const urlParams = new URLSearchParams(window.location.search);
    const docId = urlParams.get("docId");

    if (!docId) {
        console.error("❌ No docId found in URL");
        return;
    }

    try {
        let docRef1 = doc(db, "form1_entries", docId);
        let docRef2 = doc(db, "form2_entries", docId);

        let [docSnap1, docSnap2] = await Promise.all([getDoc(docRef1), getDoc(docRef2)]);

        if (docSnap1.exists()) {
            const form1 = document.getElementById("form1");
            if (form1) {
                prefillFormFields(form1, docSnap1.data());
                console.log(`✅ Form 1 prefilled successfully with docId: ${docId}`);
            } else {
                console.warn("⚠ Form 1 not found on the page.");
            }
        } else {
            console.warn(`⚠ No data found for Form 1 with docId: ${docId}`);
        }

        if (docSnap2.exists()) {
            const form2 = document.getElementById("form2");
            if (form2) {
                prefillFormFields(form2, docSnap2.data());
                console.log(`✅ Form 2 prefilled successfully with docId: ${docId}`);
            } else {
                console.warn("⚠ Form 2 not found on the page.");
            }
        } else {
            console.warn(`⚠ No data found for Form 2 with docId: ${docId}`);
        }

    } catch (error) {
        console.error("❌ Error fetching documents:", error);
        alert("Failed to load previous data.");
    }
}


async function saveFormData(formId, collectionName) {
    console.log(`Saving ${formId} to ${collectionName}`);

    const form = document.getElementById(formId);
    if (!form) {
        console.error(`❌ Error: Form not found - ${formId}`);
        return;
    }

    // ✅ NEW: Check for required fields first
    const requiredFields = form.querySelectorAll('[required]');
    const missingFields = [];
    
    requiredFields.forEach(field => {
        let isEmpty = false;
        
        if (field.type === 'checkbox' || field.type === 'radio') {
            // For radio buttons and checkboxes, check if any in the group is checked
            const groupName = field.name;
            const isChecked = form.querySelector(`input[name="${groupName}"]:checked`);
            isEmpty = !isChecked;
        } else if (field.type === 'file') {
            // For file inputs, check if files are selected
            isEmpty = field.files.length === 0;
            // Also check if there's a hidden input with previously uploaded file info
            if (isEmpty) {
                const hiddenInput = form.querySelector(`input[type="hidden"][data-for="${field.id}"]`);
                isEmpty = !(hiddenInput && hiddenInput.value);
            }
        } else {
            // For text, select, textarea, etc.
            isEmpty = !field.value || field.value.trim() === "";
        }
        
        if (isEmpty) {
            // Get field name prioritizing the name attribute
            let fieldName = "";
            
            if (field.name) {
                // Format the name attribute for display (convert camelCase/snake_case to words)
                fieldName = field.name
                    .replace(/([A-Z])/g, ' $1') // camelCase to spaces
                    .replace(/_/g, ' ') // snake_case to spaces
                    .replace(/^\w/, c => c.toUpperCase()); // Capitalize first letter
            } else if (field.getAttribute('aria-label')) {
                fieldName = field.getAttribute('aria-label');
            } else {
                // Fallback to label text if available
                const fieldLabel = form.querySelector(`label[for="${field.id}"]`);
                if (fieldLabel && fieldLabel.textContent) {
                    fieldName = fieldLabel.textContent.trim();
                } else {
                    fieldName = field.placeholder || field.id || "Unnamed field";
                }
            }
            
            missingFields.push(fieldName);
        }
    });
    
    // If any required fields are missing, alert and exit
    if (missingFields.length > 0) {
        const message = `Please fill in all required fields:\n- ${missingFields.join('\n- ')}`;
        alert(message);
        console.error(`❌ Form submission stopped: Missing required fields: ${missingFields.join(', ')}`);
        return;
    }

    const formData = {};

    // ✅ Collect text inputs, textareas, date, and time - only if they have values
    form.querySelectorAll('input[type="text"], input[type="date"], input[type="time"], textarea').forEach(input => {
        if (input.id && input.value.trim() !== "") {
            formData[input.id] = input.value.trim();
        }
    });

    // ✅ Collect select box values - only if a selection was made
    form.querySelectorAll('select').forEach(select => {
        if (select.id && select.value && select.value !== "") {
            formData[select.id] = select.value;
        }
    });

    // ✅ Collect selected radio button values - only if one is checked
    const radioGroups = new Set();
    form.querySelectorAll('input[type="radio"]').forEach(radio => {
        radioGroups.add(radio.name);
    });
    
    radioGroups.forEach(groupName => {
        const selectedRadio = form.querySelector(`input[name="${groupName}"]:checked`);
        if (selectedRadio) {
            formData[groupName] = selectedRadio.value;
        }
    });

    // ✅ Collect only CHECKED checkbox values
    form.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
        if (checkbox.id) {
            formData[checkbox.id] = true;
        }
        // Also save with name attribute as a backup method (for groups)
        if (checkbox.name) {
            formData[checkbox.name] = true;
        }
    });

   // ✅ MODIFIED: Collect file inputs and upload to Cloudinary
const fileUploads = form.querySelectorAll('input[type="file"]');
const fileUploadPromises = [];

fileUploads.forEach(fileInput => {
    if (fileInput.files.length > 0 && fileInput.id) {
        const file = fileInput.files[0];
        
        // Create a promise for this file upload
        const uploadPromise = new Promise(async (resolve) => {
            try {
                // Upload directly to Cloudinary
                const imageUrl = await uploadToCloudinary(file);
                
                if (imageUrl) {
                    console.log(`✅ File uploaded to Cloudinary successfully:`, imageUrl);
                    
                    // Store the Cloudinary URL in formData
                    formData[fileInput.id] = {
                        url: imageUrl,
                        type: file.type,
                        name: file.name,
                        size: file.size
                    };
                } else {
                    console.error(`❌ Cloudinary upload failed`);
                }
            } catch (error) {
                console.error(`❌ Error in Cloudinary upload process:`, error);
            }
            resolve();
        });
        
        fileUploadPromises.push(uploadPromise);
    } else {
        // Check if there is a hidden input with previously uploaded file info
        const hiddenInput = form.querySelector(`input[type="hidden"][data-for="${fileInput.id}"]`);
        if (hiddenInput && hiddenInput.value) {
            try {
                // Restore the previously uploaded file info
                formData[fileInput.id] = JSON.parse(hiddenInput.value);
                console.log(`✅ Restored previously uploaded file: ${formData[fileInput.id].name}`);
            } catch (error) {
                console.error(`❌ Error parsing hidden file data:`, error);
            }
        }
    }
});

    // ✅ Collect table data with values (if inside a <table>)
    form.querySelectorAll('table').forEach((table, index) => {
        const tableData = [];
        table.querySelectorAll("tr").forEach(row => {
            const rowData = {};
            row.querySelectorAll("td input, td select, td textarea").forEach(cellInput => {
                if (cellInput.id && cellInput.value && cellInput.value.trim() !== "") {
                    rowData[cellInput.id] = cellInput.value.trim();
                }
            });
            if (Object.keys(rowData).length > 0) {
                tableData.push(rowData);
            }
        });
        if (tableData.length > 0) {
            formData[`table_${index}`] = tableData;
        }
    });

    // ✅ Wait for all file uploads to complete
    if (fileUploadPromises.length > 0) {
        console.log(`Waiting for ${fileUploadPromises.length} file uploads to complete...`);
        await Promise.all(fileUploadPromises);
    }

    // ✅ Ensure form is not empty before saving
    console.log("Collected form data:", formData);
    if (Object.keys(formData).length === 0) {
        console.error("❌ Error: Form data is empty!");
        alert("Form submission failed: No data found. Please fill in the form.");
        return;
    }

    // ✅ Use JavaScript's Date() for timestamp
    formData.timestamp = new Date().toISOString();

    // ✅ Get patient name and generate a unique document ID
    const patientName = formData["patientName"] ? formData["patientName"].replace(/\s+/g, "_") : "unknown";
    const docId = `${patientName}`;

    try {
        // ✅ Use `setDoc()` correctly
        await setDoc(doc(collection(db, collectionName), docId), formData);
        console.log(`✅ Document saved successfully with ID: ${docId}`);
        alert("Data saved successfully!");
    } catch (error) {
        console.error("❌ Error saving document:", error);
        alert("Failed to save data.");
    }
}
// ✅ Extract docId from URL before calling prefillForm()
const urlParams = new URLSearchParams(window.location.search);
const docId = urlParams.get("docId");

// ✅ Enhanced Helper Function to Prefill Form Fields with hidden field support
function prefillFormFields(form, formData) {
    // Debug logging
    console.log("Prefilling form with data:", formData);
    
    // First, show all hidden fields that have values in the formData
    showHiddenFieldsWithValues(form, formData);
    
    // Handle checkboxes
    form.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
        // Try to match by ID
        if (checkbox.id && formData[checkbox.id] !== undefined) {
            checkbox.checked = formData[checkbox.id];
            console.log(`✅ Set checkbox by ID: ${checkbox.id} = ${checkbox.checked}`);
        } 
        // Try to match by name as a fallback
        else if (checkbox.name && formData[checkbox.name] !== undefined) {
            checkbox.checked = formData[checkbox.name];
            console.log(`✅ Set checkbox by name: ${checkbox.name} = ${checkbox.checked}`);
        }
    });

    // Handle radio buttons
    Object.keys(formData).forEach(key => {
        const radioGroup = form.querySelectorAll(`input[name="${key}"][type="radio"]`);
        
        if (radioGroup.length > 0) {
            radioGroup.forEach(radio => {
                if (radio.value === formData[key]) {
                    radio.checked = true;
                    console.log(`✅ Set radio button: name=${key}, value=${radio.value}`);
                }
            });
        }
    });

    // Handle text inputs, textareas, selects, date and time inputs
    Object.keys(formData).forEach(key => {
        const field = form.querySelector(`#${key}`);
        
        if (field && field.type !== "checkbox" && field.type !== "radio" && field.type !== "file") {
            if (field.tagName === "TEXTAREA" || field.tagName === "INPUT" || field.tagName === "SELECT") {
                field.value = formData[key];
                console.log(`✅ Set field: id=${key}, value=${field.value}`);
            }
        }
    });

    // Handle file inputs by showing the previously uploaded filenames
    Object.keys(formData).forEach(key => {
    const fileInput = form.querySelector(`input[type="file"]#${key}`);
    
    if (fileInput && formData[key]) {
        let fileLabel = fileInput.nextElementSibling;
        if (!fileLabel || !fileLabel.classList.contains('file-uploaded-label')) {
            fileLabel = document.createElement('span');
            fileLabel.classList.add('file-uploaded-label');
            fileInput.parentNode.insertBefore(fileLabel, fileInput.nextSibling);
        }

        // Display Cloudinary image URL if available
        if (formData[key].url) {
            fileLabel.textContent = `Previously uploaded: ${formData[key].name}`;
            fileLabel.style.display = 'block';
            fileLabel.style.color = 'green';
            fileLabel.style.fontStyle = 'italic';
        }

        // Add a preview image if it's an image file
        if (formData[key].url && formData[key].type.startsWith("image")) {
            let imgPreview = document.createElement("img");
            imgPreview.src = formData[key].url;
            imgPreview.style.maxWidth = "150px";
            imgPreview.style.display = "block";
            imgPreview.style.marginTop = "5px";
            fileLabel.appendChild(imgPreview);
        }
        else if (formData[key].type.startsWith("video")) {
        // Display Video Preview
        let videoPreview = document.createElement("video");
        videoPreview.src = formData[key].url;
        videoPreview.style.maxWidth = "250px";
        videoPreview.style.display = "block";
        videoPreview.style.marginTop = "5px";
        videoPreview.controls = true; // Add video controls (play, pause, etc.)
        fileLabel.appendChild(videoPreview);
    }
        // Add a hidden input to store the Cloudinary URL
        let hiddenInput = form.querySelector(`input[type="hidden"][data-for="${key}"]`);
        if (!hiddenInput) {
            hiddenInput = document.createElement('input');
            hiddenInput.type = 'hidden';
            hiddenInput.setAttribute('data-for', key);
            fileInput.parentNode.insertBefore(hiddenInput, fileInput.nextSibling);
        }
        hiddenInput.value = JSON.stringify(formData[key]);
    }
});
}

// ✅ New helper function to show hidden fields that have values
function showHiddenFieldsWithValues(form, formData) {
    // Process all fields in the formData object
    Object.keys(formData).forEach(key => {
        // Try to find the element by ID
        const element = form.querySelector(`#${key}`);
        
        if (element) {
            // Check if the element itself is hidden
            if (element.style.display === 'none' || element.hidden) {
                element.style.display = '';
                element.hidden = false;
                console.log(`✅ Unhidden field with ID: ${key}`);
            }
            
            // Check for parent containers that might be hidden
            let parent = element.parentElement;
            while (parent && parent !== form) {
                if (parent.style.display === 'none' || parent.hidden) {
                    parent.style.display = '';
                    parent.hidden = false;
                    console.log(`✅ Unhidden parent container for field: ${key}`);
                }
                parent = parent.parentElement;
            }
        } else {
            // Check for radio button groups by name
            const radioButtons = form.querySelectorAll(`input[name="${key}"][type="radio"]`);
            if (radioButtons.length > 0) {
                radioButtons.forEach(radio => {
                    if (radio.style.display === 'none' || radio.hidden) {
                        radio.style.display = '';
                        radio.hidden = false;
                        console.log(`✅ Unhidden radio button: ${radio.id}`);
                    }
                    
                    // Check for parent containers
                    let parent = radio.parentElement;
                    while (parent && parent !== form) {
                        if (parent.style.display === 'none' || parent.hidden) {
                            parent.style.display = '';
                            parent.hidden = false;
                            console.log(`✅ Unhidden parent container for radio: ${radio.id}`);
                        }
                        parent = parent.parentElement;
                    }
                });
            }
        }
    });
    
    // Also check for hidden fieldsets, divs or sections that might contain fields with values
    form.querySelectorAll('fieldset, div, section').forEach(container => {
        if (container.style.display === 'none' || container.hidden) {
            // Check if any child elements have values in formData
            let containsValue = false;
            
            // Check all input elements within this container
            container.querySelectorAll('input, select, textarea').forEach(input => {
                if (input.id && formData[input.id] !== undefined) {
                    containsValue = true;
                }
                if (input.name && formData[input.name] !== undefined) {
                    containsValue = true;
                }
            });
            
            if (containsValue) {
                container.style.display = '';
                container.hidden = false;
                console.log(`✅ Unhidden container with fields that have values`);
            }
        }
    });
}

// Event listener for specific buttons that save to Firebase
document.addEventListener("DOMContentLoaded", function() {
    // Add event listener for the first "Generate" button
    const addButton1 = document.getElementById("add-to-database-button1");
    if (addButton1) {
        addButton1.addEventListener("click", function() {
            saveFormData("form1", "form1_entries");
            console.log("✅ Form 1 data saved via Generate button");
        });
        console.log("✅ Event listener added to add-to-database-button1");
    } else {
        console.warn("⚠ Button with ID 'add-to-database-button1' not found");
    }

    // Add event listener for the second "Generate" button
    const addButton2 = document.getElementById("add-to-database-button2");
    if (addButton2) {
        addButton2.addEventListener("click", function() {
            saveFormData("form2", "form2_entries");
            console.log("✅ Form 2 data saved via Generate button");
        });
        console.log("✅ Event listener added to add-to-database-button2");
    } else {
        console.warn("⚠ Button with ID 'add-to-database-button2' not found");
    }

    // Load prefilled data if docId is present in URL
    if (docId) {
        prefillForm();
        console.log("✅ Attempting to prefill forms with docId:", docId);
    }
});
</script>
<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
<!-- Add html2canvas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<!-- Add jsPDF -->
<!-- Include jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<!-- Include html2canvas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheets" href="styles.css">
 </head>
 
<style>
    h1 {text-align: center;}
    h1 {text-align: center;}
    h1 {text-align: center;}
    h1 {text-align: center;}
    h1 {text-align: center;}
    h1 {text-align: center;}
    div {text-align: center;}
    input {text-align: center;}
    option {text-align: center;}
    .hidden {
            display: none !important;
        }
        .canvas-container {
    position: relative;
    display: inline-block;
    margin: 10px;
    width: 300px; /* Adjust width */
    height: auto; /* Maintain aspect ratio */
}

.canvas-container img {
    width: 100%; /* Make the image fit within the container */
    height: auto; /* Maintain aspect ratio */
}

.canvas-container canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%; /* Make the canvas match the image size */
    height: auto;
}

        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }

    #add_patient2 {
        background-color: rgba(244, 234, 220, 0.9); /* White background with 30% transparency */
    padding: 20px;
    border-radius: 10px; /* Rounded corners */
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); /* Optional: soft shadow for better visibility */
    color: black; /* Text color for contrast */
    margin-top: 30px;
}

#add_patient1 {
    background-color: rgba(244, 234, 220, 0.9); /* White background with 30% transparency */
    padding: 20px;
    border-radius: 10px; /* Rounded corners */
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); /* Optional: soft shadow for better visibility */
    color: black; /* Text color for contrast */
    margin-top: 30px;
}
.input-fields {
    display: flex;
    justify-content: center;
    gap: 50px; /* Adjust spacing between left and right sections */
    margin-top: 10px;
}

.col {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.input-group {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    margin-bottom: 5px;
}

.input-group label {
    font-weight: bold;
    min-width: 120px; /* Ensures labels are aligned properly */
    text-align: right;
}

.input-group input {
    width: 80px;
    padding: 3px;
    text-align: center;
}


    .form-container {
    background-color: rgba(255, 255, 255, 0.8);
    padding: 20px;
    border-radius: 10px;
    border: 2px solid #333; /* Add this line for the boundary */
    display: inline-block;
    margin-top: 50px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); /* Optional: adds a subtle shadow */
}

    </style>
    <style>
        body {
            background-image: url('img14.png'); /* Replace with your image path */
            background-size: cover;  /* Ensures the image covers the entire background */
            background-position: center;  /* Centers the image */
            height: 100vh;  /* Makes sure the body takes up the full viewport height */
            margin: 0;
            position:relative;
            opacity:1.0;
            
        }
        /* Overlay to make the image translucent */
        .overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(255, 255, 255, 0.6); /* Adjust transparency */
                opacity:0.5;
            }
            .overlay {
    background-color: rgba(255, 255, 255, 0.2); /* Lighter overlay */
}
#form-container {  
    background-color: white !important; /* Fully opaque white */
    opacity: 1;  /* Ensures full opacity */
    padding: 20px;  /* Adds spacing inside the form */
    border-radius: 10px;  /* Optional: Rounds the corners */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Adds a soft shadow for better visibility */
}

    
            .content {
                position: relative;
                z-index: 1; /* Makes sure content is above the overlay */
                text-align: center;
                padding: 5px;
            }
    
            h1, p {
                color: white; /* Text color to contrast the background */
            }

            .amputation-table {
        display: grid;
        grid-template-columns: repeat(8, 1fr); /* 4 columns for left, 4 for right */
        gap: 10px;
        max-width: 800px;
        margin: 20px auto;
        background-color: white;
        padding: 10px;
    }
    .header {
        text-align: center;
        font-weight: bold;
        grid-column: span 4;
    }
    .sub-header {
        font-weight: bold;
        text-align: center;
    }
    .digit-label {
        text-align: center;
        font-weight: bold;
        align-self: center;
    }
    .input-field {
        width: 100%;
        padding: 4px;
        box-sizing: border-box;
    }
            .ms-3 {
    margin-left: 15px;
}
h1, p {
            color: black; /* Text color to contrast the background */
        }
        .d-flex {
    display: flex;
    align-items: center;  /* Ensures vertical centering */
}

.about-image {
    width: 150px; /* Set the width of the image */
    height: auto; /* Keep the image's aspect ratio */
    border-radius: 5px; /* Optional: rounded corners for the image */
}
.hidden {
        display: none;
    }
    .hands-container {
        display: flex;
        gap: 30px;
        flex-wrap: wrap;
    }
    .hand-section {
        flex: 1;
        min-width: 300px;
    }
    .hand-content {
        display: flex;
        gap: 20px;
        align-items: flex-start;
    }
    .image-wrapper {
        position: relative;
        display: inline-block;
    }
    canvas {
        position: absolute;
        top: 0;
        left: 0;
    }
    .wound-details {
        flex: 1;
        min-width: 250px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fff;
        max-height: 500px;
        overflow-y: auto;
    }
    .wound-input-group {
        padding: 15px;
        border: 1px solid #eee;
        border-radius: 5px;
        margin-bottom: 15px;
    }
    .form-control {
        width: 100%;
    }
    .wound-type-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 15px;
    }
    .wound-type-label {
        font-size: 14px;
        display: flex;
        align-items: center;
    }
    .color-indicator {
        display: inline-block;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        margin-right: 5px;
    }
    .active-wound-type {
        background-color: #f0f0f0;
        border-left: 4px solid;
        padding: 10px;
        margin-bottom: 10px;
    }
    .no-wounds-message {
        font-style: italic;
        color: #666;
    }
    /* New styles for side-by-side fields */
    .fields-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }
    .field-group {
        flex: 1;
        min-width: 100px;
    }
    /* Surface selection container */
    .surface-selection-container {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 15px;
    }
    .surface-option {
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 10px;
        flex: 1;
        min-width: 200px;
    }
    .surface-option h5 {
        margin-top: 0;
        margin-bottom: 10px;
    } 
    .hidden {
        display: none;
    }
    .hands-container {
        display: flex;
        gap: 30px;
        flex-wrap: wrap;
    }
    .hand-section {
        flex: 1;
        min-width: 300px;
    }
    .hand-content {
        display: flex;
        gap: 20px;
        align-items: flex-start;
    }
    .image-wrapper {
        position: relative;
        display: inline-block;
    }
    canvas {
        position: absolute;
        top: 0;
        left: 0;
    }
    .wound-details {
        flex: 1;
        min-width: 250px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fff;
        max-height: 500px;
        overflow-y: auto;
    }
    .wound-input-group {
        padding: 15px;
        border: 1px solid #eee;
        border-radius: 5px;
        margin-bottom: 15px;
    }
    .form-control {
        width: 100%;
    }
    .wound-type-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 15px;
    }
    .wound-type-label {
        font-size: 14px;
        display: flex;
        align-items: center;
    }
    .color-indicator {
        display: inline-block;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        margin-right: 5px;
    }
    .active-wound-type {
        background-color: #f0f0f0;
        border-left: 4px solid;
        padding: 10px;
        margin-bottom: 10px;
    }
    .no-wounds-message {
        font-style: italic;
        color: #666;
    }
    /* New styles for side-by-side fields */
    .fields-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }
    .field-group {
        flex: 1;
        min-width: 100px;
    }
    /* Surface selection container */
    .surface-selection-container {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 15px;
    }
    .surface-option {
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 10px;
        flex: 1;
        min-width: 200px;
    }
    .surface-option h5 {
        margin-top: 0;
        margin-bottom: 10px;
    }
    .hidden {
        display: none;
    }
    .hands-container {
        display: flex;
        gap: 30px;
        flex-wrap: wrap;
    }
    .hand-section {
        flex: 1;
        min-width: 300px;
    }
    .hand-content {
        display: flex;
        gap: 20px;
        align-items: flex-start;
    }
    .image-wrapper {
        position: relative;
        display: inline-block;
    }
    canvas {
        position: absolute;
        top: 0;
        left: 0;
    }
    .wound-details {
        flex: 1;
        min-width: 250px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fff;
        max-height: 500px;
        overflow-y: auto;
    }
    .wound-input-group {
        padding: 15px;
        border: 1px solid #eee;
        border-radius: 5px;
        margin-bottom: 15px;
    }
    .form-control {
        width: 100%;
    }
    .wound-type-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 15px;
    }
    .wound-type-label {
        font-size: 14px;
        display: flex;
        align-items: center;
    }
    .color-indicator {
        display: inline-block;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        margin-right: 5px;
    }
    .active-wound-type {
        background-color: #f0f0f0;
        border-left: 4px solid;
        padding: 10px;
        margin-bottom: 10px;
    }
    .no-wounds-message {
        font-style: italic;
        color: #666;
    }
    /* New styles for side-by-side fields */
    .fields-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }
    .field-group {
        flex: 1;
        min-width: 100px;
    }
    /* Surface selection container */
    .surface-selection-container {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 15px;
    }
    .surface-option {
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 10px;
        flex: 1;
        min-width: 200px;
    }
    .surface-option h5 {
        margin-top: 0;
        margin-bottom: 10px;
    }
    </style>
    <style>
        .hidden { display: none; }
        .extensor-flexbox { display: flex; align-items: center; gap: 20px; justify-content: center; }
        .extensor-hand-box { text-align: center; min-width: 300px; }
        .extensor-hand-image { width: 250px; height: auto; border: 1px solid #ccc; border-radius: 5px; }
        .both-hands-container { display: flex; gap: 20px; justify-content: center; }
        .hand-selection { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
        label { font-weight: bold; }
        .extensor-checkbox-group, .extensor-radio-group { margin-top: 10px; }
    </style>
    <style>
        .hidden { display: none; }
            .flexor-flexbox { display: flex; align-items: center; gap: 20px; justify-content: center; }
            .flexor-hand-box { text-align: center; min-width: 300px; }
            .flexor-hand-image { width: 250px; height: auto; border: 1px solid #ccc; border-radius: 5px; }
            .both-hands-container { display: flex; gap: 20px; justify-content: center; }
            .hand-selection { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
            label { font-weight: bold; }
            .flexor-checkbox-group, .flexor-radio-group { margin-top: 10px; }
    </style>
    <style>
        .vasc_table {
            border-collapse: collapse;
            width: 80%;
            margin: 20px auto;
            border: 2px solid black;
        }
        .vasc_th, .vasc_td {
            border: 2px solid black;
            padding: 8px;
            text-align: center;
        }
        .vasc_th {
            background-color: #f2f2f2;
        }
        .vasc_center {
            text-align: center;
        }
        .vasc_selection-container {
            display: flex;
            justify-content: center;
            gap: 50px;
        }
    </style>
     <style>
        .symptoms {
    margin-top: 15px;
    padding: 15px;
    background-color: #ffffff;
    border-radius: 6px;
    display: none;
}
.symptoms-row {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
}
.symptom-item {
    white-space: nowrap;
}
     </style>
     <style>
       .forearm-measurement-section {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.forearm-hand-section-wrapper {
    display: flex;
    flex-direction: row;
    gap: 20px;
    margin-bottom: 20px;
}

.forearm-hand-container {
    position: relative;
    display: inline-block;
}

/* This is the new container that ensures alignment */
.image-canvas-container {
    position: relative;
    display: inline-block;
    width: fit-content;
    height: fit-content;
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: hidden;
}

.forearm-hand-image {
    display: none;
    max-width: 100%;
    height: auto;
}

.forearm-hand-canvas {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
    pointer-events: auto;
}

.forearm-upload-section {
    display: flex;
    flex-direction: column;
    min-width: 250px;
}

.forearm-uploaded-image {
    max-width: 100%;
    max-height: 300px;
    margin-top: 10px;
}

.forearm-measurement-panel {
    margin-bottom: 15px;
    padding: 15px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    background-color: #fff;
}

.forearm-wound-color-indicator {
    display: inline-block;
    width: 15px;
    height: 15px;
    margin-right: 5px;
    border-radius: 50%;
}

.forearm-measurement-fields-container {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 15px;
    margin: 10px 0;
    flex-wrap: wrap;
}

.forearm-measurement-field {
    display: flex;
    align-items: center;
    min-width: 200px;
    flex: 1;
}

.forearm-measurement-field label {
    width: 100px;
    margin-right: 10px;
}
     </style>
<style>
    .neurological-radio-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        margin-top: 10px;
    }
    .neurological-table {
        width: 60%;
        margin: 20px auto;
        border-collapse: collapse;
        border: 2px solid black;
    }
    .neurological-table th, .neurological-table td {
        border: 2px solid black;
        padding: 10px;
        text-align: center;
    }
    .neurological-table th {
        background-color: #f2f2f2;
    }
    .hidden {
        display: none;
    }
</style>
<style>
    .bone-form-hidden {
       display: none;
   }
   .bone-form-label {
       font-weight: bold;
       display: block;
       margin-bottom: 10px;
   }
   .bone-radio-container {
       margin-bottom: 15px;
   }
   .bone-radio-container input[type="radio"] {
       margin-right: 5px;
   }
   .bone-radio-container label {
       margin-right: 15px;
   }
   .bone-table {
       width: 100%;
       border-collapse: collapse;
       margin-bottom: 20px;
   }
   .bone-table th, .bone-table td {
       padding: 8px;
       text-align: left;
       border: 1px solid #ddd;
   }
   .bone-table th {
       background-color: #f2f2f2;
   }
   .bone-form-control {
       width: 100%;
       padding: 6px;
       box-sizing: border-box;
   }
   .bone-hand-selection {
       margin-top: 15px;
       margin-bottom: 15px;
   }
   .bone-images-container {
       display: flex;
       flex-wrap: wrap;
       justify-content: center;
       gap: 20px;
       margin-top: 20px;
   }
   .bone-hand-image {
       border: 1px solid #ccc;
       padding: 10px;
       text-align: center;
       position: relative;
   }
   .bone-canvas-container {
       position: relative;
       margin: 0 auto;
   }
   .bone-hand-base-image {
       border: 1px solid #eee;
       display: block;
   }
   .bone-drawing-canvas {
       position: absolute;
       top: 0;
       left: 0;
       cursor: crosshair;
   }
   .bone-drawing-tools {
       margin-top: 10px;
       display: flex;
       justify-content: center;
       gap: 10px;
   }
   .bone-color-picker {
       display: flex;
       gap: 5px;
       margin-bottom: 5px;
   }
   .bone-color-option {
       width: 20px;
       height: 20px;
       border-radius: 50%;
       cursor: pointer;
       border: 2px solid #ddd;
   }
   .bone-color-option.selected {
       border: 2px solid #333;
   }
   .bone-tool-button {
       padding: 5px 10px;
       background: #f0f0f0;
       border: 1px solid #ccc;
       border-radius: 3px;
       cursor: pointer;
   }
</style>
<style>
    /* Additional styles for the new image upload feature */
    .bone-flex-container {
        display: flex;
        gap: 20px;
        align-items: flex-start;
    }
    
    .bone-uploaded-image-container {
        min-width: 250px;
        margin-top: 10px;
    }
    
    .bone-upload-section {
        margin-bottom: 10px;
    }
    
    .bone-upload-label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }
    
    .bone-uploaded-preview {
        border: 1px dashed #ccc;
        padding: 5px;
        max-width: 250px;
        text-align: center;
        margin-top: 10px;
    }
    
    .bone-uploaded-image {
        max-width: 100%;
        height: auto;
        margin-bottom: 8px;
        border: 1px solid #eee;
    }
    
    .bone-remove-btn {
        margin-top: 5px;
        background-color: #f44336;
        color: white;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 3px;
    }
    
    .bone-remove-btn:hover {
        background-color: #d32f2f;
    }
    </style>
     <style>
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }
        th {
            font-size: 16px;
        }
        td {
            font-size: 14px;
        }
        .classification {
            width: 20%;
            font-size: 12px;
            font-weight: bold;
        }
        .large-column {
            width: 40%;
        }
        .hidden {
            display: none !important;
        }
        /* Modified container styling */
        #imageContainer {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            border: 1px dashed red; /* Adding border to see if container is visible */
            padding: 10px;
            min-height: 120px; /* Ensure container has height even if images don't load */
        }
        .fracture-image {
            width: 100px;
            height: 100px; /* Fixed height instead of auto */
            border: 2px solid black;
            border-radius: 5px;
            background-color: #f0f0f0; /* Background color to see if images are positioned correctly */
            object-fit: contain; /* Maintain aspect ratio */
        }
    </style>
     <style>
        textarea {
width: 100%;
height: 100px;
padding: 10px;
border: 1px solid #ccc;
border-radius: 5px;
resize: none;
}
</style>
    <style>
        .wound-container {
       max-width: 500px;
       margin: 20px auto;
       padding: 20px;
       border: 1px solid #ddd;
       border-radius: 8px;
   }
   #woundDescriptionLowerExtreme {
       width: 100%;
       margin-top: 10px;
       display: none;
   }
   .radio-group {
       display: flex;
       justify-content: center;
       gap: 20px;
       margin-bottom: 15px;
   }
   .hand-container-lower-extreme {
       display: flex;
       gap: 20px;
       justify-content: center;
       margin-top: 20px;
   }
   .hidden {
       display: none;
   }
   .hand-lower-extreme {
       width: 300px;
       cursor: pointer;
       position: relative;
   }
   .marker-lower-extreme {
       position: absolute;
       width: 15px;
       height: 15px;
       background-color: blue; /* Changed marker color for lower limbs */
       border-radius: 50%;
       transform: translate(-50%, -50%);
       cursor: pointer;
   }
   .hand-wrapper {
       position: relative;
   }
   .clear-markers {
       margin-top: 10px;
       text-align: center;
   }
   </style>
   <style>
    .container-spine {
        max-width: 500px;
        margin: 20px auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        text-align: center;
    }
    #descriptionBoxSpine {
        width: 100%;
        margin-top: 10px;
        display: none;
        height: 100px; /* Increased height for better usability */
        font-size: 16px; /* Larger text */
        padding: 10px;
    }
</style>
<style>
    .gcs-container {
font-family: Arial, sans-serif;
font-size: 16px;
font-weight: bold;
margin-top: 20px;
text-align: center;
}
select {
padding: 5px;
font-size: 16px;
width: 100px;
text-align: center;
}
</style>
<style>
    #videoContainer {
        display: flex;
        flex-wrap: nowrap;
        overflow-x: auto;
        gap: 10px;
    }
    video {
        max-width: 300px;
    }
</style>
<style>
    .container-abdomen {
        max-width: 500px;
        margin: 20px auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        text-align: center;
    }
    #descriptionBoxabdomen {
        width: 100%;
        margin-top: 10px;
        display: none;
        height: 100px; /* Increased height for better usability */
        font-size: 16px; /* Larger text */
        padding: 10px;
    }
</style>
   <style>
   .wound-container {
    max-width: 500px;
    margin: 20px auto;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
}
#woundDescriptionChest {
    width: 100%;
    margin-top: 10px;
    display: none;
}
.radio-group {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 15px;
}
.chest-container {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}
.hidden {
    display: none;
}
.chest-image {
    width: 350px;
    cursor: pointer;
    position: relative;
}
.marker-chest {
    position: absolute;
    width: 15px;
    height: 15px;
    background-color: red;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    cursor: pointer;
}
.chest-wrapper {
    position: relative;
}
.clear-markers {
    margin-top: 10px;
    text-align: center;
}
#clearMarkersBtnChest {
    display: block;
    margin: 10px auto;
}
</style>
<style>
    table {
    width: 100%;
    max-width: 800px; /* Optional: sets a maximum width */
    border-collapse: collapse;
    margin: 0 auto; /* This centers the table horizontally */
}
th, td {
    border: 1px solid black;
    padding: 10px;
    text-align: center;
}
th {
    background-color: #f4f4f4;
}

/* Optional container class if you need more control */
.table-container {
    display: flex;
    justify-content: center;
    width: 100%;
}
</style>
    <style>
        .hidden { display: none; }
            table { width: 50%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid black; padding: 10px; text-align: left; }
            th { background-color: lightgray; }
            .image-container { display: flex; gap: 20px; margin-top: 20px; justify-content: center; }
            .image-container img { width: 400px; height: 300px; border-radius: 10px; }
            .separator {
        width: 2px; /* Set width for a vertical line */
        background-color: black; /* Line color */
        height: 100%; /* Stretch it to full height */
        margin: 0 10px; /* Space between elements */
        display: inline-block; /* Ensures it stays inline */
    }
    </style>
    <style>
        .container2 {
            display: flex;
            justify-content: space-between;
            max-width: 600px;
            margin: auto;
        }
        .column {
            display: flex;
            flex-direction: column;
            gap: 10px;
        } 
    </style>
<style>
    .wound-container {
       max-width: 500px;
       margin: 20px auto;
       padding: 20px;
       border: 1px solid #ddd;
       border-radius: 8px;
   }
   #woundDescription {
       width: 100%;
       margin-top: 10px;
       display: none;
   }
   .radio-group {
       display: flex;
       justify-content: center;
       gap: 20px;
       margin-bottom: 15px;
   }
   .hand-container-extreme {
       display: flex;
       gap: 20px;
       justify-content: center;
       margin-top: 20px;
   }
   .hidden {
       display: none;
   }
   .hand-extreme {
       width: 300px;
       cursor: pointer;
       position: relative;
   }
   .marker {
       position: absolute;
       width: 15px;
       height: 15px;
       background-color: red;
       border-radius: 50%;
       transform: translate(-50%, -50%);
       cursor: pointer;
   }
   .hand-wrapper {
       position: relative;
   }
   .clear-markers {
       margin-top: 10px;
       text-align: center;
   }
</style>

     <body>

        <div class="container mt-4">
            <div class="d-flex justify-content-center align-items-center">
                <!-- Image on the left side of the heading -->
                <img src="manipallogo.png" alt="Department Logo" class="about-image" style="height: 80px;" />
                <!-- Heading text -->
                <h1 class="ms-3 text-center">Department of Hand Surgery, KMC</h1>
            </div>
        </div>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">Hand Surgery Dept.</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" id="browse"></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="add"></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-danger" href="#" id="logout">Logout</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    <div class="container" id="add_patient1">
     <h3>Acute Hand Injury Sheet( Part 1 )</h3>
     <div class="well">
         
         <form id="form1">
            <div class="container1">
            <div class="row">
                <!-- Patient Name -->
                <div class="col-md-4">
                    <label for="patientName" name="Patient Name" class="form-label fw-bold">Patient Name *</label>
                    <input type="text"  name="Patient Name" class="form-control" id="patientName" required>
                </div>
            
                <!-- Patient Age -->
                <div class="col-md-4">
                    <label for="PatientAge" name="Patient Age" class="form-label fw-bold">Patient Age *</label>
                    <input type="text" name="Patient Age" class="form-control" id="PatientAge" required>
                </div>
            
                <!-- Patient Sex (Radio Buttons) -->
                <div class="col-md-4">
                    <label class="form-label fw-bold">Patient Sex *</label>
                    <div class="d-flex justify-content-end pe-4">  
                        <div class="form-check me-3">
                            <input class="form-check-input" type="radio" name="Patient Sex" id="male1" value="Male" required>
                            <label class="form-check-label" for="male">Male</label>
                        </div>
                        <div class="form-check me-3">
                            <input class="form-check-input" type="radio" name="Patient Sex" id="female1" value="Female">
                            <label class="form-check-label" for="female">Female</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="Patient Sex" id="other1" value="Other">
                            <label class="form-check-label" for="other">Other</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Second Row: Hospital No & Occupation -->
            <div class="row mt-3 align-items-center">  
                <!-- Hospital No -->
                <div class="col-md-4">
                    <label for="HospitalNo" name="Hospital No" class="form-label fw-bold">Hospital No *</label>
                    <input type="text" name="Hospital No" class="form-control" name="Hospital No" id="HospitalNo" required>
                </div>
            
                <!-- Occupation -->
                <div class="col-md-4">
                    <label for="Occupation" name="Occupation" class="form-label fw-bold">Occupation *</label>
                    <input type="text" name="Occupation" class="form-control" id="occu" required>
                </div>
            
                <!-- MLC/Non-MLC (Radio Buttons) -->
                <div class="col-md-4">
                    <label class="form-label fw-bold">MLC / Non-MLC *</label>
                    <div class="d-flex justify-content-end pe-4">  
                        <div class="form-check me-3">
                            <input class="form-check-input" type="radio" name="mlc Status" id="mlc" value="MLC" required>
                            <label class="form-check-label" for="mlc">MLC</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="mlc Status" id="nonmlc" value="Non-MLC">
                            <label class="form-check-label" for="nonmlc">Non-MLC</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Third Row: Address, Hand Dominance, Affected Side -->
            <div class="row mt-3 align-items-center">  
                <!-- Address -->
                <div class="col-md-4">
                    <label for="add" class="form-label fw-bold">Address</label>
                    <input type="text" class="form-control" id="address">
                </div>
            
                <!-- Hand Dominance -->
                <div class="col-md-4">
                    <label class="form-label fw-bold">Hand Dominance *</label>
                    <div class="d-flex justify-content-end pe-4">  
                        <div class="form-check me-3">
                            <input class="form-check-input" type="radio" name="Hand Dominance" id="right1" value="right" required>
                            <label class="form-check-label" for="right">Right</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="Hand Dominance" id="left1" value="left">
                            <label class="form-check-label" for="left">Left</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="Hand Dominance" id="am1" value="ambid">
                            <label class="form-check-label" for="am">Ambidextrous</label>
                        </div>
                    </div>
                </div>
            
                <!-- Affected Side -->
                 <!-- Affected Side Selection -->
    <div class="col-md-4">
        <label class="form-label fw-bold">Affected Side *</label>
        <div class="d-flex pe-4">
            <div class="form-check me-3">
                <input class="form-check-input" type="radio" name="Affected Side" id="left2" value="left"  required>
                <label class="form-check-label" for="left">Left</label>
            </div>
            <div class="form-check me-3">
                <input class="form-check-input" type="radio" name="Affected Side" id="right2" value="right" >
                <label class="form-check-label" for="right">Right</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="Affected Side" id="both1" value="both" >
                <label class="form-check-label" for="both">Both</label>
            </div>
        </div>
            </div>
              
            <div class="row mb-3 align-items-center">
                <!-- Label -->
                <div class="col-md-4">
                    <label for="Dateofpresen" name="Date of presentation" class="form-label fw-bold">Date of Presentation to KH Emergency/OPD: *</label>
                </div>
                <!-- Input Field -->
                <div class="col-md-8">
                    <input type="date"  name="Date of presentation" class="form-control" id="dateofpresen" required>
                </div>
            </div>
            
            <div class="row mb-3 align-items-center">
                <!-- Label -->
                <div class="col-md-4">
                    <label for="Timeofarrival"  name="Time of arrival" class="form-label fw-bold">Time of Arrival to Trauma Center: *</label>
                </div>
                <!-- Input Field -->
                <div class="col-md-8">
                    <input type="time" name="Time of arrival" class="form-control" id="timearrival" required>
                </div>
            </div>
            <div class="container mt-3">
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <td class="col-md-4"><label for="mechanism" name="Mech of injury" class="form-label fw-bold">Mechanism of Injury: *</label></td>
                            <td class="col-md-8"><input type="text" class="form-control" id="mechanism" required></td>
                        </tr>
                        <tr>
                            <td class="col-md-4"><label for="timeInjury"  name="Time of injury" class="form-label fw-bold">Time of Injury: *</label></td>
                            <td class="col-md-8"><input type="time" class="form-control" id="timeInjury" required></td>
                        </tr>
                        <tr>
                            <td class="col-md-4"><label for="dateInjury" name="Date of injury" class="form-label fw-bold">Date of Injury: *</label></td>
                            <td class="col-md-8"><input type="date" class="form-control" id="dateInjury" required></td>
                        </tr>
                        <tr>
                            <td class="col-md-4"><label for="placeInjury" class="form-label fw-bold">Place of Injury: *</label></td>
                            <td class="col-md-8"><input type="text" class="form-control" id="placeInjury" required></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="row mb-3 align-items-center">
                <!-- Treatment for the same elsewhere -->
                <div class="col-md-8">
                    <label for="Treatment" class="form-label fw-bold">Treatment for the same elsewhere:</label>
                    <input type="text" class="form-control" id="treatment1">
                </div>
            
                <!-- Tetanus prophylaxis received (Radio Buttons) -->
                <div class="col-md-4">
                    <label class="form-label fw-bold">Tetanus prophylaxis received: *</label>
                    <div class="d-flex justify-content-end pe-4">
                        <div class="form-check me-3">
                            <input class="form-check-input"  type="radio" name="tetanus" id="tetanusNo" value="no" required>
                            <label class="form-check-label" name="tetanus" for="tetanusNo">No</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="tetanus" id="tetanusYes" value="yes">
                            <label class="form-check-label" name="tetanus" for="tetanusYes">Yes</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mb-3 align-items-center">
                <!-- Label -->
                <div class="col-md-4">
                    <label for="refer" class="form-label fw-bold">Referred from/by:</label>
                </div>
                <!-- Input Field -->
                <div class="col-md-8">
                    <input type="text" name="Referred from" class="form-control" id="refer1">
                </div>
            </div>
            
            <div class="row mb-3 align-items-center">
                <!-- Label -->
                <div class="col-md-4">
                    <label for="Brought by" class="form-label fw-bold">Brought by:</label>
                </div>
                <!-- Input Field -->
                <div class="col-md-8">
                    <input type="text" name="Brought by" class="form-control" id="brought1">
                </div>
            </div>

               <div class="mb-3 row align-items-center">
                 <div class="col-md-4">
                     <label for="identification" class="form-label fw-bold">Identification marks 1.</label>
                 </div>
                 <div class="col-md-8">
                     <input type="text" name="identification marks" class="form-control" id="iden1">
                 </div>
             </div>
             <div class="mb-3 row align-items-center">
                 <div class="col-md-4">
                     <label for="mlc" class="form-label">(if MLC ) 2.</label>
                 </div>
                 <div class="col-md-8">
                     <input type="text" name="Marks-mlc" class="form-control" id="mlcif" >
                 </div>
             </div>
             
             <div class="mb-3">
                <label class="form-label fw-bold">Comorbidities:</label>
                <div class="d-flex flex-wrap align-items-center">
                    <!-- NIL Checkbox -->
                    <div class="form-check me-3">
                        <input class="form-check-input" type="checkbox" id="nil1" onclick="toggleNil(this)">
                        <label class="form-check-label" for="nil1">NIL</label>
                    </div>
            
                    <!-- Other Comorbidities -->
                    <div id="otherComorbidities" class="d-flex flex-wrap">
                        <div class="form-check me-3">
                            <input class="form-check-input other-check" type="checkbox" id="dm">
                            <label class="form-check-label" for="dm">DM</label>
                        </div>
                        <div class="form-check me-3">
                            <input class="form-check-input other-check" type="checkbox" id="htn">
                            <label class="form-check-label" for="htn">HTN</label>
                        </div>
                        <div class="form-check me-3">
                            <input class="form-check-input other-check" type="checkbox" id="ihd">
                            <label class="form-check-label" for="ihd">IHD</label>
                        </div>
                        <div class="form-check me-3">
                            <input class="form-check-input other-check" type="checkbox" id="cva">
                            <label class="form-check-label" for="cva">CVA</label>
                        </div>
                        <div class="form-check me-3">
                            <input class="form-check-input other-check" type="checkbox" id="hypothyroid">
                            <label class="form-check-label" for="hypothyroid">Hypothyroid</label>
                        </div>
                        <div class="form-check me-3">
                            <input class="form-check-input other-check" type="checkbox" id="asthma">
                            <label class="form-check-label" for="asthma">Asthma</label>
                        </div>
                        <div class="form-check me-3">
                            <input class="form-check-input other-check" type="checkbox" id="tb">
                            <label class="form-check-label" for="tb">TB</label>
                        </div>
            
                        <!-- Other Checkbox & Textbox -->
                        <div class="form-check me-3 d-flex align-items-center">
                            <input class="form-check-input other-check" type="checkbox" id="others" onclick="toggleOtherTextBox()">
                            <label class="form-check-label me-2" for="others">Other not mentioned above</label>
                            <input type="text" class="form-control ms-2" id="otherTextBox" placeholder="Specify here" style="display: none; width: 200px;">
                        </div>
                    </div>
                </div>
            </div>
            
            <script>
                function toggleNil(nilCheckbox) {
                    let otherCheckboxes = document.querySelectorAll(".other-check");
                    let otherTextBox = document.getElementById("otherTextBox");
            
                    if (nilCheckbox.checked) {
                        // Disable and uncheck all other checkboxes
                        otherCheckboxes.forEach(checkbox => {
                            checkbox.checked = false;
                            checkbox.disabled = true;
                        });
                        otherTextBox.style.display = "none"; // Hide text box if open
                        otherTextBox.value = ""; // Clear input field
                    } else {
                        // Enable all checkboxes when "NIL" is unchecked
                        otherCheckboxes.forEach(checkbox => {
                            checkbox.disabled = false;
                        });
                    }
                }
            
                function toggleOtherTextBox() {
                    let otherCheckbox = document.getElementById("others");
                    let otherTextBox = document.getElementById("otherTextBox");
            
                    if (otherCheckbox.checked) {
                        otherTextBox.style.display = "inline-block"; // Show text box
                    } else {
                        otherTextBox.style.display = "none"; // Hide text box
                        otherTextBox.value = ""; // Clear input field
                    }
                }
            </script>
            
            <div class="container">
                <!-- History of Substance Abuse -->
                <div class="mb-4">
                    <label class="form-label fw-bold">History of Substance Abuse:</label>
                    <div class="d-flex flex-wrap align-items-center">
                        <!-- NIL Checkbox -->
                        <div class="form-check me-3">
                            <input class="form-check-input" type="checkbox" id="substanceNil" onclick="toggleSubstanceNil(this)">
                            <label class="form-check-label" for="substanceNil">NIL</label>
                        </div>
            
                        <!-- Other Substance Abuse Options -->
                        <div id="substanceOptions" class="d-flex flex-wrap">
                            <div class="form-check me-3">
                                <input class="form-check-input substance-check" type="checkbox" id="smoking">
                                <label class="form-check-label" for="smoking">Smoking</label>
                            </div>
                            <div class="form-check me-3">
                                <input class="form-check-input substance-check" type="checkbox" id="alcohol">
                                <label class="form-check-label" for="alcohol">Alcohol</label>
                            </div>
                            <div class="form-check me-3">
                                <input class="form-check-input substance-check" type="checkbox" id="tobacco">
                                <label class="form-check-label" for="tobacco">Tobacco and its products</label>
                            </div>
                            <div class="form-check me-3">
                                <input class="form-check-input substance-check" type="checkbox" id="areca">
                                <label class="form-check-label" for="areca">Areca Nut</label>
                            </div>
            
                            <!-- Other Checkbox & Textbox -->
                            <div class="form-check me-3 d-flex align-items-center">
                                <input class="form-check-input substance-check" type="checkbox" id="substanceOther1" onclick="toggleSubstanceTextBox()">
                                <label class="form-check-label me-2" for="substanceOther">Other</label>
                                <input type="text" class="form-control ms-2" id="substanceTextBox" placeholder="Specify here" style="display: none; width: 200px;">
                            </div>
                        </div>
                    </div>
                </div>
            
                <!-- E/o Substance Abuse at Presentation -->
<div class="mb-4 d-flex align-items-center">
    <label class="form-label fw-bold me-3">E/o substance abuse at presentation/incident: *</label>
    
    <div class="form-check me-3">
        <input class="form-check-input" type="radio" name="eoSubstanceAbuse" id="eoYes" value="yes" onclick="toggleSubstanceTextBoxx()" required>
        <label class="form-check-label" for="eoYes">Yes</label>
    </div>
    
    <div id="substanceTextBoxContainer" class="ms-3" style="display: none;">
        <input type="text" class="form-control" id="substanceDetails" placeholder="Specify here" style="width: 200px;">
    </div>

    <div class="form-check ms-3">
        <input class="form-check-input" type="radio" name="eoSubstanceAbuse" id="eoNo" value="no" onclick="toggleSubstanceTextBoxx()" checked>
        <label class="form-check-label" for="eoNo">No</label>
    </div>
</div>

<script>
    function toggleSubstanceTextBoxx() {
        const yesOption = document.getElementById("eoYes");
        const textBoxContainer = document.getElementById("substanceTextBoxContainer");

        if (yesOption.checked) {
            textBoxContainer.style.display = "block";
        } else {
            textBoxContainer.style.display = "none";
            document.getElementById("substanceDetails").value = ""; // Clear input when hidden
        }
    }
</script>

            <script>
                function toggleSubstanceNil(nilCheckbox) {
                    let substanceCheckboxes = document.querySelectorAll(".substance-check");
                    let substanceTextBox = document.getElementById("substanceTextBox");
            
                    if (nilCheckbox.checked) {
                        // Disable and uncheck all other checkboxes
                        substanceCheckboxes.forEach(checkbox => {
                            checkbox.checked = false;
                            checkbox.disabled = true;
                        });
                        substanceTextBox.style.display = "none"; // Hide text box if open
                        substanceTextBox.value = ""; // Clear input field
                    } else {
                        // Enable all checkboxes when "NIL" is unchecked
                        substanceCheckboxes.forEach(checkbox => {
                            checkbox.disabled = false;
                        });
                    }
                }
            
                function toggleSubstanceTextBox() {
                    let otherCheckbox = document.getElementById("substanceOther");
                    let substanceTextBox = document.getElementById("substanceTextBox");
            
                    if (otherCheckbox.checked) {
                        substanceTextBox.style.display = "inline-block"; // Show text box
                    } else {
                        substanceTextBox.style.display = "none"; // Hide text box
                        substanceTextBox.value = ""; // Clear input field
                    }
                }
            </script></div>
            <hr style="border-top: 2px dotted black; width: 100%;">

            <div class="container mt-3 text-center">
                <!-- Side selection -->
                <div class="mb-3">
                  <label class="form-label fw-bold">Deformity Section:</label>
                  <div class="d-flex justify-content-center">
                    <div class="form-check me-3">
                      <input class="form-check-input" type="radio" name="deformity" id="leftSide" value="left" onchange="toggleSideTables()">
                      <label class="form-check-label" for="leftSide">Left</label>
                    </div>
                    <div class="form-check me-3">
                      <input class="form-check-input" type="radio" name="deformity" id="rightSide" value="right" onchange="toggleSideTables()">
                      <label class="form-check-label" for="rightSide">Right</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="deformity" id="bothSides" value="both" onchange="toggleSideTables()">
                      <label class="form-check-label" for="bothSides">Both</label>
                    </div>
                  </div>
                </div>
              </div>
              
            
                <!-- Tables Container -->
                <div class="row" id="tablesContainer">
                  <!-- Left Hand Deformities Table - Initially Hidden -->
                  <div id="leftHandTable" class="col-12 col-md-6 mb-4" style="display: none;">
                    <h5>Left Hand Deformities</h5>
                    <table class="table table-bordered">
                      <tbody>
                        <tr>
                          <td>None</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-none" onchange="handleNoneSelection('left')">
                          </td>
                        </tr>
                        <tr>
                          <td>Mallet</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-mallet">
                          </td>
                        </tr>
                        <tr>
                          <td>Flail limb</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-flail-limb">
                          </td>
                        </tr>
                        <tr>
                          <td>Finger drop</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-finger-drop">
                          </td>
                        </tr>
                        <tr>
                          <td>Thumb drop</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-thumb-drop">
                          </td>
                        </tr>
                        <tr>
                          <td>Wrist drop</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-wrist-drop">
                          </td>
                        </tr>
                        <tr>
                          <td>Claw hand</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-claw-hand">
                          </td>
                        </tr>
                        <tr>
                          <td>Pointing index</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-pointing-index">
                          </td>
                        </tr>
                        <tr>
                          <td>Ape-thumb</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-ape-thumb">
                          </td>
                        </tr>
                        <tr>
                          <td>Boutonniere</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-boutonniere">
                          </td>
                        </tr>
                        <tr>
                          <td>Swan-neck</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-swan-neck">
                          </td>
                        </tr>
                        <tr>
                          <td>Loss of finger cascade</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-loss-of-finger-cascade">
                          </td>
                        </tr>
                        <tr>
                          <td>Other</td>
                          <td class="text-center">
                            <input class="form-check-input left-deformity" type="checkbox" id="left-other" onchange="toggleOtherTextbox('left')">
                          </td>
                        </tr>
                        <tr id="left-other-row" style="display: none;">
                          <td colspan="2">
                            <input type="text" class="form-control" id="left-other-text" placeholder="Specify other deformity">
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
            
                  <!-- Right Hand Deformities Table - Initially Hidden -->
                  <div id="rightHandTable" class="col-12 col-md-6 mb-4" style="display: none;">
                    <h5>Right Hand Deformities</h5>
                    <table class="table table-bordered">
                      <tbody>
                        <tr>
                          <td>None</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-none" onchange="handleNoneSelection('right')">
                          </td>
                        </tr>
                        <tr>
                          <td>Mallet</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-mallet">
                          </td>
                        </tr>
                        <tr>
                          <td>Flail limb</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-flail-limb">
                          </td>
                        </tr>
                        <tr>
                          <td>Finger drop</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-finger-drop">
                          </td>
                        </tr>
                        <tr>
                          <td>Thumb drop</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-thumb-drop">
                          </td>
                        </tr>
                        <tr>
                          <td>Wrist drop</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-wrist-drop">
                          </td>
                        </tr>
                        <tr>
                          <td>Claw hand</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-claw-hand">
                          </td>
                        </tr>
                        <tr>
                          <td>Pointing index</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-pointing-index">
                          </td>
                        </tr>
                        <tr>
                          <td>Ape-thumb</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-ape-thumb">
                          </td>
                        </tr>
                        <tr>
                          <td>Boutonniere</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-boutonniere">
                          </td>
                        </tr>
                        <tr>
                          <td>Swan-neck</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-swan-neck">
                          </td>
                        </tr>
                        <tr>
                          <td>Loss of finger cascade</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-loss-of-finger-cascade">
                          </td>
                        </tr>
                        <tr>
                          <td>Other</td>
                          <td class="text-center">
                            <input class="form-check-input right-deformity" type="checkbox" id="right-other" onchange="toggleOtherTextbox('right')">
                          </td>
                        </tr>
                        <tr id="right-other-row" style="display: none;">
                          <td colspan="2">
                            <input type="text" class="form-control" id="right-other-text" placeholder="Specify other deformity">
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            
              <script>
                function toggleSideTables() {
                  const selectedSide = document.querySelector('input[name="deformity"]:checked').value;
                  const leftTable = document.getElementById("leftHandTable");
                  const rightTable = document.getElementById("rightHandTable");
                  
                  if (selectedSide === "left") {
                    leftTable.style.display = "block";
                    leftTable.className = "col-12 mb-4";
                    rightTable.style.display = "none";
                  } else if (selectedSide === "right") {
                    leftTable.style.display = "none";
                    rightTable.style.display = "block";
                    rightTable.className = "col-12 mb-4";
                  } else if (selectedSide === "both") {
                    leftTable.style.display = "block";
                    leftTable.className = "col-12 col-md-6 mb-4";
                    rightTable.style.display = "block";
                    rightTable.className = "col-12 col-md-6 mb-4";
                  }
                }
            
                function handleNoneSelection(side) {
                  const noneCheckbox = document.getElementById(`${side}-none`);
                  const checkboxes = document.querySelectorAll(`.${side}-deformity`);
                  
                  if (noneCheckbox.checked) {
                    // Disable all other checkboxes for this side
                    checkboxes.forEach(checkbox => {
                      if (checkbox.id !== `${side}-none`) {
                        checkbox.checked = false;
                        checkbox.disabled = true;
                      }
                    });
                    
                    // Hide "Other" text box if visible
                    document.getElementById(`${side}-other-row`).style.display = "none";
                  } else {
                    // Enable all checkboxes for this side
                    checkboxes.forEach(checkbox => {
                      checkbox.disabled = false;
                    });
                  }
                }
            
                function toggleOtherTextbox(side) {
                  const otherCheckbox = document.getElementById(`${side}-other`);
                  const otherRow = document.getElementById(`${side}-other-row`);
                  
                  if (otherCheckbox.checked) {
                    otherRow.style.display = "table-row";
                  } else {
                    otherRow.style.display = "none";
                    document.getElementById(`${side}-other-text`).value = "";
                  }
                }
              </script>
            <hr style="border-top: 2px dotted black; width: 100%;">

            <div class="container mt-3">
                <!-- Finger Amputation Selection -->
                <div class="container text-center mt-3">
                    <label class="form-label fw-bold">Finger tip injury/amputation: *</label>
                    
                    <div class="d-flex justify-content-center align-items-center mt-2">
                      <div class="form-check me-3">
                        <input class="form-check-input" type="radio" name="finger_amputation" id="amputation_present" value="present" onclick="updateAmputationSection()" required>
                        <label class="form-check-label" for="amputation_present">Present</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="finger_amputation" id="amputation_absent" value="absent" onclick="updateAmputationSection()">
                        <label class="form-check-label" for="amputation_absent">Absent</label>
                      </div>
                    </div>
                  </div>
                  
                <hr style="border-top: 2px dotted black; width: 100%;">
                
            <!-- Amputation Table -->
            <div id="amputationTable" class="d-none mt-4">
                <div style="display: flex; justify-content: center; align-items: center;">
                    <img src="https://res.cloudinary.com/dreh6wst7/image/upload/databaseimages/vz0o1zehxgggds1vn5l8.png" alt="selection" style="width: 500px; height: 250px;">
                </div>
                <table class="table table-bordered text-center" style="max-width: 900px; margin: 20px auto;">
                    <thead>
                        <tr>
                            <th colspan="4" class="left-col">LEFT</th>
                            <th colspan="4" class="right-col">RIGHT</th>
                        </tr>
                        <tr>
                            <th class="left-col">Digit</th>
                            <th class="left-col">Tamai</th>
                            <th class="left-col">Allen</th>
                            <th class="left-col">PNB</th>
                            <th class="right-col">Digit</th>
                            <th class="right-col">Tamai</th>
                            <th class="right-col">Allen</th>
                            <th class="right-col">PNB</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Example row for Thumb -->
                        <tr>
                            <!-- LEFT thumb -->
                            <td class="left-col">Thumb</td>
                            <td class="left-col"><select id="left-thumb-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="left-col"><select id="left-thumb-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="left-col"><input id="left-thumb-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
            
                            <!-- RIGHT thumb -->
                            <td class="right-col">Thumb</td>
                            <td class="right-col"><select id="right-thumb-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="right-col"><select id="right-thumb-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="right-col"><input id="right-thumb-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
                        </tr>
                        <tr>
                            <!-- LEFT index -->
                            <td class="left-col">Index</td>
                            <td class="left-col"><select id="left-index-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="left-col"><select id="left-index-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="left-col"><input id="left-index-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
            
                            <!-- RIGHT index -->
                            <td class="right-col">Index</td>
                            <td class="right-col"><select id="right-index-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="right-col"><select id="right-index-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="right-col"><input id="right-index-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
                        </tr>
                        <tr>
                            <!-- LEFT middle -->
                            <td class="left-col">Middle</td>
                            <td class="left-col"><select id="left-middle-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="left-col"><select id="left-middle-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="left-col"><input id="left-middle-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
            
                            <!-- RIGHT middle -->
                            <td class="right-col">Middle</td>
                            <td class="right-col"><select id="right-middle-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="right-col"><select id="right-middle-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="right-col"><input id="right-middle-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
                        </tr>
                        <tr>
                            <!-- LEFT ring -->
                            <td class="left-col">Ring</td>
                            <td class="left-col"><select id="left-ring-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="left-col"><select id="left-ring-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="left-col"><input id="left-ring-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
            
                            <!-- RIGHT thumb -->
                            <td class="right-col">Ring</td>
                            <td class="right-col"><select id="right-ring-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="right-col"><select id="right-ring-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="right-col"><input id="right-ring-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
                        </tr>
                        <tr>
                            <!-- LEFT little -->
                            <td class="left-col">Little</td>
                            <td class="left-col"><select id="left-little-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="left-col"><select id="left-little-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="left-col"><input id="left-little-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
            
                            <!-- RIGHT little -->
                            <td class="right-col">Thumb</td>
                            <td class="right-col"><select id="right-little-tamai" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                            </select></td>
                            <td class="right-col"><select id="right-little-allen" class="form-control">
                                <option value="">Select</option>
                                <option value="Zone1">Zone 1</option>
                                <option value="Zone2">Zone 2</option>
                                <option value="Zone3">Zone 3</option>
                                <option value="Zone4">Zone 4</option>
                            </select></td>
                            <td class="right-col"><input id="right-little-pnb" type="text" class="form-control pnb-input" placeholder="e.g. 1-2-3"></td>
                        </tr>
                        
                    </tbody>
                </table>
            </div>
            
            <script>
                
function updateAmputationSection() {
    const status = document.querySelector('input[name="finger_amputation"]:checked')?.value;
    const side = document.querySelector('input[name="Affected Side"]:checked')?.value;

    const table = document.getElementById("amputationTable");
    const leftCols = document.querySelectorAll(".left-col");
    const rightCols = document.querySelectorAll(".right-col");

    if (status !== "present") {
        table.classList.add("d-none");
        return;
    }

    table.classList.remove("d-none");

    if (side === "left") {
        leftCols.forEach(el => el.style.display = "table-cell");
        rightCols.forEach(el => el.style.display = "none");
    } else if (side === "right") {
        leftCols.forEach(el => el.style.display = "none");
        rightCols.forEach(el => el.style.display = "table-cell");
    } else {
        leftCols.forEach(el => el.style.display = "table-cell");
        rightCols.forEach(el => el.style.display = "table-cell");
    }
}

// Optional: basic validation for PNB input
document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".pnb-input").forEach(input => {
        input.addEventListener("input", () => {
            input.value = input.value.replace(/[^\d\-]/g, "").replace(/^-+|-+$/g, "").replace(/--+/g, "-");
        });
    });
});


</script>

<hr style="border-top: 2px dotted black; width: 100%;">

<div class="mb-3">
    <label for="mark2" class="form-label fw-bold">
        Describe the wounds by SIZE, TYPE, and EXPOSED STRUCTURES and mark the same on the image: *
    </label>
</div>
<style>
    .first_structure_container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }
    .first_structure_hand_container {
        flex: 1;
        min-width: 300px;
        border: 1px solid #ddd;
        padding: 20px;
        border-radius: 8px;
        background-color: #f9f9f9;
    }
    
    .first_structure_wound_details_section {
    width: calc(25% - 20px); /* 4 per row, with some spacing */
    margin: 10px;
    display: inline-block;
    vertical-align: top;
}

.first_structure_wound_details_section textarea {
    width: 100%;
    resize: vertical;
    font-size: 14px;
    padding: 5px;
}

    .first_structure_hidden {
        display: none;
    }
    h2 {
        margin-top: 0;
        color: #333;
    }
    .first_structure_image_upload {
        margin: 15px 0;
    }
    label {
        font-weight: bold;
    }
    
    /* New styles for image preview */
    .image-preview-container {
        margin-top: 10px;
        max-width: 300px;
        border: 1px dashed #ccc;
        padding: 5px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-left: auto;
        margin-right: auto;
    }
    .image-preview {
        max-width: 100%;
        max-height: 200px;
        display: none;
        margin-left: auto;
        margin-right: auto;
    }
    </style>
    <div>
        <label>
            <input type="radio" name="first_structure_hand" value="left" id="initialhandleft" onclick="first_structure_toggleHandSection()" required> Left Hand
        </label>
        <label>
            <input type="radio" name="first_structure_hand" value="right" id="initialhandright" onclick="first_structure_toggleHandSection()"> Right Hand
        </label>
        <label>
            <input type="radio" name="first_structure_hand" value="both"  id="inotialhandboth" onclick="first_structure_toggleHandSection()"> Both Hands
        </label>
    </div>
    
    <div class="first_structure_container">
        <div id="first_structure_leftHandContainer" class="first_structure_hand_container first_structure_hidden">
            <h2>Left Hand</h2>
            <div class="first_structure_image_upload">
                <label for="first_structure_leftHandImage">Upload Image:</label>
                <input type="file" id="first_structure_leftHandImage" accept="image/*" multiple onchange="previewImage('first_structure_leftHandImage', 'leftHandPreview')">
                <div class="image-preview-container">
                    <img id="leftHandPreview" class="image-preview" alt="Left hand image preview">
                    <p id="leftHandPreviewText">Image preview will appear here</p>
                </div>
            </div>
            
            <p><strong>Wound Types:</strong></p>
            <div id="first_structure_left_laceration_details" class="first_structure_wound_details_section">
                <label for="left_laceration_details">Laceration:</label>
                <textarea id="left_laceration_details" rows="2" cols="50" placeholder="Describe laceration..."></textarea>
            </div>
        
            <div id="first_structure_left_contusion_details" class="first_structure_wound_details_section">
                <label for="left_contusion_details">Contusion:</label>
                <textarea id="left_contusion_details" rows="2" cols="50" placeholder="Describe contusion..."></textarea>
            </div>
        
            <div id="first_structure_left_avulsion_details" class="first_structure_wound_details_section">
                <label for="left_avulsion_details">Avulsion:</label>
                <textarea id="left_avulsion_details" rows="2" cols="50" placeholder="Describe avulsion..."></textarea>
            </div>
        
            <div id="first_structure_left_incised_details" class="first_structure_wound_details_section">
                <label for="left_incised_details">Incised:</label>
                <textarea id="left_incised_details" rows="2" cols="50" placeholder="Describe incised wound..."></textarea>
            </div>
        
            <div id="first_structure_left_abrasion_details" class="first_structure_wound_details_section">
                <label for="left_abrasion_details">Abrasion:</label>
                <textarea id="left_abrasion_details" rows="2" cols="50" placeholder="Describe abrasion..."></textarea>
            </div>
        
            <div id="first_structure_left_penetration_details" class="first_structure_wound_details_section">
                <label for="left_penetration_details">Penetration:</label>
                <textarea id="left_penetration_details" rows="2" cols="50" placeholder="Describe penetration..."></textarea>
            </div>
        
            <div id="first_structure_left_degloving_details" class="first_structure_wound_details_section">
                <label for="left_degloving_details">Degloving:</label>
                <textarea id="left_degloving_details" rows="2" cols="50" placeholder="Describe degloving..."></textarea>
            </div>
        
            <div id="first_structure_left_crush_details" class="first_structure_wound_details_section">
                <label for="left_crush_details">Crush:</label>
                <textarea id="left_crush_details" rows="2" cols="50" placeholder="Describe crush injury..."></textarea>
            </div>
        </div>
        
        <div id="first_structure_rightHandContainer" class="first_structure_hand_container first_structure_hidden">
            <h2>Right Hand</h2>
            <div class="first_structure_image_upload">
                <label for="first_structure_rightHandImage">Upload Image:</label>
                <input type="file" id="first_structure_rightHandImage" accept="image/*"  multiple onchange="previewImage('first_structure_rightHandImage', 'rightHandPreview')">
                <div class="image-preview-container">
                    <img id="rightHandPreview" class="image-preview" alt="Right hand image preview">
                    <p id="rightHandPreviewText">Image preview will appear here</p>
                </div>
            </div>
            
            <p><strong>Wound Types:</strong></p>
            <div id="first_structure_right_laceration_details" class="first_structure_wound_details_section">
                <label for="right_laceration_details">Laceration:</label>
                <textarea id="right_laceration_details" rows="2" cols="50" placeholder="Describe laceration..."></textarea>
            </div>
        
            <div id="first_structure_right_contusion_details" class="first_structure_wound_details_section">
                <label for="right_contusion_details">Contusion:</label>
                <textarea id="right_contusion_details" rows="2" cols="50" placeholder="Describe contusion..."></textarea>
            </div>
        
            <div id="first_structure_right_avulsion_details" class="first_structure_wound_details_section">
                <label for="right_avulsion_details">Avulsion:</label>
                <textarea id="right_avulsion_details" rows="2" cols="50" placeholder="Describe avulsion..."></textarea>
            </div>
        
            <div id="first_structure_right_incised_details" class="first_structure_wound_details_section">
                <label for="right_incised_details">Incised:</label>
                <textarea id="right_incised_details" rows="2" cols="50" placeholder="Describe incised wound..."></textarea>
            </div>
        
            <div id="first_structure_right_abrasion_details" class="first_structure_wound_details_section">
                <label for="right_abrasion_details">Abrasion:</label>
                <textarea id="right_abrasion_details" rows="2" cols="50" placeholder="Describe abrasion..."></textarea>
            </div>
        
            <div id="first_structure_right_penetration_details" class="first_structure_wound_details_section">
                <label for="right_penetration_details">Penetration:</label>
                <textarea id="right_penetration_details" rows="2" cols="50" placeholder="Describe penetration..."></textarea>
            </div>
        
            <div id="first_structure_right_degloving_details" class="first_structure_wound_details_section">
                <label for="right_degloving_details">Degloving:</label>
                <textarea id="right_degloving_details" rows="2" cols="50" placeholder="Describe degloving..."></textarea>
            </div>
        
            <div id="first_structure_right_crush_details" class="first_structure_wound_details_section">
                <label for="right_crush_details">Crush:</label>
                <textarea id="right_crush_details" rows="2" cols="50" placeholder="Describe crush injury..."></textarea>
            </div>
           
        </div>
    </div>
    <script>
        // Show/hide hand sections based on selection
        function first_structure_toggleHandSection() {
            const first_structure_selectedHand = document.querySelector('input[name="first_structure_hand"]:checked').value;
            const first_structure_leftContainer = document.getElementById('first_structure_leftHandContainer');
            const first_structure_rightContainer = document.getElementById('first_structure_rightHandContainer');
            
            first_structure_leftContainer.classList.add('first_structure_hidden');
            first_structure_rightContainer.classList.add('first_structure_hidden');
            
            if (first_structure_selectedHand === 'left') {
                first_structure_leftContainer.classList.remove('first_structure_hidden');
                
            } else if (first_structure_selectedHand === 'right') {
                first_structure_rightContainer.classList.remove('first_structure_hidden');
                
            } else if (first_structure_selectedHand === 'both') {
                first_structure_leftContainer.classList.remove('first_structure_hidden');
                first_structure_rightContainer.classList.remove('first_structure_hidden');
            }
        }
        
        
        // Preview image function  
        function previewImage(inputId, previewId) {  
            const fileInput = document.getElementById(inputId);  
            const previewImg = document.getElementById(previewId);  
            const previewText = previewImg.nextElementSibling;  
        
            if (fileInput.files && fileInput.files[0]) {  
                const reader = new FileReader();  
        
                reader.onload = function(e) {  
                    previewImg.src = e.target.result;  
                    previewImg.style.display = 'block';  
                    previewText.style.display = 'none';  
                };  
        
                reader.readAsDataURL(fileInput.files[0]);  
            } else {  
                previewImg.src = '';  
                previewImg.style.display = 'none';  
                previewText.style.display = 'block';  
            }  
        }
    </script>
<hr style="border-top: 2px dotted black; width: 100%;">

<style>
    .second_structure_container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }
    .second_structure_forearm_container {
        flex: 1;
        min-width: 300px;
        border: 1px solid #ddd;
        padding: 20px;
        border-radius: 8px;
        background-color: #f9f9f9;
    }
    
    .second_structure_hidden {
        display: none;
    }
    h2 {
        margin-top: 0;
        color: #333;
    }
    .second_structure_image_upload {
        margin: 15px 0;
    }
    label {
        font-weight: bold;
    }
    /* Styles for image preview */
    .image-preview-container {
        margin-top: 10px;
        max-width: 300px;
        border: 1px dashed #ccc;
        padding: 5px;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .image-preview {
        max-width: 100%;
        max-height: 200px;
        display: none;
        margin-left: auto;
        margin-right: auto;
    }
    /* Style for initial injury question */
    
    .forearm-selection-container {
        margin-top: 15px;
    }
    </style>
    
    <!-- Initial injury question -->
    <div class="injury-question-container">
        <p><strong>Is there an injury to the forearm? *</strong></p>
        <label>
            <input type="radio" name="forearm_injury_present" value="yes" id="forearmyes1" onclick="toggleForearmSelectionVisibility('yes')" required> Yes
        </label>
        <label>
            <input type="radio" name="forearm_injury_present" value="no" id="forearmno1" onclick="toggleForearmSelectionVisibility('no')"> No
        </label>
    </div>
    
    <!-- Forearm selection (initially hidden) -->
    <div id="forearm_selection_section" class="forearm-selection-container second_structure_hidden">
        <p><strong>Select affected forearm:</strong></p>
        <label>
            <input type="radio" name="second_structure_forearm" value="left" onclick="second_structure_toggleForearmSection()"> Left Forearm
        </label>
        <label>
            <input type="radio" name="second_structure_forearm" value="right" onclick="second_structure_toggleForearmSection()"> Right Forearm
        </label>
        <label>
            <input type="radio" name="second_structure_forearm" value="both" onclick="second_structure_toggleForearmSection()"> Both Forearms
        </label>
    </div>
    
    <div class="second_structure_container">
        <div id="second_structure_leftForearmContainer" class="second_structure_forearm_container second_structure_hidden">
            <h2>Left Forearm</h2>
            <div class="second_structure_image_upload">
                <label for="second_structure_leftForearmImage">Upload Image:</label>
                <input type="file" id="second_structure_leftForearmImage" accept="image/*" onchange="second_structure_previewImage('second_structure_leftForearmImage', 'leftForearmPreview')">
                <div class="image-preview-container">
                    <img id="leftForearmPreview" class="image-preview" alt="Left forearm image preview">
                    <p id="leftForearmPreviewText">Image preview will appear here</p>
                </div>
            </div>
            
            <p><strong>Select Wound Types:</strong></p>
            <div id="second_structure_left_laceration_details" class="first_structure_wound_details_section">
                <label for="left_laceration_details">Laceration:</label>
                <textarea id="left_laceration_details1" rows="2" cols="50" placeholder="Describe laceration..."></textarea>
            </div>
        
            <div id="second_structure_left_contusion_details" class="first_structure_wound_details_section">
                <label for="left_contusion_details">Contusion:</label>
                <textarea id="left_contusion_details1" rows="2" cols="50" placeholder="Describe contusion..."></textarea>
            </div>
        
            <div id="second_structure_left_avulsion_details" class="first_structure_wound_details_section">
                <label for="left_avulsion_details">Avulsion:</label>
                <textarea id="left_avulsion_details1" rows="2" cols="50" placeholder="Describe avulsion..."></textarea>
            </div>
        
            <div id="second_structure_left_incised_details" class="first_structure_wound_details_section">
                <label for="left_incised_details">Incised:</label>
                <textarea id="left_incised_details1" rows="2" cols="50" placeholder="Describe incised wound..."></textarea>
            </div>
        
            <div id="second_structure_left_abrasion_details" class="first_structure_wound_details_section">
                <label for="left_abrasion_details">Abrasion:</label>
                <textarea id="left_abrasion_details1" rows="2" cols="50" placeholder="Describe abrasion..."></textarea>
            </div>
        
            <div id="second_structure_left_penetration_details" class="first_structure_wound_details_section">
                <label for="left_penetration_details">Penetration:</label>
                <textarea id="left_penetration_details1" rows="2" cols="50" placeholder="Describe penetration..."></textarea>
            </div>
        
            <div id="second_structure_left_degloving_details" class="first_structure_wound_details_section">
                <label for="left_degloving_details">Degloving:</label>
                <textarea id="left_degloving_details1" rows="2" cols="50" placeholder="Describe degloving..."></textarea>
            </div>
        
            <div id="second_structure_left_crush_details" class="first_structure_wound_details_section">
                <label for="left_crush_details">Crush:</label>
                <textarea id="left_crush_details1" rows="2" cols="50" placeholder="Describe crush injury..."></textarea>
            </div>
        </div>
            
            

        
        <div id="second_structure_rightForearmContainer" class="second_structure_forearm_container second_structure_hidden">
            <h2>Right Forearm</h2>
            <div class="second_structure_image_upload">
                <label for="second_structure_rightForearmImage">Upload Image:</label>
                <input type="file" id="second_structure_rightForearmImage" accept="image/*" onchange="second_structure_previewImage('second_structure_rightForearmImage', 'rightForearmPreview')">
                <div class="image-preview-container">
                    <img id="rightForearmPreview" class="image-preview" alt="Right forearm image preview">
                    <p id="rightForearmPreviewText">Image preview will appear here</p>
                </div>
            </div>
            
            <p><strong>Select Wound Types:</strong></p>
            <div id="second_structure_right_laceration_details" class="first_structure_wound_details_section">
                <label for="right_laceration_details">Laceration:</label>
                <textarea id="right_laceration_details1" rows="2" cols="50" placeholder="Describe laceration..."></textarea>
            </div>
        
            <div id="second_structure_right_contusion_details" class="first_structure_wound_details_section">
                <label for="right_contusion_details">Contusion:</label>
                <textarea id="right_contusion_details1" rows="2" cols="50" placeholder="Describe contusion..."></textarea>
            </div>
        
            <div id="second_structure_right_avulsion_details" class="first_structure_wound_details_section">
                <label for="right_avulsion_details">Avulsion:</label>
                <textarea id="right_avulsion_details1" rows="2" cols="50" placeholder="Describe avulsion..."></textarea>
            </div>
        
            <div id="second_structure_right_incised_details" class="first_structure_wound_details_section">
                <label for="right_incised_details">Incised:</label>
                <textarea id="right_incised_details1" rows="2" cols="50" placeholder="Describe incised wound..."></textarea>
            </div>
        
            <div id="second_structure_right_abrasion_details" class="first_structure_wound_details_section">
                <label for="right_abrasion_details">Abrasion:</label>
                <textarea id="right_abrasion_details1" rows="2" cols="50" placeholder="Describe abrasion..."></textarea>
            </div>
        
            <div id="second_structure_right_penetration_details" class="first_structure_wound_details_section">
                <label for="right_penetration_details">Penetration:</label>
                <textarea id="right_penetration_details1" rows="2" cols="50" placeholder="Describe penetration..."></textarea>
            </div>
        
            <div id="second_structure_right_degloving_details" class="first_structure_wound_details_section">
                <label for="right_degloving_details">Degloving:</label>
                <textarea id="right_degloving_details1" rows="2" cols="50" placeholder="Describe degloving..."></textarea>
            </div>
        
            <div id="second_structure_right_crush_details" class="first_structure_wound_details_section">
                <label for="right_crush_details">Crush:</label>
                <textarea id="right_crush_details1" rows="2" cols="50" placeholder="Describe crush injury..."></textarea>
            </div>
        </div>
    </div>
        </div>
    </div>
    
    <script>
        // Function to toggle visibility of the forearm selection section
        function toggleForearmSelectionVisibility(answer) {
            const forearmSelectionSection = document.getElementById('forearm_selection_section');
            const leftForearmContainer = document.getElementById('second_structure_leftForearmContainer');
            const rightForearmContainer = document.getElementById('second_structure_rightForearmContainer');
            
            if (answer === 'yes') {
                forearmSelectionSection.classList.remove('second_structure_hidden');
            } else {
                // If answer is 'no', hide both the selection and the containers
                forearmSelectionSection.classList.add('second_structure_hidden');
                leftForearmContainer.classList.add('second_structure_hidden');
                rightForearmContainer.classList.add('second_structure_hidden');
                
                // Clear any selected forearm radio buttons
                const forearmRadios = document.getElementsByName('second_structure_forearm');
                forearmRadios.forEach(radio => {
                    radio.checked = false;
                });
            }
        }
        
        // Show/hide forearm sections based on selection
        function second_structure_toggleForearmSection() {
            const second_structure_selectedForearm = document.querySelector('input[name="second_structure_forearm"]:checked').value;
            const second_structure_leftContainer = document.getElementById('second_structure_leftForearmContainer');
            const second_structure_rightContainer = document.getElementById('second_structure_rightForearmContainer');
            
            
            second_structure_leftContainer.classList.add('second_structure_hidden');
            second_structure_rightContainer.classList.add('second_structure_hidden');
            
            if (second_structure_selectedForearm === 'left') {
                second_structure_leftContainer.classList.remove('second_structure_hidden');
                
            } else if (second_structure_selectedForearm === 'right') {
                second_structure_rightContainer.classList.remove('second_structure_hidden');
                
            } else if (second_structure_selectedForearm === 'both') {
                second_structure_leftContainer.classList.remove('second_structure_hidden');
                second_structure_rightContainer.classList.remove('second_structure_hidden');
                
            }
        }
        
        
        // Function to preview uploaded images
        function second_structure_previewImage(inputId, previewId) {
            const fileInput = document.getElementById(inputId);
            const previewImg = document.getElementById(previewId);
            const previewText = document.getElementById(previewId + 'Text');
            
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewImg.src = e.target.result;
                    previewImg.style.display = 'block';
                    if (previewText) {
                        previewText.style.display = 'none';
                    }
                };
                
                reader.readAsDataURL(fileInput.files[0]);
            } else {
                previewImg.style.display = 'none';
                if (previewText) {
                    previewText.style.display = 'block';
                }
            }
        }
    </script>
<hr style="border-top: 2px dotted black; width: 100%;">
<style>
    .flexor-section {
        margin-bottom: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    
    .flexor-radio-group {
        margin-top: 10px;
    }
    
    .flexor-radio-group input[type="radio"] {
        margin-right: 5px;
    }
    
    .flexor-radio-group label {
        margin-right: 15px;
    }
    
    .hidden {
        display: none;
    }
    
    .flexor-flexbox {
        display: flex;
        flex-wrap: wrap;
    }
    
    .flexor-hand-box {
        flex: 1;
        min-width: 400px;
        margin-right: 20px;
    }
    
    .flexor-hand-image {
    width: 450px; /* Or whatever width you prefer */
    height: auto; /* Keeps aspect ratio */
}
    
    .hand-selection {
        flex: 2;
        min-width: 300px;
    }
    
    .zone-table {
    width: 40%; /* Reduce from 100% */
    max-width: 300px; /* Add a maximum width */
    border-collapse: collapse;
    margin-top: 15px;
}
    
    .zone-table th, .zone-table td {
        padding: 6px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    
    .zone-table th {
        background-color: #f2f2f2;
    }
    
    .zone-name {
        font-weight: bold;
        width: 30px;
    }
    
    .finger-dropdown {
        width: 55px;
    }
    
    .finger-header {
        text-align: center;
    }
</style>
<div class="flexor-section">
    <label>Is there a Flexor Tendon Injury? *</label>
    <div class="flexor-radio-group">
        <input type="radio" id="flexorInjuryYes" name="flexorInjuryStatus" value="yes" onclick="toggleFlexorHandSelection(true)" required>
        <label for="flexorInjuryYes">Yes</label>

        <input type="radio" id="flexorInjuryNo" name="flexorInjuryStatus" value="no" onclick="toggleFlexorHandSelection(false)">
        <label for="flexorInjuryNo">No</label>
    </div>
</div>

<div class="flexor-section hidden" id="flexorHandSelectionSection">
    <label>Select Hand:</label>
    <div class="flexor-radio-group">
        <input type="radio" id="flexorLeftHand" name="flexorHandSelection" value="left" onclick="showFlexorHandImage('left')">
        <label for="flexorLeftHand">Left</label>

        <input type="radio" id="flexorRightHand" name="flexorHandSelection" value="right" onclick="showFlexorHandImage('right')">
        <label for="flexorRightHand">Right</label>

        <input type="radio" id="flexorBothHands" name="flexorHandSelection" value="both" onclick="showFlexorHandImage('both')">
        <label for="flexorBothHands">Both</label>
    </div>
</div>

<div class="flexor-section hidden" id="flexorHandImageSection">
    <div class="flexor-flexbox">
        <div class="flexor-hand-box">
            <img id="flexorHandMainImage" src="https://res.cloudinary.com/dreh6wst7/image/upload/databaseimages/bvxvc5ayj4kmgczmzrhn.png" class="flexor-hand-image" alt="Hand Image">
        </div>

        <div id="leftHandSelection" class="hand-selection hidden">
            <h3>Left Hand</h3>
            <div>
                <table class="zone-table">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th class="finger-header">Index</th>
                            <th class="finger-header">Middle</th>
                            <th class="finger-header">Ring</th>
                            <th class="finger-header">Little</th>
                            <th class="finger-header">Palm</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="zone-name">1</td>
                            <td><input type="checkbox" id="left_zone1_index" name="left_zone1_index"></td>
                            <td><input type="checkbox" id="left_zone1_middle" name="left_zone1_middle"></td>
                            <td><input type="checkbox" id="left_zone1_ring" name="left_zone1_ring"></td>
                            <td><input type="checkbox" id="left_zone1_little" name="left_zone1_little"></td>
                            <td><input type="checkbox" id="left_zone1_palm" name="left_zone1_palm"></td>
                        </tr>
                        <tr>
                            <td class="zone-name">2</td>
                            <td><input type="checkbox" id="left_zone2_index" name="left_zone2_index"></td>
                            <td><input type="checkbox" id="left_zone2_middle" name="left_zone2_middle"></td>
                            <td><input type="checkbox" id="left_zone2_ring" name="left_zone2_ring"></td>
                            <td><input type="checkbox" id="left_zone2_little" name="left_zone2_little"></td>
                            <td><input type="checkbox" id="left_zone2_palm" name="left_zone2_palm"></td>
                        </tr>
                        <tr>
                            <td colspan="6" style="text-align: center;">
                                <label for="left_zone3_index" style="margin-right: 10px; font-weight: bold;">3</label>
                                <input type="checkbox" id="left_zone3_index" name="left_zone3_index">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="6" style="text-align: center;">
                                <label for="left_zone4_index" style="margin-right: 10px; font-weight: bold;">4</label>
                                <input type="checkbox" id="left_zone4_index" name="left_zone4_index">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="6" style="text-align: center;">
                                <label for="left_zone5_index" style="margin-right: 10px; font-weight: bold;">5</label>
                                <input type="checkbox" id="left_zone5_index" name="left_zone5_index">
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <h4 style="margin-top: 20px;">Thumb Zones</h4>
                <table class="zone-table">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th class="finger-header">T1</th>
                            <th class="finger-header">T2</th>
                            <th class="finger-header">T3</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="zone-name">THUMB</td>
                            <td><input type="checkbox" id="left_thumb_t1" name="left_thumb_t1"></td>
                            <td><input type="checkbox" id="left_thumb_t2" name="left_thumb_t2"></td>
                            <td><input type="checkbox" id="left_thumb_t3" name="left_thumb_t3"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="rightHandSelection" class="hand-selection hidden">
            <h3>Right Hand</h3>
            <div>
                <table class="zone-table">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th class="finger-header">Index</th>
                            <th class="finger-header">Middle</th>
                            <th class="finger-header">Ring</th>
                            <th class="finger-header">Little</th>
                            <th class="finger-header">Palm</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="zone-name">1</td>
                            <td><input type="checkbox" id="right_zone1_index" name="right_zone1_index"></td>
                            <td><input type="checkbox" id="right_zone1_middle" name="right_zone1_middle"></td>
                            <td><input type="checkbox" id="right_zone1_ring" name="right_zone1_ring"></td>
                            <td><input type="checkbox" id="right_zone1_little" name="right_zone1_little"></td>
                            <td><input type="checkbox" id="right_zone1_palm" name="right_zone1_palm"></td>
                        </tr>
                        <tr>
                            <td class="zone-name">2</td>
                            <td><input type="checkbox" id="right_zone2_index" name="right_zone2_index"></td>
                            <td><input type="checkbox" id="right_zone2_middle" name="right_zone2_middle"></td>
                            <td><input type="checkbox" id="right_zone2_ring" name="right_zone2_ring"></td>
                            <td><input type="checkbox" id="right_zone2_little" name="right_zone2_little"></td>
                            <td><input type="checkbox" id="right_zone2_palm" name="right_zone2_palm"></td>
                        </tr>
                        <tr>
                            <td colspan="6" style="text-align: center;">
                                <label for="right_zone3_index" style="margin-right: 10px; font-weight: bold;">3</label>
                                <input type="checkbox" id="right_zone3_index" name="right_zone3_index">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="6" style="text-align: center;">
                                <label for="right_zone4_index" style="margin-right: 10px; font-weight: bold;">4</label>
                                <input type="checkbox" id="right_zone4_index" name="right_zone4_index">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="6" style="text-align: center;">
                                <label for="right_zone5_index" style="margin-right: 10px; font-weight: bold;">5</label>
                                <input type="checkbox" id="right_zone5_index" name="right_zone5_index">
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <h4 style="margin-top: 20px;">Thumb Zones</h4>
                <table class="zone-table">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th class="finger-header">T1</th>
                            <th class="finger-header">T2</th>
                            <th class="finger-header">T3</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="zone-name">THUMB</td>
                            <td><input type="checkbox" id="right_thumb_t1" name="right_thumb_t1"></td>
                            <td><input type="checkbox" id="right_thumb_t2" name="right_thumb_t2"></td>
                            <td><input type="checkbox" id="right_thumb_t3" name="right_thumb_t3"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script>
    function toggleFlexorHandSelection(isInjuryPresent) {
        document.getElementById("flexorHandSelectionSection").classList.toggle("hidden", !isInjuryPresent);
        document.getElementById("flexorHandImageSection").classList.add("hidden");
        document.getElementById("leftHandSelection").classList.add("hidden");
        document.getElementById("rightHandSelection").classList.add("hidden");
    }

    function showFlexorHandImage(selectedHand) {
        document.getElementById("flexorHandImageSection").classList.remove("hidden");

        // Hide both selections first
        document.getElementById("leftHandSelection").classList.add("hidden");
        document.getElementById("rightHandSelection").classList.add("hidden");

        // Show the appropriate selections based on the hand choice
        if (selectedHand === "left" || selectedHand === "both") {
            document.getElementById("leftHandSelection").classList.remove("hidden");
        }
        
        if (selectedHand === "right" || selectedHand === "both") {
            document.getElementById("rightHandSelection").classList.remove("hidden");
        }
    }
    </script>


<hr style="border-top: 2px dotted black; width: 100%;">
<style>
    .extensor-section {
        margin-bottom: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    
    .extensor-radio-group {
        margin-top: 10px;
    }
    
    .extensor-radio-group input[type="radio"] {
        margin-right: 5px;
    }
    
    .extensor-radio-group label {
        margin-right: 15px;
    }
    
    .hidden {
        display: none;
    }
    
    .extensor-flexbox {
        display: flex;
        flex-wrap: wrap;
    }
    
    .extensor-hand-box {
        flex: 1;
        min-width: 470px;
        margin-right: 20px;
    }
    
    .extensor-hand-image {
    width: 450px; /* Or whatever width you prefer */
    height: auto; /* Keeps aspect ratio */
}

    
    .hand-selection {
        flex: 2;
        min-width: 300px;
    }
    
    .zone-table1 {
    width: 90%; /* Reduce from 100% */
    max-width: 450px; /* Add a maximum width */
    border-collapse: collapse;
    margin-top: 15px;
}
    
    .zone-table1 th, .zone-table1 td {
        padding: 6px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    
    .zone-table1 th {
        background-color: #f2f2f2;
    }
    
    .zone-name1 {
        font-weight: bold;
        width: 70px;
    }
    .zone-name2 {
        font-weight: bold;
        width: 70px;
    }
    .finger-dropdown1 {
        width: 60px;
    }
    
    .finger-header1 {
        text-align: center;
    }
</style>
<div class="extensor-section">
    <label>Is there a Extensor Tendon Injury? *</label>
    <div class="extensor-radio-group">
        <input type="radio" id="extensorInjuryYes" name="extensorInjuryStatus" value="yes" onclick="toggleExtensorHandSelection(true)" required >
        <label for="extensorInjuryYes">Yes</label>

        <input type="radio" id="extensorInjuryNo" name="extensorInjuryStatus" value="no" onclick="toggleExtensorHandSelection(false)">
        <label for="entensorInjuryNo">No</label>
    </div>
</div>

<div class="extensor-section hidden" id="extensorHandSelectionSection">
    <label>Select Hand:</label>
    <div class="extensor-radio-group">
        <input type="radio" id="extensorLeftHand" name="extensorHandSelection" value="left" onclick="showExtensorHandImage('left')">
        <label for="extensorLeftHand">Left</label>

        <input type="radio" id="extensorRightHand" name="extensorHandSelection" value="right" onclick="showExtensorHandImage('right')">
        <label for="extensorRightHand">Right</label>

        <input type="radio" id="extensorBothHands" name="extensorHandSelection" value="both" onclick="showExtensorHandImage('both')">
        <label for="extensorBothHands">Both</label>
    </div>
</div>

<div class="extensor-section hidden" id="extensorHandImageSection">
    <div class="extensor-flexbox">
        <div class="extensor-hand-box">
            <img id="extensorHandMainImage" src="https://res.cloudinary.com/dreh6wst7/image/upload/databaseimages/u3xzjr77xagqsegkoppa.png" class="extensor-hand-image" alt="Hand Image">
        </div>

        <div id="leftHandSelection1" class="hand-selection hidden">
            <h3>Left Hand</h3>
            <div>
                <table class="zone-table1">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th class="finger-header1">Index</th>
                            <th class="finger-header1">Middle</th>
                            <th class="finger-header1">Ring</th>
                            <th class="finger-header1">Little</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="zone-name1">1</td>
                            <td><input type="checkbox" id="left_zone1_indexx" name="left_zone1_indexx"></td>
                            <td><input type="checkbox" id="left_zone1_middlee" name="left_zone1_middlee"></td>
                            <td><input type="checkbox" id="left_zone1_ringg" name="left_zone1_ringg"></td>
                            <td><input type="checkbox" id="left_zone1_littlee" name="left_zone1_littlee"></td>
                        </tr>
                        <tr>
                            <td class="zone-name1">2</td>
                            <td><input type="checkbox" id="left_zone2_indexx" name="left_zone2_indexx"></td>
                            <td><input type="checkbox" id="left_zone2_middlee" name="left_zone2_middlee"></td>
                            <td><input type="checkbox" id="left_zone2_ringg" name="left_zone2_ringg"></td>
                            <td><input type="checkbox" id="left_zone2_littlee" name="left_zone2_littlee"></td>
                        </tr>
                        <tr>
                            <td class="zone-name1">3</td>
                            <td><input type="checkbox" id="left_zone3_indexx" name="left_zone3_indexx"></td>
                            <td><input type="checkbox" id="left_zone3_middlee" name="left_zone3_middlee"></td>
                            <td><input type="checkbox" id="left_zone3_ringg" name="left_zone3_ringg"></td>
                            <td><input type="checkbox" id="left_zone3_littlee" name="left_zone3_littlee"></td>
                        </tr>
                        <tr>
                            <td class="zone-name1">4</td>
                            <td><input type="checkbox" id="left_zone4_indexx" name="left_zone4_indexx"></td>
                            <td><input type="checkbox" id="left_zone4_middlee" name="left_zone4_middlee"></td>
                            <td><input type="checkbox" id="left_zone4_ringg" name="left_zone4_ringg"></td>
                            <td><input type="checkbox" id="left_zone4_littlee" name="left_zone4_littlee"></td>
                        </tr>
                        <tr>
                            <td class="zone-name1">5</td>
                            <td><input type="checkbox" id="left_zone5_indexx" name="left_zone5_indexx"></td>
                            <td><input type="checkbox" id="left_zone5_middlee" name="left_zone5_middlee"></td>
                            <td><input type="checkbox" id="left_zone5_ringg" name="left_zone5_ringg"></td>
                            <td><input type="checkbox" id="left_zone5_littlee" name="left_zone5_littlee"></td>
                        </tr>
                        <tr>
                            <td colspan="5" style="text-align: center;">
                                <label for="left_zone6_indexx" style="margin-right: 10px; font-weight: bold;">6</label>
                                <input type="checkbox" id="left_zone6_indexx" name="left_zone6_indexx">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5" style="text-align: center;">
                                <label for="left_zone7_indexx" style="margin-right: 10px; font-weight: bold;">7</label>
                                <input type="checkbox" id="left_zone7_indexx" name="left_zone7_indexx">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5" style="text-align: center;">
                                <label for="left_zone8_indexx" style="margin-right: 10px; font-weight: bold;">8</label>
                                <input type="checkbox" id="left_zone8_indexx" name="left_zone8_indexx">
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <h4 style="margin-top: 20px;">Thumb Zones</h4>
                <table class="zone-table1">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th class="finger-header1">T1</th>
                            <th class="finger-header1">T2</th>
                            <th class="finger-header1">T3</th>
                            <th class="finger-header1">T4</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="zone-name">THUMB</td>
                            <td><input type="checkbox" id="left_thumb_t11" name="left_thumb_t11"></td>
                            <td><input type="checkbox" id="left_thumb_t22" name="left_thumb_t22"></td>
                            <td><input type="checkbox" id="left_thumb_t33" name="left_thumb_t33"></td>
                            <td><input type="checkbox" id="left_thumb_t44" name="left_thumb_t44"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="rightHandSelection1" class="hand-selection hidden">
            <h3>Right Hand</h3>
            <div>
                <table class="zone-table1">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th class="finger-header1">Index</th>
                            <th class="finger-header1">Middle</th>
                            <th class="finger-header1">Ring</th>
                            <th class="finger-header1">Little</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="zone-name1">1</td>
                            <td><input type="checkbox" id="right_zone1_indexx" name="right_zone1_indexx"></td>
                            <td><input type="checkbox" id="right_zone1_middlee" name="right_zone1_middlee"></td>
                            <td><input type="checkbox" id="right_zone1_ringg" name="right_zone1_ringg"></td>
                            <td><input type="checkbox" id="right_zone1_littlee" name="right_zone1_littlee"></td>
                        </tr>
                        <tr>
                            <td class="zone-name1">2</td>
                            <td><input type="checkbox" id="right_zone2_indexx" name="right_zone2_indexx"></td>
                            <td><input type="checkbox" id="right_zone2_middlee" name="right_zone2_middlee"></td>
                            <td><input type="checkbox" id="right_zone2_ringg" name="right_zone2_ringg"></td>
                            <td><input type="checkbox" id="right_zone2_littlee" name="right_zone2_littlee"></td>
                        </tr>
                        <tr>
                            <td class="zone-name1">3</td>
                            <td><input type="checkbox" id="right_zone3_indexx" name="right_zone3_indexx"></td>
                            <td><input type="checkbox" id="right_zone3_middlee" name="right_zone3_middlee"></td>
                            <td><input type="checkbox" id="right_zone3_ringg" name="right_zone3_ringg"></td>
                            <td><input type="checkbox" id="right_zone3_littlee" name="right_zone3_littlee"></td>
                        </tr>
                        <tr>
                            <td class="zone-name1">4</td>
                            <td><input type="checkbox" id="right_zone4_indexx" name="right_zone4_indexx"></td>
                            <td><input type="checkbox" id="right_zone4_middlee" name="right_zone4_middlee"></td>
                            <td><input type="checkbox" id="right_zone4_ringg" name="right_zone4_ringg"></td>
                            <td><input type="checkbox" id="right_zone4_littlee" name="right_zone4_littlee"></td>
                        </tr>
                        <tr>
                            <td class="zone-name1">5</td>
                            <td><input type="checkbox" id="right_zone5_indexx" name="right_zone5_indexx"></td>
                            <td><input type="checkbox" id="right_zone5_middlee" name="right_zone5_middlee"></td>
                            <td><input type="checkbox" id="right_zone5_ringg" name="right_zone5_ringg"></td>
                            <td><input type="checkbox" id="right_zone5_littlee" name="right_zone5_littlee"></td>
                        </tr>
                        <tr>
                            <td colspan="5" style="text-align: center;">
                                <label for="right_zone6_indexx" style="margin-right: 10px; font-weight: bold;">6</label>
                                <input type="checkbox" id="right_zone6_indexx" name="right_zone6_indexx">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5" style="text-align: center;">
                                <label for="right_zone7_indexx" style="margin-right: 10px; font-weight: bold;">7</label>
                                <input type="checkbox" id="right_zone7_indexx" name="right_zone7_indexx">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5" style="text-align: center;">
                                <label for="right_zone8_indexx" style="margin-right: 10px; font-weight: bold;">8</label>
                                <input type="checkbox" id="right_zone8_indexx" name="right_zone8_indexx">
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <h4 style="margin-top: 20px;">Thumb Zones</h4>
                <table class="zone-table1">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th class="finger-header1">T1</th>
                            <th class="finger-header1">T2</th>
                            <th class="finger-header1">T3</th>
                            <th class="finger-header1">T4</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="zone-name">THUMB</td>
                            <td><input type="checkbox" id="right_thumb_t11" name="right_thumb_t11"></td>
                            <td><input type="checkbox" id="right_thumb_t22" name="right_thumb_t22"></td>
                            <td><input type="checkbox" id="right_thumb_t33" name="right_thumb_t33"></td>
                            <td><input type="checkbox" id="right_thumb_t44" name="right_thumb_t44"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script>
    function toggleExtensorHandSelection(isInjuryPresent) {
        document.getElementById("extensorHandSelectionSection").classList.toggle("hidden", !isInjuryPresent);
        document.getElementById("extensorHandImageSection").classList.add("hidden");
        document.getElementById("leftHandSelection1").classList.add("hidden");
        document.getElementById("rightHandSelection1").classList.add("hidden");
    }

    function showExtensorHandImage(selectedHand) {
        document.getElementById("extensorHandImageSection").classList.remove("hidden");

        // Hide both selections first
        document.getElementById("leftHandSelection1").classList.add("hidden");
        document.getElementById("rightHandSelection1").classList.add("hidden");

        // Show the appropriate selections based on the hand choice
        if (selectedHand === "left" || selectedHand === "both") {
            document.getElementById("leftHandSelection1").classList.remove("hidden");
        }
        
        if (selectedHand === "right" || selectedHand === "both") {
            document.getElementById("rightHandSelection1").classList.remove("hidden");
        }
    }
    </script>

<hr style="border-top: 2px dotted black; width: 100%;">

<script>
    function vasc_handleVascularitySelection() {
        let vascularity = document.querySelector('input[name="vasc_vascularity"]:checked').value;
        document.getElementById('vasc_normalFeatures').style.display = (vascularity === 'present') ? 'block' : 'none';
        document.getElementById('vasc_handSelection').style.display = (vascularity !== 'present') ? 'block' : 'none';
        
        // Hide tables when changing vascularity
        document.getElementById('vasc_leftHandTable').style.display = 'none';
        document.getElementById('vasc_rightHandTable').style.display = 'none';
    }

    function vasc_handleHandSelection() {
        let leftHand = document.getElementById('vasc_leftHand').checked;
        let rightHand = document.getElementById('vasc_rightHand').checked;
        let bothHands = document.getElementById('vasc_bothHands').checked;
        
        // Show/hide tables based on hand selection
        document.getElementById('vasc_leftHandTable').style.display = (leftHand || bothHands) ? 'block' : 'none';
        document.getElementById('vasc_rightHandTable').style.display = (rightHand || bothHands) ? 'block' : 'none';
    }
</script>

<div class="vasc_container">
    <label for="vasc_vascularity" class="vasc_form-label vasc_fw-bold">Vascularity: *</label>
    <div class="vasc_center" id="vascc">
        <label class="vasc_label"><input type="radio" name="vasc_vascularity" value="present" onclick="vasc_handleVascularitySelection()" required> Present</label>
        <label class="vasc_label"><input type="radio" name="vasc_vascularity" value="reduced" onclick="vasc_handleVascularitySelection()"> Reduced</label>
        <label class="vasc_label"><input type="radio" name="vasc_vascularity" value="absent" onclick="vasc_handleVascularitySelection()"> Absent</label>
    </div>
    
    <div id="vasc_normalFeatures" class="vasc_center" style="display:none;">
        <p class="vasc_p"><strong>All fingers have normal features:</strong></p>
        <ul class="vasc_ul">
            <li class="vasc_li">Pink skin</li>
            <li class="vasc_li">Normal turgor</li>
            <li class="vasc_li">Warmth is present</li>
            <li class="vasc_li">Capillary refill time is spontaneous</li>
        </ul>
    </div>
    
    <div id="vasc_handSelection" class="vasc_center" style="display:none;">
        <label for="vasc_selecthandd" class="vasc_form-label vasc_fw-bold">Select Hand:</label>
        <label class="vasc_label">
            <input type="radio" name="vasc_hand" id="vasc_leftHand" value="Left" onclick="vasc_handleHandSelection()"> Left
        </label>
        <label class="vasc_label">
            <input type="radio" name="vasc_hand" id="vasc_rightHand" value="Right" onclick="vasc_handleHandSelection()"> Right
        </label>
        <label class="vasc_label">
            <input type="radio" name="vasc_hand" id="vasc_bothHands" value="Both" onclick="vasc_handleHandSelection()"> Both
        </label>
    </div>
    
    <!-- Left Hand Table - Pre-defined in HTML with unique IDs -->
    <div id="vasc_leftHandTable" style="display:none;">
        <h3 class="vasc_center">Left Hand</h3>
        <table class="vasc_table">
            <tr>
                <th class="vasc_th">Digit</th>
                <th class="vasc_th">Colour</th>
                <th class="vasc_th">Turgor</th>
                <th class="vasc_th">Warmth</th>
                <th class="vasc_th">Capillary Refill Time</th>
                <th class="vasc_th">SpO2</th>
                <th class="vasc_th">SpO2 Waveform</th>
            </tr>
            <tr>
                <td class="vasc_td">Thumb</td>
                <td class="vasc_td"><select id="vasc_left_thumb_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_left_thumb_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_left_thumb_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_left_thumb_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_left_thumb_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_left_thumb_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
            <tr>
                <td class="vasc_td">Index</td>
                <td class="vasc_td"><select id="vasc_left_index_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_left_index_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_left_index_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_left_index_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_left_index_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_left_index_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
            <tr>
                <td class="vasc_td">Middle</td>
                <td class="vasc_td"><select id="vasc_left_middle_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_left_middle_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_left_middle_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_left_middle_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_left_middle_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_left_middle_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
            <tr>
                <td class="vasc_td">Ring</td>
                <td class="vasc_td"><select id="vasc_left_ring_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_left_ring_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_left_ring_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_left_ring_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_left_ring_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_left_ring_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
            <tr>
                <td class="vasc_td">Little</td>
                <td class="vasc_td"><select id="vasc_left_little_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_left_little_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_left_little_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_left_little_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_left_little_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_left_little_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
        </table>
    </div>
    
    <!-- Right Hand Table - Pre-defined in HTML with unique IDs -->
    <div id="vasc_rightHandTable" style="display:none;">
        <h3 class="vasc_center">Right Hand</h3>
        <table class="vasc_table">
            <tr>
                <th class="vasc_th">Digit</th>
                <th class="vasc_th">Colour</th>
                <th class="vasc_th">Turgor</th>
                <th class="vasc_th">Warmth</th>
                <th class="vasc_th">Capillary Refill Time</th>
                <th class="vasc_th">SpO2</th>
                <th class="vasc_th">SpO2 Waveform</th>
            </tr>
            <tr>
                <td class="vasc_td">Thumb</td>
                <td class="vasc_td"><select id="vasc_right_thumb_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_right_thumb_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_right_thumb_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_right_thumb_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_right_thumb_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_right_thumb_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
            <tr>
                <td class="vasc_td">Index</td>
                <td class="vasc_td"><select id="vasc_right_index_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_right_index_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_right_index_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_right_index_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_right_index_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_right_index_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
            <tr>
                <td class="vasc_td">Middle</td>
                <td class="vasc_td"><select id="vasc_right_middle_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_right_middle_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_right_middle_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_right_middle_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_right_middle_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_right_middle_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
            <tr>
                <td class="vasc_td">Ring</td>
                <td class="vasc_td"><select id="vasc_right_ring_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_right_ring_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_right_ring_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_right_ring_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_right_ring_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_right_ring_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
            <tr>
                <td class="vasc_td">Little</td>
                <td class="vasc_td"><select id="vasc_right_little_colour" class="vasc_select"><option>Pink</option><option>Pale</option><option>Blue</option></select></td>
                <td class="vasc_td"><select id="vasc_right_little_turgor" class="vasc_select"><option>Normal</option><option>Reduced</option></select></td>
                <td class="vasc_td"><select id="vasc_right_little_warmth" class="vasc_select"><option>Present</option><option>Reduced</option><option>Absent</option></select></td>
                <td class="vasc_td"><select id="vasc_right_little_crt" class="vasc_select"><option>Spontaneous</option><option>< 3 sec</option><option>> 3 sec</option></select></td>
                <td class="vasc_td"><input id="vasc_right_little_spo2" class="vasc_input" type="text"></td>
                <td class="vasc_td"><select id="vasc_right_little_waveform" class="vasc_select"><option>Triphasic</option><option>Biphasic</option></select></td>
            </tr>
        </table>
    </div>
</div>
<hr style="border-top: 2px dotted black; width: 100%;">
   
        <label for="peri" class="form-label">Peripheral Pulses:</label>
             <div class="row">
                 <div class="col">
                     <label for="left" class="form-label">LEFT</label>
                 </div>
                 <div class="col">
                     <label for="right" class="form-label">RIGHT</label>
                 </div>
             </div>
             <div class="row">
                 <div class="col-md-3">
                    <h6>Radial</h6>
                 </div>
                 <div class="col-md-3">
                     <select class="form-select" id="radial1">
                         <option value="present">Present</option>
                         <option value="Absent">Absent</option>
                         <option value="Reduced">Reduced</option>
                       </select>
                 </div>
                 <div class="col-md-3">
                     <h6>Radial</h6>
                 </div>
                 <div class="col-md-3">
                     <select class="form-select" id="ulnar1">
                         <option value="present">Present</option>
                         <option value="Absent">Absent</option>
                         <option value="Reduced">Reduced</option>
                       </select>
                 </div>
             </div>
             <div class="row">
                 <div class="col-md-3">
                    <h6>Ulnar</h6>
                 </div>
                 <div class="col-md-3">
                     <select class="form-select" id="ulnar2">
                         <option value="present">Present</option>
                         <option value="Absent">Absent</option>
                         <option value="Reduced">Reduced</option>
                       </select>
                 </div>
                 <div class="col-md-3">
                     <h6>Radial</h6>
                 </div>
                 <div class="col-md-3">
                     <select class="form-select" id="radial2">
                         <option value="present">Present</option>
                         <option value="Absent">Absent</option>
                         <option value="Reduced">Reduced</option>
                       </select>
                 </div>
             </div>
             <hr style="border-top: 2px dotted black; width: 100%;">

             <div style="text-align: center;">
                <label class="form-label">Handheld Doppler: *</label>
                <div style="display: flex; justify-content: center; gap: 15px; margin-top: 5px;">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="doppler" id="notdone1" value="notdone" checked required>
                        <label class="form-check-label" for="notdone">Not Done</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="doppler" id="done1" value="done">
                        <label class="form-check-label" for="done">Done</label>
                    </div>
                </div>
            </div>
             <hr style="border-top: 2px dotted black; width: 100%;">
             <h6>Select E/O Compartment Syndrome symptoms that are present:</h6>
    
             <table>
                 <tbody>
                     <tr>
                         <td>Pain out-of-proportion</td>
                         <td class="dropdown-cell">
                             <select id="pain1" name="symptoms" class="symptom-select">
                                 <option value="no">No</option>
                                 <option value="yes">Yes</option>
                             </select>
                         </td>
                     </tr>
                     <tr>
                         <td>Stretch pain</td>
                         <td class="dropdown-cell">
                             <select id="stretch1" name="symptoms" class="symptom-select">
                                 <option value="no">No</option>
                                 <option value="yes">Yes</option>
                             </select>
                         </td>
                     </tr>
                     <tr>
                         <td>Induration (woody feel)</td>
                         <td class="dropdown-cell">
                             <select id="induration1" name="symptoms" class="symptom-select">
                                 <option value="no">No</option>
                                 <option value="yes">Yes</option>
                             </select>
                         </td>
                     </tr>
                     <tr>
                         <td>Paraesthesia</td>
                         <td class="dropdown-cell">
                             <select id="paraesthesia1" name="symptoms" class="symptom-select">
                                 <option value="no">No</option>
                                 <option value="yes">Yes</option>
                             </select>
                         </td>
                     </tr>
                     <tr>
                         <td>Paralysis</td>
                         <td class="dropdown-cell">
                             <select id="paralysis1" name="symptoms" class="symptom-select">
                                 <option value="no">No</option>
                                 <option value="yes">Yes</option>
                             </select>
                         </td>
                     </tr>
                     <tr>
                         <td>Pulselessness</td>
                         <td class="dropdown-cell">
                             <select id="pulselessness1" name="symptoms" class="symptom-select">
                                 <option value="no">No</option>
                                 <option value="yes">Yes</option>
                             </select>
                         </td>
                     </tr>
                 </tbody>
             </table>
         
             <script>
                 // Function to handle NIL dropdown
                 function handleNilDropdown() {
                     const nilDropdown = document.getElementById('nil1');
                     const symptomDropdowns = document.querySelectorAll('.symptom-select');
                     
                     // When NIL is set to Yes, set all other dropdowns to No and disable them
                     nilDropdown.addEventListener('change', function() {
                         if (this.value === 'yes') {
                             symptomDropdowns.forEach(dropdown => {
                                 dropdown.value = 'no';
                                 dropdown.disabled = true;
                                 dropdown.parentElement.parentElement.style.opacity = "0.5";
                             });
                         } else {
                             symptomDropdowns.forEach(dropdown => {
                                 dropdown.disabled = false;
                                 dropdown.parentElement.parentElement.style.opacity = "1";
                             });
                         }
                     });
                     
                     // When any symptom is set to Yes, set NIL to No
                     symptomDropdowns.forEach(dropdown => {
                         dropdown.addEventListener('change', function() {
                             if (this.value === 'yes') {
                                 nilDropdown.value = 'no';
                             }
                         });
                     });
                 }
                 
                 // Initialize the function immediately
                 handleNilDropdown();
             </script>
             <hr style="border-top: 2px dotted black; width: 100%;">

             <label for="brachial" class="form-label fw-bold">Associated Brachial Plexus Injury? *</label><br>
             <div>
                 <input type="radio" id="injury_yes" name="brachial_injury" value="yes" onclick="toggleSections()" required> Yes
                 <input type="radio" id="injury_no" name="brachial_injury" value="no" onclick="toggleSections()"> No
             </div>
             
             <div id="injury_sections" class="hidden flex-container">
                 <div>
                    <label for="l" class="form-label fw-bold">Left</label><br>
                     <input type="radio" name="left_injury" value="upper"> Upper Plexus
                     <input type="radio" name="left_injury" value="extended_upper"> Extended Upper Plexus
                     <input type="radio" name="left_injury" value="global"> Global
                 </div>
                 <div>
                    <label for="r" class="form-label fw-bold">Right</label><br>
                     <input type="radio" name="right_injury" value="upper"> Upper Plexus
                     <input type="radio" name="right_injury" value="extended_upper"> Extended Upper Plexus
                     <input type="radio" name="right_injury" value="global"> Global
                 </div>
             </div>
             <script>
                function toggleSections() {
                    var injuryYes = document.getElementById("injury_yes").checked;
                    var sections = document.getElementById("injury_sections");
                    
                    if (injuryYes) {
                        sections.classList.remove("hidden");
                    } else {
                        sections.classList.add("hidden");
                    }
                }
            </script>
                
                <hr style="border-top: 2px dotted black; width: 100%;">
                <label for="neurological_nero" class="form-label fw-bold">Neurological Deficit? *</label><br>
                <div class="neurological-radio-container">
                    <input type="radio" id="neurological_deficit_present" name="neurological_deficit" value="present" onclick="toggleNeurologicalTable()" required> Present
                    <input type="radio" id="neurological_deficit_absent" name="neurological_deficit" value="absent" onclick="toggleNeurologicalTable()"> Absent
                </div>
                
                <div id="neurological_deficit_table" class="hidden">
                    <table class="neurological-table">
                        <tr>
                            <th></th>
                            <th colspan="2">Left</th>
                            <th colspan="2">Right</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th>Motor</th>
                            <th>Sensory</th>
                            <th>Motor</th>
                            <th>Sensory</th>
                        </tr>
                        <tr>
                            <td>Median</td>
                            <td><input type="checkbox" id="neurodef1"></td>
                            <td><input type="checkbox" id="neurodef2"></td>
                            <td><input type="checkbox" id="neurodef3"></td>
                            <td><input type="checkbox" id="neurodef4"></td>
                        </tr>
                        <tr>
                            <td>Ulnar</td>
                            <td><input type="checkbox" id="ulnar1"></td>
                            <td><input type="checkbox" id="ulnar2"></td>
                            <td><input type="checkbox" id="ulnar3"></td>
                            <td><input type="checkbox" id="ulnar4"></td>
                        </tr>
                        <tr>
                            <td>Radial</td>
                            <td><input type="checkbox" id="rad1"></td>
                            <td><input type="checkbox" id="rad2"></td>
                            <td><input type="checkbox" id="rad3"></td>
                            <td><input type="checkbox" id="rad4"></td>
                        </tr>
                        <tr>
                            <td>Musculocutaneous</td>
                            <td><input type="checkbox" id="mus1"></td>
                            <td><input type="checkbox" id="mus2"></td>
                            <td><input type="checkbox" id="mus3"></td>
                            <td><input type="checkbox" id="mus4"></td>
                        </tr>
                        <tr>
                            <td>Axillary</td>
                            <td><input type="checkbox" id="ax1"></td>
                            <td><input type="checkbox" id="ax2"></td>
                            <td><input type="checkbox" id="ax3"></td>
                            <td><input type="checkbox" id="ax4"></td>
                        </tr>
                        <tr>
                            <td>Others:</td>
                            <td><input type="text" id="otherneuro1"></td>
                            <td><input type="text" id="otherneuro2"></td>
                            <td><input type="text" id="otherneuro3"></td>
                            <td><input type="text" id="otherneuro4"></td>
                        </tr>
                    </table>
                </div>
                
                <script>
                    function toggleNeurologicalTable() {
                        var deficitPresent = document.getElementById("neurological_deficit_present").checked;
                        var tableSection = document.getElementById("neurological_deficit_table");
                        
                        if (deficitPresent) {
                            tableSection.classList.remove("hidden");
                        } else {
                            tableSection.classList.add("hidden");
                        }
                    }
                </script>
            <hr style="border-top: 2px dotted black; width: 100%;">
            <div id="third_structure_bone_assessment_section">
                <label for="third_structure_bone_status_options" class="bone-form-label">Any Bone/Joint injury: *</label>
                <div class="bone-radio-container" id="third_structure_bone_status_options">
                    <input type="radio" id="third_structure_bone_assessment_present" name="third_structure_bone_assessment_status" value="present" onclick="toggleBoneSection()" required>
                    <label for="third_structure_bone_assessment_present">Present</label>
                    <input type="radio" id="third_structure_bone_assessment_absent" name="third_structure_bone_assessment_status" value="absent" onclick="toggleBoneSection()">
                    <label for="third_structure_bone_assessment_absent">Absent</label>
                </div>
                
                <div id="third_structure_bone_assessment_details">
                    <div class="bone-hand-selection">
                        <label class="bone-form-label">Which side?</label>
                        <div class="bone-radio-container">
                            <input type="radio" id="third_structure_bone_left_hand" name="third_structure_bone_hand_side" value="left" onclick="showBoneHandImages()">
                            <label for="third_structure_bone_left_hand">Left</label>
                            <input type="radio" id="third_structure_bone_right_hand" name="third_structure_bone_hand_side" value="right" onclick="showBoneHandImages()">
                            <label for="third_structure_bone_right_hand">Right</label>
                            <input type="radio" id="third_structure_bone_both_hands" name="third_structure_bone_hand_side" value="both" onclick="showBoneHandImages()">
                            <label for="third_structure_bone_both_hands">Both</label>
                        </div>
                    </div>
                    
                    <div id="third_structure_bone_details_section">
                        <table class="bone-table" id="third_structure_bonetable">
                            <tr>
                                <th>Condition</th>
                                <th>Details</th>
                            </tr>
                            <tr>
                                <td>Open Fractures</td>
                                <td><input type="text" id="third_structure_bone_openfracture" class="bone-form-control" oninput="toggleDuncanTable()"></td>
                            </tr>
                            <tr>
                                <td>Closed Fractures</td>
                                <td><input type="text" id="third_structure_bone_closedfracture" class="bone-form-control"></td>
                            </tr>
                            <tr>
                                <td>Dislocation</td>
                                <td><input type="text" id="third_structure_bone_dislocation" class="bone-form-control"></td>
                            </tr>
                            <tr>
                                <td>Instability</td>
                                <td><input type="text" id="third_structure_bone_instability" class="bone-form-control"></td>
                            </tr>
                        </table>
                    </div>
                    
                    <div id="third_structure_bone_hand_images" class="bone-images-container bone-form-hidden">
                        <div id="third_structure_bone_left_image" class="bone-hand-image bone-form-hidden">
                            <h4>Left Hand</h4>
                            <div class="bone-uploaded-image-container">
                                <div class="bone-upload-section">
                                    <label for="third_structure_bone_left_upload" class="bone-upload-label">Upload Left Hand Image:</label>
                                    <input type="file" id="third_structure_bone_left_upload" accept="image/*" onchange="handleBoneImageUpload('left')">
                                </div>
                                <div id="third_structure_bone_left_preview" class="bone-preview-container bone-form-hidden">
                                    <h5>Preview:</h5>
                                    <img id="third_structure_bone_left_preview_image" class="bone-preview-image" alt="Preview of left hand image">
                                    
                                </div>
                            </div>
                        </div>
                        
                        <div id="third_structure_bone_right_image" class="bone-hand-image bone-form-hidden">
                            <h4>Right Hand</h4>
                            <div class="bone-uploaded-image-container">
                                <div class="bone-upload-section">
                                    <label for="third_structure_bone_right_upload" class="bone-upload-label">Upload Right Hand Image:</label>
                                    <input type="file" id="third_structure_bone_right_upload" accept="image/*" onchange="handleBoneImageUpload('right')">
                                </div>
                                <div id="third_structure_bone_right_preview" class="bone-preview-container bone-form-hidden">
                                    <h5>Preview:</h5>
                                    <img id="third_structure_bone_right_preview_image" class="bone-preview-image" alt="Preview of right hand image">
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <style>
            .bone-form-label {
                font-weight: bold;
                display: block;
                margin-bottom: 5px;
            }
            
            .bone-radio-container {
                margin-bottom: 15px;
            }
            
            .bone-radio-container input[type="radio"] {
                margin-right: 5px;
            }
            
            .bone-radio-container label {
                margin-right: 15px;
            }
            
            .bone-form-hidden {
                display: none;
            }
            
            .bone-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
            }
            
            .bone-table th, .bone-table td {
                border: 1px solid #ddd;
                padding: 8px;
                text-align: left;
            }
            
            .bone-table th {
                background-color: #f2f2f2;
            }
            
            .bone-form-control {
                width: 100%;
                padding: 6px;
                border: 1px solid #ccc;
                border-radius: 4px;
            }
            
            .bone-images-container {
                margin-top: 20px;
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
            }
            
            .bone-hand-image {
                flex: 1;
                min-width: 300px;
                border: 1px solid #ddd;
                padding: 15px;
                border-radius: 4px;
            }
            
            .bone-hand-image h4 {
                margin-top: 0;
                border-bottom: 1px solid #eee;
                padding-bottom: 10px;
            }
            
            .bone-upload-label {
                display: block;
                margin-bottom: 8px;
            }
            
            .bone-uploaded-image-container {
                margin-top: 10px;
            }
            
            .bone-preview-container {
                margin: 10px 0;
                padding: 10px;
                border: 1px dashed #ccc;
                background-color: #f9f9f9;
            }
            
            .bone-preview-image {
                max-width: 100%;
                max-height: 300px;
                display: block;
                margin: 5px auto;
            }
            
            .bone-tool-button {
                padding: 5px 10px;
                margin-top: 5px;
                background-color: #f44336;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                display: block;
                margin: 10px auto;
            }
            
            .bone-tool-button:hover {
                background-color: #d32f2f;
            }
            </style>
            
            <script>
                function toggleBoneSection() {
                    var presentChecked = document.getElementById("third_structure_bone_assessment_present").checked;
                    var abscentChecked = document.getElementById("third_structure_bone_assessment_absent").checked;
                    var detailsSection = document.getElementById("third_structure_bone_details_section");
                    
                    // Always show the bone assessment details section with the hand selection
                    // But conditionally show the actual bone injury details table
                    if (presentChecked) {
                        detailsSection.classList.remove("bone-form-hidden");
                    } else if (abscentChecked) {
                        detailsSection.classList.add("bone-form-hidden");
                    }
                }
            
                function showBoneHandImages() {
                    var leftChecked = document.getElementById("third_structure_bone_left_hand").checked;
                    var rightChecked = document.getElementById("third_structure_bone_right_hand").checked;
                    var bothChecked = document.getElementById("third_structure_bone_both_hands").checked;
                    
                    var handImages = document.getElementById("third_structure_bone_hand_images");
                    var leftImage = document.getElementById("third_structure_bone_left_image");
                    var rightImage = document.getElementById("third_structure_bone_right_image");
                    
                    // Always show the hand images container if any option is selected
                    if (leftChecked || rightChecked || bothChecked) {
                        handImages.classList.remove("bone-form-hidden");
                        
                        leftImage.classList.toggle("bone-form-hidden", !leftChecked && !bothChecked);
                        rightImage.classList.toggle("bone-form-hidden", !rightChecked && !bothChecked);
                    }
                }
            
                function handleBoneImageUpload(side) {
                    var fileInput = document.getElementById(`third_structure_bone_${side}_upload`);
                    var previewContainer = document.getElementById(`third_structure_bone_${side}_preview`);
                    var previewImage = document.getElementById(`third_structure_bone_${side}_preview_image`);
                    
                    if (fileInput.files && fileInput.files[0]) {
                        var file = fileInput.files[0];
                        var reader = new FileReader();
                        
                        reader.onload = function(e) {
                            // Set preview image only
                            previewImage.src = e.target.result;
                            previewContainer.classList.remove("bone-form-hidden");
                        };
                        
                        reader.readAsDataURL(file);
                    }
                }
            </script>
            
 <hr style="border-top: 2px dotted black; width: 100%;">
 <div id="duncan-table-container" class="hidden">
    <label for="duncan" class="form-label">
        Duncan's Classification for Open Hand Fracture (Modified Gustillo-Anderson)
    </label>
    <div>
        <div class="classification-box">
            <input type="checkbox" id="classI" name="classification" value="I">
            <div class="class-label">I</div>
            <div class="class-description">
                Tidy laceration &lt; 1 cm in length, no soiling, no soft tissue loss or crush. Basically a puncture wound from within or without.
            </div>
        </div>
        <div class="classification-box">
            <input type="checkbox" id="classII" name="classification" value="II">
            <div class="class-label">II</div>
            <div class="class-description">
                Tidy laceration &lt; 2 cm in length, from outside in, no soiling, no soft tissue crush or loss. Partial muscle laceration.
            </div>
        </div>
        <div class="classification-box">
            <input type="checkbox" id="classIIIA" name="classification" value="III A">
            <div class="class-label">III A</div>
            <div class="class-description">
                Laceration &gt; 2 cm, penetrating or puncturing projectile wound. Any frankly soiled wound.
            </div>
        </div>
        <div class="classification-box">
            <input type="checkbox" id="classIIIB" name="classification" value="III B">
            <div class="class-label">III B</div>
            <div class="class-description">
                Same as IIIA + any periosteal elevation or stripping.
            </div>
        </div>
        <div class="classification-box">
            <input type="checkbox" id="classIIIC" name="classification" value="III C">
            <div class="class-label">III C</div>
            <div class="class-description">
                Same as IIIB + neurovascular injury.
            </div>
        </div>
    </div>
</div>

<script>
    function toggleDuncanTable() {
        var inputField = document.getElementById("third_structure_bone_openfracture").value.trim();
        var duncanTable = document.getElementById("duncan-table-container");

        if (inputField !== "") {
            duncanTable.classList.remove("hidden");
        } else {
            duncanTable.classList.add("hidden");
        }
    }
</script>
<style>
    .hidden {
        display: none;
    }
    .classification-box {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
        border: 1px solid black;
        padding: 10px;
    }
    .class-label {
        width: 50px;
        font-weight: bold;
    }
    .class-description {
        flex: 1;
    }
</style>
<hr style="border-top: 2px dotted black; width: 100%;">
<label for="distal-fracture">Distal Radius Fracture: *</label>
<select id="distal-fracture" onchange="updateDistalUI()" required>
    <option value="NIL">NIL</option>
    <option value="LEFT">LEFT</option>
    <option value="RIGHT">RIGHT</option>
    <option value="BOTH">BOTH</option>
</select>

<!-- Images -->
<div id="distal-image-container" class="image-container hidden">
    <img src="https://res.cloudinary.com/dreh6wst7/image/upload/databaseimages/oevqvssok8qmr9ob5kay.png" alt="X-ray Image 1">
    <img src="https://res.cloudinary.com/dreh6wst7/image/upload/databaseimages/urv5ju3uveppv0ncfmdy.png" alt="X-ray Image 2">
    <img src="https://res.cloudinary.com/dreh6wst7/image/upload/databaseimages/tp0cmxfj6ffdhlgu4mzw.png" alt="X-ray Image 3">
</div>

<!-- Table -->
<table id="distal-table" class="hidden">
    <thead>
        <tr id="table-header">
            <th>Classification</th>
            <th id="left-column-header" class="hidden">Left</th>
            <th id="right-column-header" class="hidden">Right</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Fernandez</td>
            <td id="left-fernandez" class="hidden">
                <select id="distal-fernandez-left">
                    <option value="">Select Type</option>
                    <option value="bending">Bending</option>
                    <option value="shearing">Shearing</option>
                    <option value="compression">Compression</option>
                    <option value="avulsion">Avulsion</option>
                    <option value="compulsion">Compulsion</option>
                </select>
            </td>
            <td id="right-fernandez" class="hidden">
                <select id="distal-fernandez-right">
                    <option value="">Select Type</option>
                    <option value="bending">Bending</option>
                    <option value="shearing">Shearing</option>
                    <option value="compression">Compression</option>
                    <option value="avulsion">Avulsion</option>
                    <option value="compulsion">Compulsion</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Frykman</td>
            <td id="left-frykman" class="hidden">
                <select id="distal-frykman-left">
                    <option value="">Select Type</option>
                    <option value="1">Type 1</option>
                    <option value="2">Type 2</option>
                    <option value="3">Type 3</option>
                    <option value="4">Type 4</option>
                    <option value="5">Type 5</option>
                    <option value="6">Type 6</option>
                    <option value="7">Type 7</option>
                    <option value="8">Type 8</option>
                </select>
            </td>
            <td id="right-frykman" class="hidden">
                <select id="distal-frykman-right">
                    <option value="">Select Type</option>
                    <option value="1">Type 1</option>
                    <option value="2">Type 2</option>
                    <option value="3">Type 3</option>
                    <option value="4">Type 4</option>
                    <option value="5">Type 5</option>
                    <option value="6">Type 6</option>
                    <option value="7">Type 7</option>
                    <option value="8">Type 8</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Melone</td>
            <td id="left-melone" class="hidden">
                <select id="distal-melone-left">
                    <option value="">Select Type</option>
                    <option value="1">Type 1</option>
                    <option value="2a">Type 2A</option>
                    <option value="2b">Type 2B</option>
                    <option value="3">Type 3</option>
                    <option value="4">Type 4</option>
                    <option value="5">Type 5</option>
                </select>
            </td>
            <td id="right-melone" class="hidden">
                <select id="distal-melone-right">
                    <option value="">Select Type</option>
                    <option value="1">Type 1</option>
                    <option value="2a">Type 2A</option>
                    <option value="2b">Type 2B</option>
                    <option value="3">Type 3</option>
                    <option value="4">Type 4</option>
                    <option value="5">Type 5</option>
                </select>
            </td>
        </tr>
    </tbody>
</table>

<script>
    function updateDistalUI() {
        var selection = document.getElementById("distal-fracture").value;
        var imageContainer = document.getElementById("distal-image-container");
        var table = document.getElementById("distal-table");

        // Table headers for left and right columns
        var leftColumnHeader = document.getElementById("left-column-header");
        var rightColumnHeader = document.getElementById("right-column-header");

        // Table cells
        var leftElements = [
            document.getElementById("left-fernandez"),
            document.getElementById("left-frykman"),
            document.getElementById("left-melone")
        ];
        var rightElements = [
            document.getElementById("right-fernandez"),
            document.getElementById("right-frykman"),
            document.getElementById("right-melone")
        ];

        // Hide all initially
        imageContainer.classList.add("hidden");
        table.classList.add("hidden");
        leftColumnHeader.classList.add("hidden");
        rightColumnHeader.classList.add("hidden");
        leftElements.forEach(el => el.classList.add("hidden"));
        rightElements.forEach(el => el.classList.add("hidden"));

        if (selection !== "NIL") {
            imageContainer.classList.remove("hidden");
            table.classList.remove("hidden");

            if (selection === "LEFT" || selection === "BOTH") {
                leftColumnHeader.classList.remove("hidden");
                leftElements.forEach(el => el.classList.remove("hidden"));
            }
            if (selection === "RIGHT" || selection === "BOTH") {
                rightColumnHeader.classList.remove("hidden");
                rightElements.forEach(el => el.classList.remove("hidden"));
            }
        }
    }
</script>

<style>
    .hidden {
        display: none;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    th, td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: center;
    }
</style>
    <hr style="border-top: 2px dotted black; width: 100%;">
    <div class="form-group">
        <label for="lowerExtremeExam" class="form-label">EXAMINATION OF UPPER EXTREMITY: *</label>
    </div>
        <!-- Open Wounds Question -->
<div class="radio-group" id="proximalWoundGroup">
    <label>
        <input type="radio" id="proximalNoWounds" name="proximalOpenWounds" value="no" checked required> No Open Wounds
    </label>
    <label>
        <input type="radio" id="proximalYesWounds" name="proximalOpenWounds" value="yes"> Open Wounds Present
    </label>
</div>

<!-- Hand Selection (Initially Hidden) -->
<div id="proximalHandSelection" style="display: none;">
    <label for="proximalHandSelectExtreme">Select upper limb side: *</label>
    <select id="proximalHandSelectExtreme" name="proximalHandSelectExtreme" required>
        <option value="none">-- Select --</option>
        <option value="left">Left Hand</option>
        <option value="right">Right Hand</option>
        <option value="both">Both Hands</option>
    </select>
</div>

<!-- Image Upload Containers (Initially Hidden) -->
<div id="proximalHandContainerExtreme" style="display: none;">
    <div class="hand-wrapper" id="proximalLeftHandWrapper">
        <div class="upload-section">
            <label for="proximalLeftHandUpload">Upload Left Hand Image:</label>
            <input type="file" id="proximalLeftHandUpload" name="proximalLeftHandUpload" accept="image/*">
        </div>
        <div class="preview-container">
            <img id="proximalLeftHandPreview" class="hidden" alt="Left Hand Preview">
        </div>
    </div>

    <div class="hand-wrapper" id="proximalRightHandWrapper">
        <div class="upload-section">
            <label for="proximalRightHandUpload">Upload Right Hand Image:</label>
            <input type="file" id="proximalRightHandUpload" name="proximalRightHandUpload" accept="image/*">
        </div>
        <div class="preview-container">
            <img id="proximalRightHandPreview" class="hidden" alt="Right Hand Preview">
        </div>
    </div>
</div>

<!-- Wound Description (Initially Hidden) -->
<textarea id="proximalWoundDescription" name="proximalWoundDescription" rows="4"
    placeholder="Describe the wound(s): location, size, appearance..." style="display: none;">
</textarea>

<script>
    // DOM Elements
    const proximalWoundRadios = document.getElementsByName("proximalOpenWounds");
    const proximalHandSelection = document.getElementById("proximalHandSelection");
    const proximalHandContainer = document.getElementById("proximalHandContainerExtreme");
    const proximalHandSelect = document.getElementById("proximalHandSelectExtreme");
    const proximalLeftHandWrapper = document.getElementById("proximalLeftHandWrapper");
    const proximalRightHandWrapper = document.getElementById("proximalRightHandWrapper");
    const proximalWoundDescription = document.getElementById("proximalWoundDescription");

    // File Upload Elements
    const proximalLeftHandUpload = document.getElementById("proximalLeftHandUpload");
    const proximalRightHandUpload = document.getElementById("proximalRightHandUpload");
    const proximalLeftHandPreview = document.getElementById("proximalLeftHandPreview");
    const proximalRightHandPreview = document.getElementById("proximalRightHandPreview");

    // Wound selection logic
    proximalWoundRadios.forEach(radio => {
        radio.addEventListener("change", function () {
            if (this.value === "yes") {
                proximalHandSelection.style.display = "block";
                proximalWoundDescription.style.display = "block";
            } else {
                proximalHandSelection.style.display = "none";
                proximalHandContainer.style.display = "none";
                proximalWoundDescription.style.display = "none";
            }
        });
    });

    // Hand selection logic
    proximalHandSelect.addEventListener("change", function () {
        proximalLeftHandWrapper.style.display = "none";
        proximalRightHandWrapper.style.display = "none";
        proximalHandContainer.style.display = "none";

        if (this.value === "left") {
            proximalLeftHandWrapper.style.display = "block";
            proximalHandContainer.style.display = "block";
        } else if (this.value === "right") {
            proximalRightHandWrapper.style.display = "block";
            proximalHandContainer.style.display = "block";
        } else if (this.value === "both") {
            proximalLeftHandWrapper.style.display = "block";
            proximalRightHandWrapper.style.display = "block";
            proximalHandContainer.style.display = "block";
        }
    });

    // File upload preview for left hand
    proximalLeftHandUpload.addEventListener("change", function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                proximalLeftHandPreview.src = e.target.result;
                proximalLeftHandPreview.classList.remove("hidden");
            };
            reader.readAsDataURL(file);
        }
    });

    // File upload preview for right hand
    proximalRightHandUpload.addEventListener("change", function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                proximalRightHandPreview.src = e.target.result;
                proximalRightHandPreview.classList.remove("hidden");
            };
            reader.readAsDataURL(file);
        }
    });
</script>

<style>
    .hidden {
        display: none;
    }
    .hand-wrapper {
        display: none;
        margin-top: 10px;
    }
    .preview-container img {
        max-width: 100%;
        max-height: 200px;
        margin-top: 10px;
        border: 1px solid #ddd;
        padding: 5px;
        background: #f8f8f8;
    }
</style>

        <hr style="border-top: 2px dotted black; width: 100%;">
        <!-- Open Wounds Question -->
        <label for="lowerExtremeSelect">EXAMINATION OF LOWER EXTREMITY: *</label>
<div class="radio-group" id="lowerExtremeWoundGroup">
    <label>
        <input type="radio" id="lowerExtremeNoWounds" name="lowerExtremeOpenWounds" value="no" checked required> No Open Wounds
    </label>
    <label>
        <input type="radio" id="lowerExtremeYesWounds" name="lowerExtremeOpenWounds" value="yes"> Open Wounds Present
    </label>
</div>

<!-- Limb Selection (Initially Hidden) -->
<div class="form-group" id="lowerExtremeLimbSelection" style="display: none;">
    <label for="lowerExtremeSelectLimb">Select Limb:</label>
    <select id="lowerExtremeSelectLimb" name="lowerExtremeSelectLimb">
        <option value="none">-- Select --</option>
        <option value="left">Left Leg</option>
        <option value="right">Right Leg</option>
        <option value="both">Both Legs</option>
    </select>
</div>

<!-- Image Upload Containers (Initially Hidden) -->
<div id="lowerExtremeContainerLimb" class="limb-container-lower-extreme" style="display: none;">
    <div class="limbs-wrapper" id="limbsWrapper">
        <div class="limb-wrapper" id="lowerExtremeLeftLimbWrapper">
            <div class="upload-section">
                <label for="lowerExtremeLeftLimbUpload">Upload Left Leg Image:</label>
                <input type="file" id="lowerExtremeLeftLimbUpload" name="lowerExtremeLeftLimbUpload" accept="image/*">
            </div>
            <div class="preview-container">
                <img id="lowerExtremeLeftLimbPreview" class="hidden" alt="Left Leg Preview">
            </div>
        </div>

        <div class="limb-wrapper" id="lowerExtremeRightLimbWrapper">
            <div class="upload-section">
                <label for="lowerExtremeRightLimbUpload">Upload Right Leg Image:</label>
                <input type="file" id="lowerExtremeRightLimbUpload" name="lowerExtremeRightLimbUpload" accept="image/*">
            </div>
            <div class="preview-container">
                <img id="lowerExtremeRightLimbPreview" class="hidden" alt="Right Leg Preview">
            </div>
        </div>
    </div>
</div>

<!-- Wound Description (Initially Hidden) -->
<textarea id="lowerExtremeWoundDescription" name="lowerExtremeWoundDescription" rows="4"
    placeholder="Describe the wound(s): location, size, appearance..." style="display: none;">
</textarea>

<script>
    // DOM Elements
    const lowerExtremeWoundRadios = document.getElementsByName("lowerExtremeOpenWounds");
    const lowerExtremeLimbSelection = document.getElementById("lowerExtremeLimbSelection");
    const lowerExtremeContainerLimb = document.getElementById("lowerExtremeContainerLimb");
    const lowerExtremeSelectLimb = document.getElementById("lowerExtremeSelectLimb");
    const lowerExtremeLeftLimbWrapper = document.getElementById("lowerExtremeLeftLimbWrapper");
    const lowerExtremeRightLimbWrapper = document.getElementById("lowerExtremeRightLimbWrapper");
    const lowerExtremeWoundDescription = document.getElementById("lowerExtremeWoundDescription");
    const limbsWrapper = document.getElementById("limbsWrapper");

    // File Upload Elements
    const lowerExtremeLeftLimbUpload = document.getElementById("lowerExtremeLeftLimbUpload");
    const lowerExtremeRightLimbUpload = document.getElementById("lowerExtremeRightLimbUpload");
    const lowerExtremeLeftLimbPreview = document.getElementById("lowerExtremeLeftLimbPreview");
    const lowerExtremeRightLimbPreview = document.getElementById("lowerExtremeRightLimbPreview");

    // Wound selection logic
    lowerExtremeWoundRadios.forEach(radio => {
        radio.addEventListener("change", function () {
            if (this.value === "yes") {
                lowerExtremeLimbSelection.style.display = "block";
                lowerExtremeWoundDescription.style.display = "block";
            } else {
                lowerExtremeLimbSelection.style.display = "none";
                lowerExtremeContainerLimb.style.display = "none";
                lowerExtremeWoundDescription.style.display = "none";
            }
        });
    });

    // Limb selection logic
    lowerExtremeSelectLimb.addEventListener("change", function () {
        lowerExtremeLeftLimbWrapper.style.display = "none";
        lowerExtremeRightLimbWrapper.style.display = "none";
        lowerExtremeContainerLimb.style.display = "none";
        limbsWrapper.classList.remove("show-side-by-side");

        if (this.value === "left") {
            lowerExtremeLeftLimbWrapper.style.display = "block";
            lowerExtremeContainerLimb.style.display = "block";
        } else if (this.value === "right") {
            lowerExtremeRightLimbWrapper.style.display = "block";
            lowerExtremeContainerLimb.style.display = "block";
        } else if (this.value === "both") {
            lowerExtremeLeftLimbWrapper.style.display = "block";
            lowerExtremeRightLimbWrapper.style.display = "block";
            lowerExtremeContainerLimb.style.display = "block";
            limbsWrapper.classList.add("show-side-by-side");
        }
    });

    // File upload preview for left leg
    lowerExtremeLeftLimbUpload.addEventListener("change", function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                lowerExtremeLeftLimbPreview.src = e.target.result;
                lowerExtremeLeftLimbPreview.classList.remove("hidden");
            };
            reader.readAsDataURL(file);
        }
    });

    // File upload preview for right leg
    lowerExtremeRightLimbUpload.addEventListener("change", function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                lowerExtremeRightLimbPreview.src = e.target.result;
                lowerExtremeRightLimbPreview.classList.remove("hidden");
            };
            reader.readAsDataURL(file);
        }
    });
</script>

<style>
    .hidden {
        display: none;
    }
    .limbs-wrapper {
        display: flex;
        flex-direction: column;
        gap: 20px;
        width: 100%;
    }
    .limb-wrapper {
        display: none;
        margin-bottom: 15px;
    }
    /* Side-by-side layout for both legs selection */
    .show-side-by-side {
        flex-direction: row !important;
    }
    .show-side-by-side .limb-wrapper {
        width: 48%;
    }
    .preview-container img {
        max-width: 100%;
        max-height: 200px;
        margin-top: 10px;
        border: 1px solid #ddd;
        padding: 5px;
        background: #f8f8f8;
    }
</style>

         <hr style="border-top: 2px dotted black; width: 100%;">
         <label for="exam" class="form-label">EXAMINATION OF CHEST (INCLUDING CLAVICLE): *</label>

<div class="radio-group" id="chestInjuryAssessment">
    <label>
        <input type="radio" name="chestInjury" id="chestInjuryNo" value="no" checked required> No Injury to Chest
    </label>
    <label>
        <input type="radio" name="chestInjury" id="chestInjuryYes" value="yes"> Injury to Chest Present
    </label>
</div>

<div id="chestInjuryDetails" style="display: none;">
    <div class="form-group mt-3">
        <label for="chestInjuryImage">Upload Image of Chest Injury:</label>
        <input type="file" id="chestInjuryImage" name="chestInjuryImage" class="form-control" accept="image/*" onchange="previewChestImage(this)">
        
        <!-- Image Preview Container -->
        <div id="chestImagePreviewContainer" class="mt-2" style="display: none;">
            <img id="chestImagePreview" src="#" alt="Chest Injury Preview" style="max-width: 100%; max-height: 300px; border: 1px solid #ddd; border-radius: 4px; padding: 5px;">
        </div>
    </div>
    
    <div class="form-group mt-3">
        <label for="chestInjuryDescription">Describe the injury:</label>
        <textarea 
            id="chestInjuryDescription" 
            name="chestInjuryDescription"
            rows="4" 
            class="form-control"
            placeholder="Describe the injury: location, size, appearance, etc."></textarea>
    </div>
</div>

<script>
    // Show/Hide injury details when radio buttons are changed
    const injuryRadios = document.getElementsByName('chestInjury');
    const injuryDetails = document.getElementById('chestInjuryDetails');
    
    injuryRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            injuryDetails.style.display = this.value === 'yes' ? 'block' : 'none';
            
            // Clear image preview when switching to "No injury"
            if (this.value === 'no') {
                document.getElementById('chestImagePreviewContainer').style.display = 'none';
                document.getElementById('chestImagePreview').src = '#';
                document.getElementById('chestInjuryImage').value = '';
            }
        });
    });
    
    // Function to preview the uploaded image
    function previewChestImage(input) {
        const previewContainer = document.getElementById('chestImagePreviewContainer');
        const preview = document.getElementById('chestImagePreview');
        
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                preview.src = e.target.result;
                previewContainer.style.display = 'block';
            }
            
            reader.readAsDataURL(input.files[0]);
        } else {
            preview.src = '#';
            previewContainer.style.display = 'none';
        }
    }
</script>
        <hr style="border-top: 2px dotted black; width: 100%;">
        <label for="exam" class="form-label">EXAMINATION OF SPINE: *</label>
    <div class="container-spine">
        <p>Are the findings within normal limits??</p>
        <label>
            <input type="radio" name="normalLengthSpine"id="spine435" value="yes" required> Yes
        </label>
        <label>
            <input type="radio" name="normalLengthSpine" value="no" id="spine45"> No
        </label>

        <textarea 
            id="descriptionBoxSpine" 
            rows="4" 
            placeholder="Describe ..."
        ></textarea>
    </div>

    <script>
        const radioButtonsSpine = document.getElementsByName("normalLengthSpine");
        const descriptionBoxSpine = document.getElementById("descriptionBoxSpine");

        // Event listener to show/hide description box
        radioButtonsSpine.forEach(radio => {
            radio.addEventListener("change", function() {
                descriptionBoxSpine.style.display = this.value === "no" ? "block" : "none";
            });
        });
    </script>
    <hr style="border-top: 2px dotted black; width: 100%;">
    <label for="exam" class="form-label">EXAMINATION OF ABDOMEN: *</label>
    
    <div class="container-abdomen">
        <p>Are the findings within normal??</p>
        <label>
            <input type="radio" name="normalLengthabdomen" id="abd12"value="yes" required> Yes
        </label>
        <label>
            <input type="radio" name="normalLengthabdomen"id="abd364" value="no"> No
        </label>

        <textarea 
            id="descriptionBoxabdomen" 
            rows="4" 
            placeholder="Describe ..."
        ></textarea>
    </div>

    <script>
        const radioButtonsabdomen = document.getElementsByName("normalLengthabdomen");
        const descriptionBoxabdomen = document.getElementById("descriptionBoxabdomen");

        // Event listener to show/hide description box
        radioButtonsabdomen.forEach(radio => {
            radio.addEventListener("change", function() {
                descriptionBoxabdomen.style.display = this.value === "no" ? "block" : "none";
            });
        });
    </script>
    <hr style="border-top: 2px dotted black; width: 100%;">
                     <label for="head" class="form-label">HEAD INJURY STATUS:</label>
                     <h6>History of:</h6>
                     <div class="row">
                         <div class="col-md-4">
                             <label for="cons" class="form-label">Loss of Consciousness: *</label>
                             <select class="form-select" name="Loss of consciousness" id="consciousness" required>
                                 <option value="yes">Yes</option>
                                 <option value="no">No</option>
                                 </select>
                         </div>
                         <div class="col-md-4">
                             <label for="bleed" class="form-label">ENT Bleed: *</label>
                             <select class="form-select" name="ent bleed" id="entbleed" required>
                                 <option value="yes">Yes</option>
                                 <option value="no">No</option>
                                 </select>
                         </div>
                         <div class="col-md-4">
                             <label for="vomit" class="form-label">Vomiting: *</label>
                             <select class="form-select" name="vomiting" id="vomiting" required>
                                 <option value="yes">Yes</option>
                                 <option value="no">No</option>
                                 </select>
                         </div>
                     </div>
                     
                    <div class="container gcs-container">
                        <div class="row">
                            <div class="col-12 text-center mb-3">
                                <label for="glascow">Glasgow Coma Scale: *</label>
                            </div>
                        </div>
                        <div class="row">
                            <!-- Eye Response (E) -->
                            <div class="col-md-4">
                                <label for="eyeResponse">E =</label>
                                <select id="eyeResponse" name="eye response" class="form-select d-inline w-auto" required>
                                    <option value="">__</option>
                                    <script>
                                        for (let i = 1; i <= 4; i++) {
                                            document.write(`<option value="${i}">${i}</option>`);
                                        }
                                    </script>
                                </select> /4
                            </div>
                            <!-- Verbal Response (V) -->
                            <div class="col-md-4">
                                <label for="verbalResponse">V =</label>
                                <select id="verbalResponse" name="verbalresponse" class="form-select d-inline w-auto" required>
                                    <option value="">__</option>
                                    <script>
                                        for (let i = 1; i <= 5; i++) {
                                            document.write(`<option value="${i}">${i}</option>`);
                                        }
                                    </script>
                                </select> /5
                            </div>
                            <!-- Motor Response (M) -->
                            <div class="col-md-4">
                                <label for="motorResponse">M =</label>
                                <select id="motorResponse" name="motorresponse" class="form-select d-inline w-auto" required>
                                    <option value="">__</option>
                                    <script>
                                        for (let i = 1; i <= 6; i++) {
                                            document.write(`<option value="${i}">${i}</option>`);
                                        }
                                    </script>
                                </select> /6
                            </div>
                        </div>
                    </div>
                    <hr style="border-top: 2px dotted black; width: 100%;">
                    <label for="diagnosis" class="form-label">DIAGNOSIS: *</label>
                   
                    <div class="container">
                        
                        <textarea id="diagnosis1" name="diagnosis" placeholder="Enter diagnosis details..." required></textarea>
                    </div>
                    <hr style="border-top: 2px dotted black; width: 100%;">
                     <label for="further" name="further investigations" class="form-label">Further investigations: *</label>
                     <input type="text"  name="further investigations" for="form-control" id="furtherinvestigations" required>
                     
                     <table id="finaltable" style="width: 100%;">
                        <tr>
                            <th>INITIAL TREATMENT GIVEN</th>
                            <th>PROVISIONAL PLAN FOR FURTHER MANAGEMENT</th>
                        </tr>
                        <tr>
                            <td style="text-align: left; vertical-align: top;">
                                <div style="text-align: left;">
                                    <input type="checkbox" id="woundLavage"> <label for="woundLavage">Wound Lavage</label><br>
                                    <input type="checkbox" id="woundSuturing"> <label for="woundSuturing">Wound Suturing</label><br>
                                    <input type="checkbox" id="reductionDislocations"> <label for="reductionDislocations">Reduction Of Dislocations/Fractures</label><br>
                                    <input type="checkbox" id="dressing"> <label for="dressing">Dressing</label><br>
                                    <input type="checkbox" id="compressionBandage"> <label for="compressionBandage">Compression Bandage</label><br>
                                    <input type="checkbox" id="popSlabCast"> <label for="popSlabCast">Pop Slab/Cast</label><br>
                                    <input type="checkbox" id="postedDebridement"> <label for="postedDebridement">Posted For Debridement</label><br>
                                    <input type="checkbox" id="othersCheckbox" onclick="toggleInput('othersText')"> <label for="othersCheckbox">Others (Please Specify)</label>
                                    <input type="text" id="othersText" style="display: none;">
                                </div>
                            </td>
                            <td style="text-align: left; vertical-align: top;">
                                <div style="text-align: left;">
                                    <input type="checkbox" id="emergencyOT"> <label for="emergencyOT">Posted For Emergency OT</label><br>
                                    <input type="checkbox" id="admitOptimize"> <label for="admitOptimize">Admit And Optimize Before OT</label><br>
                                    <input type="checkbox" id="electiveOT"> <label for="electiveOT">Posted For Elective OT</label><br>
                                    <input type="checkbox" id="dischargeAgainstAdvice"> <label for="dischargeAgainstAdvice">Discharge Against Medical Advice</label><br>
                                    <input type="checkbox" id="coTreatment"> <label for="coTreatment">Co-Treatment On Consultation Basis</label><br>
                                    <input type="checkbox" id="needsReassessment"> <label for="needsReassessment">Needs Reassessment</label><br>
                                    <input type="checkbox" id="referCheckbox" onclick="toggleInput('referText')"> <label for="referCheckbox">Refer To</label>
                                    <input type="text " id="referText" style="display: none;"> Department, And To Take Over After Primary Intervention<br>
                                    <input type="checkbox" id="treatmentCompleted"> <label for="treatmentCompleted">Treatment Completed And Sent Home</label><br>
                                    <input type="checkbox" id="reviewCheckbox" onclick="toggleInput('reviewDate'); toggleInput('investigationsText');"> <label for="reviewCheckbox">Review in Hand surgery OPD on</label>
                                    <input type="date" id="reviewDate" style="display: none;"> with following investigations<br>
                                    <textarea id="investigationsText" style="display: none;"></textarea>
                                </div>
                            </td>
                        </tr>
                    </table>
                    
                    <script>
                    function toggleInput(elementId) {
                        var element = document.getElementById(elementId);
                        if(element.style.display === "none") {
                            element.style.display = "inline-block";
                        } else {
                            element.style.display = "none";
                        }
                    }
                    </script>
                    
                    <hr style="border-top: 2px dotted black; width: 100%;">
                     
                     <div class="container2">
                        <div class="column">
                            <label for="residentName">Attending Resident Name:</label>
                            <input type="text" id="residentName" name="residentName">
                            <label for="residentkmcId">Attending Resident Id:</label>
                            <input type="text" id="residentkmcId" name="residentkmcId">
                            <label for="residentDate">Date:</label>
                            <input type="date" id="residentDate" name="residentDate">
                            <label for="residentTime">Time:</label>
                            <input type="time" id="residentTime" name="residentTime">
                        </div>
                        <div class="column">
                            <label for="staffName">Attending Staff Name:</label>
                            <input type="text" id="staffName" name="staffName">
                            <label for="staffkmcId">Attending Staff Id:</label>
                            <input type="text" id="staffkmcId" name="staffkmcId">
                            <label for="staffDate">Date:</label>
                            <input type="date" id="staffDate" name="staffDate">
                            <label for="staffTime">Time:</label>
                            <input type="time" id="staffTime" name="staffTime">
                        </div>
                    </div>
                    <script>
                        
                    // Function to set current date and time
        function setCurrentDateTime() {
            const now = new Date();
            
            // Format date as YYYY-MM-DD for input date fields
            const dateString = now.toISOString().slice(0, 10);
            
            // Format time as HH:MM for input time fields
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const timeString = `${hours}:${minutes}`;
            
            // Set date and time for resident fields
            document.getElementById('residentDate').value = dateString;
            document.getElementById('residentTime').value = timeString;
            
            // Set date and time for staff fields
            document.getElementById('staffDate').value = dateString;
            document.getElementById('staffTime').value = timeString;
        }
        
        window.onload = function() {
            setCurrentDateTime();
            
        };
    </script>
                    <hr style="border: 1px solid #000; margin-top: 20px;">
                    <label for="videos" class="form-label fw-bold">Upload Video Files (Max 5)</label>
    <input type="file" id="videoInput" accept="video/*" multiple>
    <br><br>
    <div id="videoContainer"></div>
    <script>
        document.getElementById('videoInput').addEventListener('change', function(event) {
            const files = event.target.files;
            const videoContainer = document.getElementById('videoContainer');
            videoContainer.innerHTML = "";
            
            if (files.length > 5) {
                alert("You can upload a maximum of 5 videos.");
                return;
            }
            
            for (let i = 0; i < files.length; i++) {
                const videoPlayer = document.createElement('video');
                videoPlayer.width = 300;
                videoPlayer.controls = true;
                videoPlayer.src = URL.createObjectURL(files[i]);
                videoContainer.appendChild(videoPlayer);
            }
        });
    </script>
            <div class="row">
             <div class="col-md-6">
           <button id="add-to-database-button1" type="button" class="btn btn-warning btn-block mr-1">Add to Database</button>
         </div>
         <div class="col-md-6">
             <button id="generatepdf" type="button" class="btn btn-warning btn-block mr-1">Generate Pdf</button>
         </div> </div>
                     
         </form></div>
     </div>
    </div></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
          // Get references to the button and form
          const showButton = document.getElementById('showForm2Button');
          const form2 = document.getElementById('form2');
          
          // Add click event listener to the button
          showButton.addEventListener('click', function() {
            // Show the form when the button is clicked
            form2.style.display = 'block';
            
            // Optionally hide the button after showing the form
            // showButton.style.display = 'none';
          });
        });
        </script>
   <div class="container" id="add_patient2" >
     <h3>Acute Hand Injury Sheet( Part 2 )</h3>
     <!-- Button to show the form -->
<button type="button" id="showForm2Button" class="btn btn-primary">Enter Details:</button>
     <div class="well">
       <form id="form2" style="display: none;">
        <div class="row mb-3">
            <div class="col-md-6">
              <label for="PName" name="patient name" class="form-label">Patient Name *</label>
              <input type="text" name="patient name" class="form-control" id="patientName" required>
            </div>
            <div class="col-md-6">
              <label for="PAge" name="patient age" class="form-label">Patient Age *</label>
              <input type="text" name="patient age" class="form-control" id="P1" required>
            </div>
          </div>
          
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Hand Dominance: *</label>
              <div class="d-flex justify-content-center gap-3">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="Dominance" id="Left8" value="Left" required>
                  <label class="form-check-label" for="Left">Left</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="Dominance" id="Right8" value="Right">
                  <label class="form-check-label" for="Right">Right</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="Dominance" id="Ambidextrous98" value="Ambidextrous">
                  <label class="form-check-label" for="Ambidextrous">Ambidextrous</label>
                </div>
              </div>
            </div>
            
            <div class="col-md-6">
              <label class="form-label">Sex: *</label>
              <div class="d-flex justify-content-center gap-3">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="Sex" id="Male86" value="Male" required>
                  <label class="form-check-label" for="Male">Male</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="Sex" id="Female567" value="Female">
                  <label class="form-check-label" for="Female">Female</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="Sex" id="Otherso" value="Others">
                  <label class="form-check-label" for="Others">Others</label>
                </div>
              </div>
            </div>
          </div>
          
         <div class="mb-3">
           <label for="HNum" class="form-label">Hospital No: *</label>
           <input type="text"  name="Hospital Number" class="form-control" id="HNum1" required>
         </div>
         <hr style="border-top: 2px dotted black; width: 100%;">

         <h3>A. INTEGUMENT LOSS *</h3>
         <div class="d-flex justify-content-center gap-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="ingumentstatus" id="Left765" value="Left" required>
              <label class="form-check-label" for="Left">Present</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="injumentstatus" id="Right098" value="Right">
              <label class="form-check-label" for="Right">Absent</label>
            </div>
          </div>
<hr style="border-top: 2px dotted black; width: 100%;">
         
        <!-- Add radio buttons to indicate if there's a fingertip injury -->
<div class="form-check form-check-inline mb-3">
    <input class="form-check-input" type="radio" name="hasFingerTipInjury" id="hasFingerTipInjuryYes" onchange="toggleFingerTipInjuryTable(true)">
    <label class="form-check-label" for="hasFingerTipInjuryYes">
      Finger Tip Injury: Yes
    </label>
  </div>
  <div class="form-check form-check-inline mb-3">
    <input class="form-check-input" type="radio" name="hasFingerTipInjury" id="hasFingerTipInjuryNo" onchange="toggleFingerTipInjuryTable(false)" checked>
    <label class="form-check-label" for="hasFingerTipInjuryNo">
      Finger Tip Injury: No
    </label>
  </div>
  
  <!-- Fingertip injury section that will be conditionally displayed -->
  <div id="fingerTipInjurySection" style="display: none;">
    <h4>FINGER TIP INJURY *</h4>
    <h5>Procedure</h5>
    <table class="table table-bordered text-center">
      <thead>
        <tr>
          <th>Procedure</th>
          <th>Type</th>
          <th>Thumb / 1st ray</th>
          <th>Index / 2nd ray</th>
          <th>Middle / 3rd ray</th>
          <th>Ring / 4th ray</th>
          <th>Little / 5th ray</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Nail Bed Primary Repair</td>
          <td>-</td>
          <td><input type="checkbox" id="oneone"></td>
          <td><input type="checkbox" id="threethree"></td>
          <td><input type="checkbox" id="cdnvsj"></td>
          <td><input type="checkbox" id="dvs"></td>
          <td><input type="checkbox" id="vkj"></td>
        </tr>
        <tr>
          <td rowspan="2">Nail Bed Grafting</td>
          <td>With Flap</td>
          <td><input type="checkbox" id="rt"></td>
          <td><input type="checkbox" id="yt"></td>
          <td><input type="checkbox" id="sdfa"></td>
          <td><input type="checkbox" id="rr"></td>
          <td><input type="checkbox" id="dfgth"></td>
        </tr>
        <tr>
          <td>Without Flap</td>
          <td><input type="checkbox" id="rtw"></td>
          <td><input type="checkbox" id="ytm"></td>
          <td><input type="checkbox" id="t"></td>
          <td><input type="checkbox" id="rr5"></td>
          <td><input type="checkbox" id="v"></td>
        </tr>
        <tr>
          <td>Nail Bed Excision</td>
          <td>-</td>
          <td><input type="checkbox" id="rthj"></td>
          <td><input type="checkbox" id="ytl"></td>
          <td><input type="checkbox" id="jh"></td>
          <td><input type="checkbox" id="rrkj"></td>
          <td><input type="checkbox" id="lkj"></td>
        </tr>
        <tr>
          <td rowspan="2">Terminalization</td>
          <td>With Shortening</td>
          <td><input type="checkbox" id="dc"></td>
          <td><input type="checkbox" id="fdfb"></td>
          <td><input type="checkbox" id="vdsf"></td>
          <td><input type="checkbox" id="e4re"></td>
          <td><input type="checkbox" id="df"></td>
        </tr>
        <tr>
          <td>Without Shortening</td>
          <td><input type="checkbox" id="njkh"></td>
          <td><input type="checkbox" id="654"></td>
          <td><input type="checkbox" id="bvgf"></td>
          <td><input type="checkbox" id="hgfh"></td>
          <td><input type="checkbox" id="fdgh"></td>
        </tr>
        <tr>
          <td>Ray Amputation</td>
          <td>-</td>
          <td><input type="checkbox" id="njik"></td>
          <td><input type="checkbox" id="lkjm"></td>
          <td><input type="checkbox" id="jkhj"></td>
          <td><input type="checkbox" id="kjl"></td>
          <td><input type="checkbox" id="hjkmnj"></td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <!-- JavaScript to toggle the visibility of the table -->
  <script>
  function toggleFingerTipInjuryTable(isVisible) {
    const section = document.getElementById('fingerTipInjurySection');
    section.style.display = isVisible ? 'block' : 'none';
  }
  
  // Initialize to hide the table by default (since "No" is checked)
  document.addEventListener('DOMContentLoaded', function() {
    toggleFingerTipInjuryTable(false);
  });
  </script>
          <hr style="border-top: 2px dotted black; width: 100%;">
          <h5>DIGITS:</h5>
          <label for="form-label" class="form-label fw-bold">Findings - Primary Soft Tissue Coverage: *</label>
          
          <div class="d-flex justify-content-center gap-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="SoftTissueCoverage" id="SoftTissuePresent" value="Present" onclick="toggleTables(true)" required>
              <label class="form-check-label" for="SoftTissuePresent">Present</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="SoftTissueCoverage" id="SoftTissueAbsent" value="Absent" onclick="toggleTables(false)">
              <label class="form-check-label" for="SoftTissueAbsent">Absent</label>
            </div>
          </div>
          
          <!-- DIGITS Table -->
          <div id="digitsTable" style="display: none;">
            <table class="table table-bordered text-center mt-3">
                <thead>
                    <tr>
                        <th>DIGITS</th>
                        <th>Thumb</th>
                        <th>Index</th>
                        <th>Middle</th>
                        <th>Ring</th>
                        <th>Little</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Palmar</td>
                        <td><input type="checkbox" id="palmar_thumb" name="palmar_thumb"></td>
                        <td><input type="checkbox" id="palmar_index" name="palmar_index"></td>
                        <td><input type="checkbox" id="palmar_middle" name="palmar_middle"></td>
                        <td><input type="checkbox" id="palmar_ring" name="palmar_ring"></td>
                        <td><input type="checkbox" id="palmar_little" name="palmar_little"></td>
                    </tr>
                    <tr>
                        <td>Dorsal</td>
                        <td><input type="checkbox" id="dorsal_thumb" name="dorsal_thumb"></td>
                        <td><input type="checkbox" id="dorsal_index" name="dorsal_index"></td>
                        <td><input type="checkbox" id="dorsal_middle" name="dorsal_middle"></td>
                        <td><input type="checkbox" id="dorsal_ring" name="dorsal_ring"></td>
                        <td><input type="checkbox" id="dorsal_little" name="dorsal_little"></td>
                    </tr>
                </tbody>
            </table>
        </div>
          
          <!-- PROCEDURE Table -->
          <div id="procedureTable" style="display: none;">
            <h5>Procedure:</h5>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>SSG</td>
                        <td><input type="checkbox" id="procedure_ssg" name="procedure_ssg"></td>
                    </tr>
                    <tr>
                        <td>Flap - Local rotational flap</td>
                        <td><input type="checkbox" id="procedure_local_flap" name="procedure_local_flap"></td>
                    </tr>
                    <tr>
                        <td>&emsp; a. Same finger</td>
                        <td><input type="checkbox" id="procedure_same_finger" name="procedure_same_finger"></td>
                    </tr>
                    <tr>
                        <td>&emsp; b. Cross finger</td>
                        <td><input type="checkbox" id="procedure_cross_finger" name="procedure_cross_finger"></td>
                    </tr>
                    <tr>
                        <td>Flap - Free flap</td>
                        <td><input type="checkbox" id="procedure_free_flap" name="procedure_free_flap"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
          <script>
            function toggleTables(show) {
              document.getElementById("digitsTable").style.display = show ? "block" : "none";
              document.getElementById("procedureTable").style.display = show ? "block" : "none";
            }
          </script>
          <hr style="border-top: 2px dotted black; width: 100%;">
          <div class="container">
            <div class="radio-group">
                <label>
                    <input type="radio" name="critical" id="whatt" value="exposed" onclick="document.getElementById('joint_table').classList.remove('hidden')"> 
                    Critical Structure Exposed
                </label>
                &nbsp;&nbsp;&nbsp;
                <label>
                    <input type="radio" name="critical" id="csne1" value="not_exposed" onclick="document.getElementById('joint_table')"> 
                    Critical Structure NOT Exposed
                </label>
            </div>
            
            <table id="joint_table" >
                <thead>
                    <tr>
                        <th>Region</th>
                        <th>Volar Skin Loss (in cm²)<br>Critical Structure Exposed</th>
                        <th>Dorsum Skin Loss (in cm²)<br>Critical Structure Exposed</th>
                    </tr>
                </thead>
                <tbody>
                    <tr> 
                        <td>Arm</td>
                        <td><input type="text" id="arm_volar_skin_loss" name="arm_volar_skin_loss"></td>
                        <td><input type="text" id="arm_dorsum_skin_loss" name="arm_dorsum_skin_loss"></td>

                    </tr>
                    <tr>
                        <td>Forearm</td>
                        <td><input type="text" id="forearm_volar_skin_loss" name="forearm_volar_skin_loss"></td>
                        <td><input type="text" id="forearm_dorsum_skin_loss" name="forearm_dorsum_skin_loss"></td>
                    </tr>
                    <tr>
                        <td>Hand</td>
                        <td><input type="text" id="hand_volar_skin_loss" name="hand_volar_skin_loss"></td>
                        <td><input type="text" id="hand_dorsum_skin_loss" name="hand_dorsum_skin_loss"></td>
                    </tr>
                </tbody>
            </table>            
     

     <hr style="border: 1px solid #000; margin-top: 20px;">
     <h3>B. SKELETAL STRUCTURAL INJURY- *</h3>
     <!-- Skeletal Radio Buttons -->
<div class="d-flex justify-content-center gap-3">
    <div class="form-check">
      <input class="form-check-input" type="radio" name="Skeletal" id="SKELETAL_Present" value="Present" onclick="toggleSkeletalTable()" required>
      <label class="form-check-label" for="SKELETAL_Present">Present</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="Skeletal" id="SKELETAL_Absent" value="Absent" onclick="toggleSkeletalTable()">
      <label class="form-check-label" for="SKELETAL_Absent">Absent</label>
    </div>
  </div>
  
  <!-- Skeletal Table (Initially Hidden) -->
  <div id="skeletalTable" style="display: none;">
    <table class="table table-bordered text-center">
      <thead>
        <tr>
          <th rowspan="2">Category</th>
          <th rowspan="2">Type</th>
          <th colspan="2">Thumb</th>
          <th colspan="2">Index</th>
          <th colspan="2">Middle</th>
          <th colspan="2">Ring</th>
          <th colspan="2">Little</th>
        </tr>
        <tr>
          <th>Present</th>
          <th>Bone Loss / Comminution</th>
          <th>Present</th>
          <th>Bone Loss / Comminution</th>
          <th>Present</th>
          <th>Bone Loss / Comminution</th>
          <th>Present</th>
          <th>Bone Loss / Comminution</th>
          <th>Present</th>
          <th>Bone Loss / Comminution</th>
        </tr>
      </thead>
      <tbody>
        <!-- Digital Fractures -->
        <tr><td rowspan="5"><b>Digital Fractures</b></td><td>DPx</td><td><input type="checkbox" id="dpx1"></td><td><input type="checkbox" id="dpx2"></td><td><input type="checkbox"id="dpx3"></td><td><input type="checkbox" id="dpx4"></td><td><input type="checkbox" id="dpx5"></td><td><input type="checkbox" id="dpx6"></td><td><input type="checkbox" id="dpx7"></td><td><input type="checkbox" id="dpx8"></td><td><input type="checkbox" id="dpx9"></td><td><input type="checkbox" id="dpx10"></td></tr>
        <tr><td>DIPJ</td><td><input type="checkbox" id="dpx11"></td><td><input type="checkbox" id="dpx12"></td><td><input type="checkbox" id="dpx13"></td><td><input type="checkbox" id="dpx14"></td><td><input type="checkbox" id="dpx15"></td><td><input type="checkbox" id="dpx16"></td><td><input type="checkbox" id="dpx17"></td><td><input type="checkbox" id="dpx18"></td><td><input type="checkbox" id="dpx19"></td><td><input type="checkbox" id="dpx20"></td></tr>
        <tr><td>MPx</td><td><input type="checkbox" id="dpx21"></td><td><input type="checkbox" id="dpx22"></td><td><input type="checkbox" id="dpx23"></td><td><input type="checkbox" id="dpx24"></td><td><input type="checkbox" id="dpx25"></td><td><input type="checkbox" id="dpx26"></td><td><input type="checkbox" id="dpx27"></td><td><input type="checkbox" id="dpx28"></td><td><input type="checkbox" id="dpx29"></td><td><input type="checkbox" id="dpx30"></td></tr>
        <tr><td>PIPJ</td><td><input type="checkbox"id="dpx31"></td><td><input type="checkbox" id="dpx32"></td><td><input type="checkbox" id="dpx33"></td><td><input type="checkbox" id="dpx34"></td><td><input type="checkbox" id="dpx35"></td><td><input type="checkbox" id="dpx36"></td><td><input type="checkbox" id="dpx37"></td><td><input type="checkbox" id="dpx38"></td><td><input type="checkbox" id="dpx39"></td><td><input type="checkbox" id="dpx40"></td></tr>
        <tr><td>PPx</td><td><input type="checkbox"id="dpx41"></td><td><input type="checkbox" id="dpx42"></td><td><input type="checkbox" id="dpx43"></td><td><input type="checkbox" id="dpx44"></td><td><input type="checkbox" id="dpx45"></td><td><input type="checkbox" id="dpx45"></td><td><input type="checkbox" id="dpx46"></td><td><input type="checkbox" id="dpx47"></td><td><input type="checkbox" id="dpx48"></td><td><input type="checkbox" id="dpx49"></td></tr>
  
        <!-- Metacarpal -->
        <tr><td rowspan="4"><b>Metacarpal</b></td><td>Head</td><td><input type="checkbox" id="met1"></td><td><input type="checkbox" id="met2"></td><td><input type="checkbox"></td><td><input type="checkbox" id="met3"></td><td><input type="checkbox" id="met4"></td><td><input type="checkbox" id="met5"></td><td><input type="checkbox" id="met6"></td><td><input type="checkbox" id="met7"></td><td><input type="checkbox" id="met8"></td><td><input type="checkbox" id="met9"></td></tr>
        <tr><td>Neck</td><td><input type="checkbox" id="met10"></td><td><input type="checkbox" id="met11"></td><td><input type="checkbox"id="met12"></td><td><input type="checkbox" id="met13"></td><td><input type="checkbox" id="met14"></td><td><input type="checkbox" id="met15"></td><td><input type="checkbox" id="met16"></td><td><input type="checkbox" id="met17"></td><td><input type="checkbox" id="met18"></td><td><input type="checkbox" id="met19"></td></tr>
        <tr><td>Shaft</td><td><input type="checkbox" id="met20"></td><td><input type="checkbox" id="met21"></td><td><input type="checkbox"id="met21"></td><td><input type="checkbox" id="met22"></td><td><input type="checkbox" id="met23"></td><td><input type="checkbox" id="met24"></td><td><input type="checkbox" id="met25"></td><td><input type="checkbox" id="met26"></td><td><input type="checkbox" id="met27"></td><td><input type="checkbox" id="met28"></td></tr>
        <tr><td>Base</td><td><input type="checkbox" id="met29"></td><td><input type="checkbox" id="met30"></td><td><input type="checkbox" id="met31"></td><td><input type="checkbox" id="met32"></td><td><input type="checkbox"id="met33"></td><td><input type="checkbox" id="met34"></td><td><input type="checkbox" id="met35"></td><td><input type="checkbox" id="met36"></td><td><input type="checkbox" id="met37"></td><td><input type="checkbox" id="met38"></td></tr>
  
        <!-- Dislocation -->
        <tr><td rowspan="3"><b>Dislocation</b></td><td>DIP</td><td><input type="checkbox" id="dis1"></td><td><input type="checkbox" id="dis2"></td><td><input type="checkbox" id="dis13"></td><td><input type="checkbox" id="dis4"></td><td><input type="checkbox" id="dis5"></td><td><input type="checkbox" id="dis6"></td><td><input type="checkbox" id="dis7"></td><td><input type="checkbox" id="dis8"></td><td><input type="checkbox" id="dis9"></td><td><input type="checkbox" id="dis10"></td></tr>
        <tr><td>PIP</td><td><input type="checkbox" id="dis11"></td><td><input type="checkbox" id="dis12"></td><td><input type="checkbox" id="dis13"></td><td><input type="checkbox" id="dis14"></td><td><input type="checkbox" id="dis15"></td><td><input type="checkbox" id="dis16"></td><td><input type="checkbox" id="dis17"></td><td><input type="checkbox" id="dis18"></td><td><input type="checkbox" id="dis19"></td><td><input type="checkbox" id="dis20"></td></tr>
        <tr><td>MCP</td><td><input type="checkbox" id="dis21"></td><td><input type="checkbox" id="dis22"></td><td><input type="checkbox" id="dis23"></td><td><input type="checkbox" id="dis24"></td><td><input type="checkbox" id="dis25"></td><td><input type="checkbox" id="dis26"></td><td><input type="checkbox" id="dis27"></td><td><input type="checkbox" id="dis28"></td><td><input type="checkbox" id="dis29"></td><td><input type="checkbox" id="dis30"></td></tr>
  
        <!-- Ligament Injury -->
        <tr><td colspan="2"><b>Ligament Injury (Sprain/Rupture/Avulsion)</b></td><td colspan="10"><input type="checkbox" id="ligament"></td></tr>
      </tbody>
    </table>
  </div>
  
  <!-- JavaScript for Toggle -->
  <script>
  function toggleSkeletalTable() {
      var skeletalPresent = document.getElementById("SKELETAL_Present").checked;
      document.getElementById("skeletalTable").style.display = skeletalPresent ? "block" : "none";
  }
  </script>
  
  <table class="table table-bordered text-center" id="scaphoid">
    <thead>
      <tr>
        <th></th>
        <th>Scaphoid</th>
        <th>Lunate</th>
        <th>Triquetral</th>
        <th>Pisiform</th>
        <th>Trapezium</th>
        <th>Trapezoid</th>
        <th>Capitate</th>
        <th>Hamate</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><b>Conservative Treatment</b></td>
        <td><input type="checkbox" id="conservative_scaphoid"></td>
        <td><input type="checkbox" id="conservative_lunate"></td>
        <td><input type="checkbox" id="conservative_triquetral"></td>
        <td><input type="checkbox" id="conservative_pisiform"></td>
        <td><input type="checkbox" id="conservative_trapezium"></td>
        <td><input type="checkbox" id="conservative_trapezoid"></td>
        <td><input type="checkbox" id="conservative_capitate"></td>
        <td><input type="checkbox" id="conservative_hamate"></td>
      </tr>
      <tr>
        <td><b>External Fixation</b></td>
        <td><input type="checkbox" id="external_scaphoid"></td>
        <td><input type="checkbox" id="external_lunate"></td>
        <td><input type="checkbox" id="external_triquetral"></td>
        <td><input type="checkbox" id="external_pisiform"></td>
        <td><input type="checkbox" id="external_trapezium"></td>
        <td><input type="checkbox" id="external_trapezoid"></td>
        <td><input type="checkbox" id="external_capitate"></td>
        <td><input type="checkbox" id="external_hamate"></td>
      </tr>
      <tr>
        <td><b>ORIF</b></td>
        <td><input type="checkbox" id="orif_scaphoid"></td>
        <td><input type="checkbox" id="orif_lunate"></td>
        <td><input type="checkbox" id="orif_triquetral"></td>
        <td><input type="checkbox" id="orif_pisiform"></td>
        <td><input type="checkbox" id="orif_trapezium"></td>
        <td><input type="checkbox" id="orif_trapezoid"></td>
        <td><input type="checkbox" id="orif_capitate"></td>
        <td><input type="checkbox" id="orif_hamate"></td>
      </tr>
      <tr>
        <td><b>CRIF</b></td>
        <td><input type="checkbox" id="crif_scaphoid"></td>
        <td><input type="checkbox" id="crif_lunate"></td>
        <td><input type="checkbox" id="crif_triquetral"></td>
        <td><input type="checkbox" id="crif_pisiform"></td>
        <td><input type="checkbox" id="crif_trapezium"></td>
        <td><input type="checkbox" id="crif_trapezoid"></td>
        <td><input type="checkbox" id="crif_capitate"></td>
        <td><input type="checkbox" id="crif_hamate"></td>
      </tr>
    </tbody>
  </table>
  
  <table class="table table-bordered text-center" id="radius">
    <thead>
      <tr>
        <th></th>
        <th colspan="3">Radius</th>
        <th colspan="4">Ulna</th>
        <th colspan="3">Humerus</th>
      </tr>
      <tr>
        <th></th>
        <th>Head / Neck</th>
        <th>Shaft</th>
        <th>DER</th>
        <th>Olecranon</th>
        <th>Shaft</th>
        <th>Head</th>
        <th>Styloid</th>
        <th>Head</th>
        <th>Shaft</th>
        <th>DEH</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><b>Conservative Treatment</b></td>
        <td><input type="checkbox" id="conservative_radius_head"></td>
        <td><input type="checkbox" id="conservative_radius_shaft"></td>
        <td><input type="checkbox" id="conservative_radius_der"></td>
        <td><input type="checkbox" id="conservative_ulna_olecranon"></td>
        <td><input type="checkbox" id="conservative_ulna_shaft"></td>
        <td><input type="checkbox" id="conservative_ulna_head"></td>
        <td><input type="checkbox" id="conservative_ulna_styloid"></td>
        <td><input type="checkbox" id="conservative_humerus_head"></td>
        <td><input type="checkbox" id="conservative_humerus_shaft"></td>
        <td><input type="checkbox" id="conservative_humerus_deh"></td>
      </tr>
      <tr>
        <td><b>Bone Loss / Commination</b></td>
        <td><input type="checkbox" id="bone_radius_head"></td>
        <td><input type="checkbox" id="bone_radius_shaft"></td>
        <td><input type="checkbox" id="bone_radius_der"></td>
        <td><input type="checkbox" id="bone_ulna_olecranon"></td>
        <td><input type="checkbox" id="bone_ulna_shaft"></td>
        <td><input type="checkbox" id="bone_ulna_head"></td>
        <td><input type="checkbox" id="bone_ulna_styloid"></td>
        <td><input type="checkbox" id="bone_humerus_head"></td>
        <td><input type="checkbox" id="bone_humerus_shaft"></td>
        <td><input type="checkbox" id="bone_humerus_deh"></td>
      </tr>
      <tr>
        <td><b>External Fixation</b></td>
        <td><input type="checkbox" id="external_radius_head"></td>
        <td><input type="checkbox" id="external_radius_shaft"></td>
        <td><input type="checkbox" id="external_radius_der"></td>
        <td><input type="checkbox" id="external_ulna_olecranon"></td>
        <td><input type="checkbox" id="external_ulna_shaft"></td>
        <td><input type="checkbox" id="external_ulna_head"></td>
        <td><input type="checkbox" id="external_ulna_styloid"></td>
        <td><input type="checkbox" id="external_humerus_head"></td>
        <td><input type="checkbox" id="external_humerus_shaft"></td>
        <td><input type="checkbox" id="external_humerus_deh"></td>
      </tr>
      <tr>
        <td><b>ORIF</b></td>
        <td><input type="checkbox" id="orif_radius_head"></td>
        <td><input type="checkbox" id="orif_radius_shaft"></td>
        <td><input type="checkbox" id="orif_radius_der"></td>
        <td><input type="checkbox" id="orif_ulna_olecranon"></td>
        <td><input type="checkbox" id="orif_ulna_shaft"></td>
        <td><input type="checkbox" id="orif_ulna_head"></td>
        <td><input type="checkbox" id="orif_ulna_styloid"></td>
        <td><input type="checkbox" id="orif_humerus_head"></td>
        <td><input type="checkbox" id="orif_humerus_shaft"></td>
        <td><input type="checkbox" id="orif_humerus_deh"></td>
      </tr>
      <tr>
        <td><b>CRIF</b></td>
        <td><input type="checkbox" id="crif_radius_head"></td>
        <td><input type="checkbox" id="crif_radius_shaft"></td>
        <td><input type="checkbox" id="crif_radius_der"></td>
        <td><input type="checkbox" id="crif_ulna_olecranon"></td>
        <td><input type="checkbox" id="crif_ulna_shaft"></td>
        <td><input type="checkbox" id="crif_ulna_head"></td>
        <td><input type="checkbox" id="crif_ulna_styloid"></td>
        <td><input type="checkbox" id="crif_humerus_head"></td>
        <td><input type="checkbox" id="crif_humerus_shaft"></td>
        <td><input type="checkbox" id="crif_humerus_deh"></td>
      </tr>
    </tbody>
  </table>

           <hr style="border: 1px solid #000; margin-top: 20px;">
 
         <h3>C. MOTOR STRUCTURAL INJURY *</h3>
         <div class="d-flex justify-content-center gap-3">
            <input type="radio" id="motor_present" name="motor" value="Present" onchange="toggleTable()" required>
            <label for="motor_present" class="me-3">Present</label>
            <input type="radio" id="motor_absent" name="motor" value="Absent" onchange="toggleTable()">
            <label for="motor_absent">Absent</label>
          </div>
         <label for="Findings" class="form-label">Findings</label>
         <table id="assessment-table">
            <tr>
              <th colspan="2"></th>
              <th>Thumb</th>
              <th>Index</th>
              <th>Middle</th>
              <th>Ring</th>
              <th>Little</th>
            </tr>
            <tr>
              <td colspan="2"></td>
              <td>< 40% OR Complete</td>
              <td>< 40% OR Complete</td>
              <td>< 40% OR Complete</td>
              <td>< 40% OR Complete</td>
              <td>< 40% OR Complete</td>
            </tr>
            <tr>
              <td rowspan="4" class="vertical-header">Extensor tendon</td>
              <td class="zone-cell">Zone 1,2</td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_thumb_1_2"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_index_1_2"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_middle_1_2"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_ring_1_2"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_little_1_2"></td>
            </tr>
            <tr>
              <td class="zone-cell">Zone 3,4</td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_thumb_3_4"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_index_3_4"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_middle_3_4"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_ring_3_4"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_little_3_4"></td>
            </tr>
            <tr>
              <td class="zone-cell">Zone 5</td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_thumb_5"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_index_5"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_middle_5"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_ring_5"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_little_5"></td>
            </tr>
            <tr>
              <td class="zone-cell">Zone 6, 7, 8</td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_thumb_6_7_8"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_index_6_7_8"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_middle_6_7_8"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_ring_6_7_8"></td>
              <td class="checkbox-cell"><input type="checkbox" id="extensor_little_6_7_8"></td>
            </tr>
            <tr>
              <td rowspan="4" class="vertical-header">Flexor profundus (Including FPL)</td>
              <td class="zone-cell">Zone 1</td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_thumb_1"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_index_1"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_middle_1"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_ring_1"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_little_1"></td>
            </tr>
            <tr>
              <td class="zone-cell">Zone 2</td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_thumb_2"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_index_2"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_middle_2"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_ring_2"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_little_2"></td>
            </tr>
            <tr>
              <td class="zone-cell">Zone 3</td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_thumb_3"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_index_3"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_middle_3"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_ring_3"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_little_3"></td>
            </tr>
            <tr>
              <td class="zone-cell">Zone 4, 5 belly</td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_thumb_4_5"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_index_4_5"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_middle_4_5"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_ring_4_5"></td>
              <td class="checkbox-cell"><input type="checkbox" id="flexor_little_4_5"></td>
            </tr>
            <tr>
              <td colspan="2" class="vertical-header">Intrinsic muscles</td>
              <td colspan="5"><input type="text" class="text-input" id="intrinsic_muscles"></td>
            </tr>
            <tr>
              <td colspan="2" class="vertical-header">Crush / Avulsion</td>
              <td colspan="5"><input type="text" class="text-input" id="crush_avulsion"></td>
            </tr>
          </table>
          <script>
            function toggleTable() {
              const presentRadio = document.getElementById('motor_present');
              const table = document.getElementById('assessment-table');
              
              if (presentRadio.checked) {
                table.style.display = 'table';
              } else {
                table.style.display = 'none';
              }
            }
          </script>
         
         <table border="1" style="width: 100%; text-align: center; border-collapse: collapse;" id="origin45">
            <tr>
                <th rowspan="2">Arm</th>
                <th rowspan="2"></th>
                <th colspan="3">Muscle Details</th>
            </tr>
            <tr>
                <th>Origin</th>
                <th>Belly</th>
                <th>Insertion</th>
            </tr>
            <tr>
                <td rowspan="3"><b>Anterior Compartment</b></td>
                <td>Biceps brachii</td>
                <td><input type="checkbox" id="biceps-origin"></td>
                <td><input type="checkbox" id="biceps-belly"></td>
                <td><input type="checkbox" id="biceps-insertion"></td>
            </tr>
            <tr>
                <td>Coracobrachialis</td>
                <td><input type="checkbox" id="coraco-origin"></td>
                <td><input type="checkbox" id="coraco-belly"></td>
                <td><input type="checkbox" id="coraco-insertion"></td>
            </tr>
            <tr>
                <td>Brachialis muscles</td>
                <td><input type="checkbox" id="brachialis-origin"></td>
                <td><input type="checkbox" id="brachialis-belly"></td>
                <td><input type="checkbox" id="brachialis-insertion"></td>
            </tr>
            <tr>
                <td><b>Posterior Compartment</b></td>
                <td>Triceps brachii</td>
                <td><input type="checkbox" id="triceps-origin"></td>
                <td><input type="checkbox" id="triceps-belly"></td>
                <td><input type="checkbox" id="triceps-insertion"></td>
            </tr>
        </table>
        
          
         <hr style="border: 1px solid #000; margin-top: 20px;">
           
         <h3>D. NEUROVASCULAR *</h3>
         <div class="d-flex justify-content-center gap-3">
            <input type="radio" id="neurovascular_present_radio" name="neurovascular_status" value="Present" onchange="toggleNeuroVascularTable()" required>
            <label for="neurovascular_present_radio" class="me-3">Present</label>
            <input type="radio" id="neurovascular_absent_radio" name="neurovascular_status" value="Absent" onchange="toggleNeuroVascularTable()">
            <label for="neurovascular_absent_radio">Absent</label>
          </div>
        
          <table id="neurovascular-assessment-table">
            <tr>
              <th colspan="2" rowspan="2" class="structure-header">Structure involved</th>
              <th colspan="3">Present</th>
              <th rowspan="3">Absent</th>
            </tr>
            <tr>
              <th colspan="2">Repairable</th>
              <th rowspan="2">Not repairable</th>
            </tr>
            <tr>
              <th colspan="2"></th>
              <th>Done</th>
              <th>Not done</th>
            </tr>
            <tr>
              <td rowspan="4" class="vertical-header">Nerve</td>
              <td class="structure-cell">Main Median nerve</td>
              <td><input type="checkbox" id="median_nerve_done_checkbox"></td>
              <td><input type="checkbox" id="median_nerve_not_done_checkbox"></td>
              <td><input type="checkbox" id="median_nerve_not_repairable_checkbox"></td>
              <td><input type="checkbox" id="median_nerve_absent_checkbox"></td>
            </tr>
            <tr>
              <td class="structure-cell">Main Ulnar nerve</td>
              <td><input type="checkbox" id="ulnar_nerve_done_checkbox"></td>
              <td><input type="checkbox" id="ulnar_nerve_not_done_checkbox"></td>
              <td><input type="checkbox" id="ulnar_nerve_not_repairable_checkbox"></td>
              <td><input type="checkbox" id="ulnar_nerve_absent_checkbox"></td>
            </tr>
            <tr>
              <td class="structure-cell">Motor branch of median nerve</td>
              <td><input type="checkbox" id="motor_median_done_checkbox"></td>
              <td><input type="checkbox" id="motor_median_not_done_checkbox"></td>
              <td><input type="checkbox" id="motor_median_not_repairable_checkbox"></td>
              <td><input type="checkbox" id="motor_median_absent_checkbox"></td>
            </tr>
            <tr>
              <td class="structure-cell">Deep branch of ulnar nerve</td>
              <td><input type="checkbox" id="deep_ulnar_done_checkbox"></td>
              <td><input type="checkbox" id="deep_ulnar_not_done_checkbox"></td>
              <td><input type="checkbox" id="deep_ulnar_not_repairable_checkbox"></td>
              <td><input type="checkbox" id="deep_ulnar_absent_checkbox"></td>
            </tr>
            <tr>
              <td rowspan="2" class="vertical-header">Artery</td>
              <td class="structure-cell">Radial artery</td>
              <td><input type="checkbox" id="radial_artery_done_checkbox"></td>
              <td><input type="checkbox" id="radial_artery_not_done_checkbox"></td>
              <td><input type="checkbox" id="radial_artery_not_repairable_checkbox"></td>
              <td><input type="checkbox" id="radial_artery_absent_checkbox"></td>
            </tr>
            <tr>
              <td class="structure-cell">Ulnar artery</td>
              <td><input type="checkbox" id="ulnar_artery_done_checkbox"></td>
              <td><input type="checkbox" id="ulnar_artery_not_done_checkbox"></td>
              <td><input type="checkbox" id="ulnar_artery_not_repairable_checkbox"></td>
              <td><input type="checkbox" id="ulnar_artery_absent_checkbox"></td>
            </tr>
          </table>
          <script>
            function toggleNeuroVascularTable() {
              const presentRadio = document.getElementById('neurovascular_present_radio');
              const table = document.getElementById('neurovascular-assessment-table');
              
              if (presentRadio.checked) {
                table.style.display = 'table';
              } else {
                table.style.display = 'none';
              }
            }
          </script>
         
             <label for="Disvas" class="form-label">Disvascularity Requiring revascularization: *</label>
             <label>
                <input type="radio" name="Disvascularity"  id="disvasreq"value="Yes" required> Yes
              </label>
              <label>
                <input type="radio" name="Disvascularity" id="disvasreq1234" value="No"> No
              </label>
              
              <table id="thumbb">
                <tr>
                    <th></th>
                    <th></th>
                    <th>Thumb</th>
                    <th>Index</th>
                    <th>Middle</th>
                    <th>Ring</th>
                    <th>Little</th>
                </tr>
                <tr>
                    <td rowspan="2"><b>Digital nerve</b></td>
                    <td>Ulnar digital</td>
                    <td><input type="checkbox" id="ulnar-nerve-thumb"></td>
                    <td><input type="checkbox" id="ulnar-nerve-index"></td>
                    <td><input type="checkbox" id="ulnar-nerve-middle"></td>
                    <td><input type="checkbox" id="ulnar-nerve-ring"></td>
                    <td><input type="checkbox" id="ulnar-nerve-little"></td>
                </tr>
                <tr>
                    <td>Radial digital</td>
                    <td><input type="checkbox" id="radial-nerve-thumb"></td>
                    <td><input type="checkbox" id="radial-nerve-index"></td>
                    <td><input type="checkbox" id="radial-nerve-middle"></td>
                    <td><input type="checkbox" id="radial-nerve-ring"></td>
                    <td><input type="checkbox" id="radial-nerve-little"></td>
                </tr>
                <tr>
                    <td rowspan="2"><b>Digital Artery</b></td>
                    <td>Ulnar digital</td>
                    <td><input type="checkbox" id="ulnar-artery-thumb"></td>
                    <td><input type="checkbox" id="ulnar-artery-index"></td>
                    <td><input type="checkbox" id="ulnar-artery-middle"></td>
                    <td><input type="checkbox" id="ulnar-artery-ring"></td>
                    <td><input type="checkbox" id="ulnar-artery-little"></td>
                </tr>
                <tr>
                    <td>Radial digital</td>
                    <td><input type="checkbox" id="radial-artery-thumb"></td>
                    <td><input type="checkbox" id="radial-artery-index"></td>
                    <td><input type="checkbox" id="radial-artery-middle"></td>
                    <td><input type="checkbox" id="radial-artery-ring"></td>
                    <td><input type="checkbox" id="radial-artery-little"></td>
                </tr>
                <tr>
                    <td colspan="2"><b>Crush / Avulsion</b></td>
                    <td><input type="checkbox" id="crush-thumb"></td>
                    <td><input type="checkbox" id="crush-index"></td>
                    <td><input type="checkbox" id="crush-middle"></td>
                    <td><input type="checkbox" id="crush-ring"></td>
                    <td><input type="checkbox" id="crush-little"></td>
                </tr>
            </table>
                                 
            
            
           <hr style="border: 1px solid #000; margin-top: 20px;">
           <hr style="border: 1px solid #000; margin-top: 20px;">
<style>
    #customVideoContainer {
        display: flex;
        flex-wrap: nowrap;
        overflow-x: auto;
        gap: 10px;
    }
    video {
        max-width: 300px;
    }
</style>
<label for="customVideoInput" class="form-label fw-bold">Upload Video Files (Max 5)</label>
<input type="file" id="customVideoInput" accept="video/*" multiple>
<br><br>
<div id="customVideoContainer"></div>
<script>
    document.getElementById('customVideoInput').addEventListener('change', function(event) {
        const files = event.target.files;
        const videoContainer = document.getElementById('customVideoContainer');
        videoContainer.innerHTML = "";
        
        if (files.length > 5) {
            alert("You can upload a maximum of 5 videos.");
            return;
        }
        
        for (let i = 0; i < files.length; i++) {
            const videoPlayer = document.createElement('video');
            videoPlayer.width = 300;
            videoPlayer.controls = true;
            videoPlayer.src = URL.createObjectURL(files[i]);
            videoContainer.appendChild(videoPlayer);
        }
    });
</script>
         </div>
         <div class="row">
             <div class="col-md-6">
           <button id="add-to-database-button2" type="button" class="btn btn-warning btn-block mr-1">Add to Database</button>
         </div>
         <div class="col-md-6">
             <button id="generatePdf" type="button" class="btn btn-warning btn-block mr-1">Generate Pdf</button>
         </div></div>
       </form>
       </div>
     </div> </div> 
 </body>
 
 <script>
  document.addEventListener('DOMContentLoaded', function() {
    // ================ HELPER FUNCTIONS ================
    
    // Safely add event listener (checks if element exists first)
    function safeAddEventListener(selector, event, callback) {
        const element = document.querySelector(selector);
        if (element) {
            element.addEventListener(event, callback);
        } else {
            console.warn(`Element not found: ${selector}`);
        }
    }

    // ================ PDF GENERATION ================
    
    // PDF generation function
    async function generatePDF(formId) {
        let clonedForm = null;
        let loadingElement = null;
        
        try {
            // Show Loading Indicator
            loadingElement = document.createElement('div');
            Object.assign(loadingElement.style, {
                position: 'fixed', top: '50%', left: '50%',
                transform: 'translate(-50%, -50%)', backgroundColor: 'rgba(255, 255, 255, 0.9)',
                padding: '20px', borderRadius: '5px', boxShadow: '0 2px 10px rgba(0, 0, 0, 0.1)',
                zIndex: '9999'
            });
            loadingElement.innerHTML = 'Generating PDF...';
            document.body.appendChild(loadingElement);
            
            // Check if jsPDF is loaded
            if (!window.jspdf || !window.jspdf.jsPDF) {
                throw new Error('jsPDF library is not loaded. Please include it in your HTML.');
            }
            const { jsPDF } = window.jspdf;
            
            // Get form element
            const formElement = document.getElementById(formId);
            if (!formElement) throw new Error(`Form with ID '${formId}' not found`);
            
            // First, handle canvas elements - convert to images before cloning
            const originalCanvases = formElement.querySelectorAll('canvas');
            const canvasReplacements = [];
            
            // Store original canvas references and positions
            originalCanvases.forEach((canvas, index) => {
                try {
                    // Create an image from the canvas
                    const img = new Image();
                    img.src = canvas.toDataURL('image/png');
                    img.style.width = canvas.offsetWidth + 'px';
                    img.style.height = canvas.offsetHeight + 'px';
                    img.className = 'canvas-replacement-image';
                    img.dataset.canvasIndex = index;
                    
                    // Store reference for replacement
                    canvasReplacements.push({
                        canvas: canvas,
                        image: img
                    });
                } catch (e) {
                    console.warn('Failed to convert canvas to image:', e);
                }
            });
            
            // Clone form
            clonedForm = formElement.cloneNode(true);
            document.body.appendChild(clonedForm);
            
            // Style cloned form for PDF
            Object.assign(clonedForm.style, {
                position: 'absolute',
                top: '-9999px',
                left: '-9999px',
                width: formElement.offsetWidth + 'px',
                background: 'white',
                transform: 'none',
                display: 'block'
            });
            
            // Replace canvas elements with previously created images in the cloned form
            canvasReplacements.forEach(replacement => {
                const originalCanvas = replacement.canvas;
                const newImage = replacement.image;
                
                // Find the corresponding canvas in the clone
                const clonedCanvases = clonedForm.querySelectorAll('canvas');
                
                // Find canvas at same DOM position in the clone
                for (let i = 0; i < clonedCanvases.length; i++) {
                    const clonedCanvas = clonedCanvases[i];
                    if (clonedCanvas.offsetWidth === originalCanvas.offsetWidth && 
                        clonedCanvas.offsetHeight === originalCanvas.offsetHeight) {
                        // Replace with the image
                        clonedCanvas.parentNode.replaceChild(newImage.cloneNode(true), clonedCanvas);
                        break;
                    }
                }
            });
            
            // Fix images in the cloned form
            const images = clonedForm.querySelectorAll('img:not(.canvas-replacement-image)');
            images.forEach(img => {
                if (!img.src || img.src.startsWith('file://')) {
                    const placeholder = document.createElement('div');
                    placeholder.style.width = '100px';
                    placeholder.style.height = '100px';
                    placeholder.style.backgroundColor = '#f0f0f0';
                    placeholder.style.display = 'inline-block';
                    placeholder.style.textAlign = 'center';
                    placeholder.style.lineHeight = '100px';
                    placeholder.textContent = 'Image';
                    img.parentNode.replaceChild(placeholder, img);
                }
            });
            
            // Remove buttons that shouldn't be in the PDF
            clonedForm.querySelectorAll('button, input[type="button"], input[type="submit"]').forEach(btn => {
                btn.remove();
            });
            
            // Fix for duplicate printed values - look for automatically generated text that's duplicating input values
            const textNodes = clonedForm.querySelectorAll('*');
            textNodes.forEach(node => {
                // Look for any elements that contain just the value as text immediately next to form fields
                if (node.childNodes && node.childNodes.length === 1 && node.childNodes[0].nodeType === 3) {
                    const possibleValue = node.textContent.trim();
                    // Find nearby input that might have this value
                    const nearbyInput = node.previousElementSibling || node.nextElementSibling;
                    if (nearbyInput && nearbyInput.tagName === 'INPUT' && nearbyInput.value === possibleValue) {
                        // This is likely a duplicated value - remove it
                        node.textContent = '';
                    }
                }
            });
            
            // Convert form inputs to static text
            clonedForm.querySelectorAll('input, textarea, select').forEach(el => {
                if (el.type === 'checkbox' || el.type === 'radio') {
                    if (el.checked) {
                        el.insertAdjacentHTML('afterend', ' ✓');
                    }
                } else if (el.type === 'file') {
                    el.remove();
                } else {
                    if (el.value) {
                        // Make the input field's value visible but don't add redundant text
                        // Create an input-like element that looks like a result
                        const valueDisplay = document.createElement('span');
                        valueDisplay.textContent = el.value;
                        valueDisplay.style.fontWeight = 'bold';
                        valueDisplay.style.padding = '2px 4px';
                        
                        // Check if there's already a label or text showing this value
                        const parent = el.parentNode;
                        let hasExplicitValue = false;
                        
                        // Look through siblings for exact value matches
                        Array.from(parent.childNodes).forEach(sibling => {
                            if (sibling !== el && sibling.textContent && sibling.textContent.includes(el.value)) {
                                hasExplicitValue = true;
                            }
                        });
                        
                        // Only replace the input with value display if it's not already shown elsewhere
                        if (!hasExplicitValue) {
                            el.parentNode.replaceChild(valueDisplay, el);
                        } else {
                            // Otherwise just remove the input to avoid duplication
                            el.remove();
                        }
                    } else {
                        // Remove empty inputs
                        el.remove();
                    }
                }
            });
            
            // Add delay to ensure everything is rendered
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Create PDF using html2canvas
            loadingElement.innerHTML = 'Creating PDF...';
            
            // Use html2canvas with modified options
            const canvas = await html2canvas(clonedForm, {
                useCORS: true,
                allowTaint: true,
                removeContainer: true,
                backgroundColor: '#ffffff',
                scale: 2,
                logging: false,
                imageTimeout: 30000
            });
            
            // Create PDF from canvas
            const pdf = new jsPDF({
                orientation: 'portrait',
                unit: 'mm',
                format: 'a4'
            });
            
            // Get dimensions
            const imgWidth = pdf.internal.pageSize.getWidth();
            const imgHeight = (canvas.height * imgWidth) / canvas.width;
            
            // Add canvas to PDF (handling multi-page if needed)
            let heightLeft = imgHeight;
            let position = 0;
            let pageHeight = pdf.internal.pageSize.getHeight();
            
            // First page
            pdf.addImage(canvas.toDataURL('image/jpeg', 0.95), 'JPEG', 0, position, imgWidth, imgHeight);
            heightLeft -= pageHeight;
            
            // Add additional pages if needed
            while (heightLeft >= 0) {
                position = heightLeft - imgHeight;
                pdf.addPage();
                pdf.addImage(canvas.toDataURL('image/jpeg', 0.95), 'JPEG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
            }
            
            // Save PDF
            loadingElement.innerHTML = 'Saving PDF...';
            const hospitalNo = document.getElementById('HospitalNo')?.value || 'UnknownHospitalNo';
const now = new Date();
const formattedDate = `${String(now.getDate()).padStart(2, '0')}-${String(now.getMonth() + 1).padStart(2, '0')}-${now.getFullYear()}`;
pdf.save(`${hospitalNo}_${formattedDate}.pdf`);

            
        } catch (error) {
            console.error('PDF generation failed:', error);
            alert('PDF generation failed: ' + error.message + '\nPlease check that all images are accessible and try again.');
            
            // Alternative approach if canvas is tainted
            if (error.message && error.message.includes('Tainted canvases')) {
                alert('Trying alternative approach for PDF generation...');
                
                try {
                    // Create simple PDF without images
                    const { jsPDF } = window.jspdf;
                    const pdf = new jsPDF();
                    
                    // Extract text from form
                    const formElement = document.getElementById(formId);
                    if (!formElement) throw new Error(`Form with ID '${formId}' not found`);
                    
                    const formData = new FormData(formElement);
                    let yPos = 20;
                    
                    pdf.setFontSize(20);
                    pdf.text('Form Data', 20, yPos);
                    yPos += 10;
                    pdf.setFontSize(12);
                    
                    // Add form data to PDF
                    for (let [key, value] of formData.entries()) {
                        // Check if we need to add a new page
                        if (yPos > 270) {
                            pdf.addPage();
                            yPos = 20;
                        }
                        
                        pdf.text(`${key}: ${value}`, 20, yPos);
                        yPos += 8;
                    }
                    
                    pdf.save(`${formId}_text_only.pdf`);
                    
                } catch (fallbackError) {
                    console.error('Fallback PDF generation failed:', fallbackError);
                    alert('All PDF generation methods failed. Please try again or contact support.');
                }
            }
        } finally {
            // Clean up
            clonedForm?.remove();
            loadingElement?.remove();
        }
    }
    
    // ================ ATTACH EVENT LISTENERS ================
    
    // Safely add event listeners to PDF generation buttons
    safeAddEventListener('#generatepdf', 'click', () => generatePDF('add_patient1'));
    safeAddEventListener('#generatePdf', 'click', () => generatePDF('add_patient2'));
    
    // If you have specific adjustForearmCanvasSize function missing, add a placeholder
    if (typeof adjustForearmCanvasSize === 'undefined') {
        window.adjustForearmCanvasSize = function() {
            console.log('adjustForearmCanvasSize called but not implemented');
        };
    }

    console.log('PDF generation system initialized successfully');
});
    // Logout function with confirmation
    document.getElementById("logout").addEventListener("click", function (event) {
            event.preventDefault();
            let confirmLogout = confirm("Are you sure you want to log out?");
            if (confirmLogout) {
                window.location.href = "index.html"; // Redirects to login page if confirmed
            }
        });</script>
 </html>
